(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-25cb","chunk-3276","chunk-5e63","chunk-63c8","chunk-1e21","chunk-4e81","chunk-0740","chunk-0717"],{"+FZg":function(t,e,a){},"+Ppq":function(t,e,a){"use strict";var s=a("rI3T");a.n(s).a},"/ZXr":function(t,e,a){"use strict";var s=a("8c0w");a.n(s).a},"1DEn":function(t,e,a){"use strict";a.r(e);var s=a("EJiy"),r=a.n(s),o=a("P2sY"),i=a.n(o),n=a("gDS+"),c=a.n(n),l=a("D+m3"),p=a("VZk3"),u=a("M2Gm"),d=a("pqQ+"),h=a("XLZo"),m=a("fkTm"),v=a("T6TZ"),g={name:"videoca",mixins:[a("y2a5").a],components:{Accessedit:l.default,Startcamera:p.default,Cameraedit:u.default,Bulkimport:d.default,Devices:h.default,Closecamera:m.default,Restartcamera:v.default},props:{},data:function(){return{cameraData:[],cameraTotalRec:0,cameraTotalPage:0,cameraRecOfPage:10,cameraCurPage:1,cameraCbPage:this.gen_list_cb("camera"),cameraQueryArr:[{name:"title",val:"",op:"like",tb:"camera"},{name:"state",val:"",op:"like",tb:"camera"},{name:"region_id",val:0,tb:"camera"}],cameraQueryInit:[{name:"title",val:"",op:"like",tb:"camera"},{name:"state",val:"",op:"like",tb:"camera"},{name:"region_id",val:0,tb:"camera"}],cameraMultiSel:[],cameraSortParas:[{name:"title",tb:"camera",orderV:"asc"}],showAdd:!1,accesseditEdit:null,showUp:!1,accesseditEdit1:null,startcameras:!1,startcameraEdit:null,showEditCrmSet:!1,crmInstEdit:null,showEditManSet:!1,manInstEdit:null,showEditSheSet:!1,sheInstEdit:null,showEditCameSet:!1,cameInstEdit:null,showEditRecamSet:!1,RecamEdit:null,shows:!1,shows1:!1,shows2:!1,successshow:!1,closeshow:!1,successshow1:!1,closeshow1:!1,successshow2:!1,closeshow2:!1,equipmentname:"",dataArr:[],runArr:[{value:"",label:"全部"},{value:"运行中",label:"运行中"},{value:"关闭",label:"关闭"},{value:"异常",label:"异常"}],progresss:0,closeprogresss:0,restartprogresss:0,titles:"",cgprogress:0,cgbarstate:"",cgbarcolor:"",gbprogress:0,gbbarstate:"",gbbarcolor:"",cqprogress1:0,cqbarstate1:"",cqbarcolor1:"",cqprogress2:0,cqbarstate2:"",cqbarcolor2:"",cqprogress3:0,cqbarcolor3:"",cqprogress4:0,cqbarcolor4:"",msg:"",msg1:"",msg2:"",reason:!1,reason1:!1,reason2:!1,tableHeight:window.innerHeight-340,regioneTitle:"",regioneTtData:[],regioneTtList:[],regioneIndexCode:"",regioneId:0,regioneData:{},arrID:[],timer:null,timer1:null,timer2:null}},mounted:function(){var t=this;this.refreshPage("camera","/actq","cameralist"),this.callSrvAct("/regionlist",{title:"",cp:0,rop:10}).then(function(e){console.log("区域",e),t.regioneTtList=e.data||[];for(var a=e.data||[],s=[],r=0;r<a.length;r++)a[r].isLeaf=!0,a[r].children=[],0==a[r].parent_id&&s.push(a[r]);t.regioneTtData=s})},methods:{cameraMultiSelChange:function(t){this.cameraMultiSel=t},cameraQuery:function(){this.refreshPage2("camera","/actq",this.remoteRecOfPage,1,"cameralist")},cameraResetQuery:function(){this.cameraQueryArr=JSON.parse(c()(this.cameraQueryInit))},cameraSizeChange:function(t){this.refreshPage2("camera","/actq",t,this.cameraCurPage,"cameralist")},cameraCurChange:function(t){this.refreshPage2("camera","/actq",this.cameraRecOfPage,t,"cameralist")},handleShow1:function(){this.accesseditEdit={id:0,title:"",parent_id:this.regioneData.id},console.log(this.regioneData),this.showAdd=!0},handleShow2:function(){this.accesseditEdit1=this.regioneData,this.showUp=!0},delss:function(){var t=this;this.arrID=[],this.regioneData.children.length>0?(this.arrID=this.childID(this.regioneData,this.regioneTtList),this.arrID.push(this.regioneData.id)):this.arrID=[this.regioneData.id],console.log("2222222222222222",this.arrID),this.childID(this.regioneData),this.$confirm("确认删除？此区域下的子区域将会一并删除","删除区域",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={_hy:"regiondel",region:[{name:"id",val:t.arrID,op:"in"}]};t.callSrvAct("/act",e).then(function(e){t.callSrvAct("/regionlist",{title:"",cp:0,rop:10}).then(function(e){console.log("区域",e),t.regioneTtList=e.data||[],t.acccontrolTotalRec=e.data.totalRec;for(var a=e.data||[],s=[],r=0;r<a.length;r++)a[r].isLeaf=!0,a[r].children=[],0==a[r].parent_id&&s.push(a[r]);t.regioneTtData[0].children=s})})}).catch(function(t){})},childID:function(t,e){for(var a=0;a<this.regioneTtList.length;a++)t.id==this.regioneTtList[a].parent_id&&(this.arrID.push(this.regioneTtList[a].id),this.childID(this.regioneTtList[a],this.regioneTtList));return this.arrID},treeClick:function(t,e,a){console.log(t,e,a),this.regioneData=t,0==t.parent_id?(this.regioneIndexCode="",this.regioneId=0):(this.regioneIndexCode=t.indexCode,this.regioneId=t.id);for(var s=0;s<this.regioneTtList.length;s++)t.id==this.regioneTtList[s].parent_id&&t.children.push(this.regioneTtList[s]);this.$refs.regione.updateKeyChildren(t.id,t.children),this.arrID=[],this.regioneData.children.length>0?(this.arrID=this.childID(this.regioneData,this.regioneTtList),this.arrID.push(this.regioneData.id)):this.arrID=[this.regioneData.id],this.childID(this.regioneData),this.cameraQueryArr[2].val=this.arrID,this.cameraQueryArr[2].op="in",this.refreshPage("camera","/actq","cameralist")},regioneChange:function(){var t=this;this.callSrvAct("/regionlist",{title:this.regioneTitle,cp:0,rop:10}).then(function(e){console.log("区域",e),t.regioneTtList=e.data||[];var a=e.data||[],s=[];if(""==t.regioneTitle)for(var r=0;r<a.length;r++)a[r].isLeaf=!0,a[r].children=[],0==a[r].parent_id&&s.push(a[r]);else for(var o=0;o<a.length;o++)a[o].isLeaf=!0,a[o].children=[],s.push(a[o]);t.regioneTtData[0].children=s})},accesseditOK:function(){var t=this;this.showAdd=!1,this.callSrvAct("/regionlist",{title:"",cp:0,rop:10}).then(function(e){console.log("区域",e),t.regioneTtList=e.data||[];for(var a=e.data||[],s=[],r=0;r<a.length;r++)a[r].isLeaf=!0,a[r].children=[],0==a[r].parent_id&&s.push(a[r]);t.regioneTtData[0].children=s})},accesseditOK1:function(){var t=this;this.showUp=!1,this.callSrvAct("/regionlist",{title:"",cp:0,rop:10}).then(function(e){console.log("区域",e),t.regioneTtList=e.data||[];for(var a=e.data||[],s=[],r=0;r<a.length;r++)a[r].isLeaf=!0,a[r].children=[],0==a[r].parent_id&&s.push(a[r]);t.regioneTtData[0].children=s})},close1:function(){this.showAdd=!1},close2:function(){this.showUp=!1},accesseditSet:function(){this.showAdd=!1},accesseditSet1:function(){this.showUp=!1},addCrm:function(){this.crmInstEdit={id:0},this.titles="新增摄像机",this.showEditCrmSet=!0},handlecameraEdit:function(t,e){console.log(t,e),this.titles="编辑摄像机",this.crmInstEdit=i()({},e),this.showEditCrmSet=!0},handlecameraDel:function(t,e){var a=this,s=e;this.$confirm("此操作将删除该项数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={_hy:"cameradel",camera:[{name:"id",val:[s.id],op:"in"}]};console.log("upData:",t),a.callSrvAct("/act",t).then(function(t){a.refreshPage("camera","/actq","cameralist")})}).catch(function(t){a.$message.error(t)})},editCrmSetOK:function(){this.showEditCrmSet=!1,this.refreshPage("camera","/actq","cameralist")},showEditCrmSets:function(){this.showEditCrmSet=!1},opencam:function(t,e){console.log("当前行数据",e),this.startcameraEdit=e,this.startcameras=!0,console.log("显示")},popupwclosed1:function(){this.startcameras=!1},startcameraOK:function(){this.refreshPage("camera","/actq","cameralist")},startcameraSet:function(t){console.log(t),this.startcameras=!1,"SUCCESS"==t.status?(this.cgprogress=t.progress,this.cgbarstate=t.barstate,this.cgbarcolor=t.barcolor,this.successshow=!0):(this.cgprogress=t.progress,this.cgbarstate=t.barstate,this.cgbarcolor=t.barcolor,this.closeshow=!0,this.msg=t.msg)},lotimport:function(){this.$router.push({name:"bulkimport"})},shesync:function(){this.showEditSheSet=!0},editSheSetOK:function(){this.showEditSheSet=!1,this.refreshPage("camera","/actq","cameralist")},showEditSheSets:function(){this.showEditSheSet=!1},turnoffcame:function(t,e){this.cameInstEdit=i()({},e),this.showEditCameSet=!0},popupwclosed2:function(){this.showEditCameSet=!1},showEditRecamSets:function(t){console.log(t),this.showEditRecamSet=!1,"SUCCESS"==t.status?(this.cqprogress1=t.progress1,this.cqprogress2=t.progress2,this.cqprogress3=t.progress3,this.cqprogress4=t.progress4,this.cqbarstate1=t.barstate1,this.cqbarstate2=t.barstate2,this.cqbarcolor1=t.barcolor1,this.cqbarcolor2=t.barcolor2,this.cqbarcolor3=t.barcolor3,this.cqbarcolor4=t.barcolor4,this.successshow2=!0):(this.cqprogress1=t.progress1,this.cqprogress2=t.progress2,this.cqprogress3=t.progress3,this.cqprogress4=t.progress4,this.cqbarstate1=t.barstate1,this.cqbarstate2=t.barstate2,this.cqbarcolor1=t.barcolor1,this.cqbarcolor2=t.barcolor2,this.cqbarcolor3=t.barcolor3,this.cqbarcolor4=t.barcolor4,this.msg2=t.msg,this.closeshow2=!0)},recam:function(t,e){this.RecamEdit=i()({},e),this.showEditRecamSet=!0},popupwclosed3:function(){this.showEditRecamSet=!1},editCameSetOK:function(){this.refreshPage("camera","/actq","cameralist")},show:function(){var t=this;this.shows=!0;for(var e={_hy:"cameraopen",qps:[{name:"id",val:this.cameraMultiSel,op:"in"}]},a=0;a<this.dataArr.length;a++)this.dataArr[a].progress=0,this.dataArr[a].barcolor="",this.dataArr[a].barstate="";this.callSrvAct("/deviceopen",e).then(function(e){console.log("返回值",e,t.cameraMultiSel),t.count(0,e.data)})},count:function(t,e){var a=this,s=this,r=e;this.timer||(this.timer=setInterval(function(){var o=t;e&&e[o]&&"SUCCESS"==e[o].result?(s.dataArr[o].progress=s.dataArr[o].progress+20,s.dataArr[o].date=e[o].date,s.dataArr[o].barcolor="green"):e&&e[o]&&"FAILD"==e[o].result&&(s.dataArr[o].progress=s.dataArr[o].progress+20,s.dataArr[o].date=e[o].date,s.dataArr[o].barcolor="red"),s.$set(s.dataArr,o,s.dataArr[o]),s.progresss=s.progresss+10,s.progresss>=90&&(s.progresss=90),s.dataArr[o].progress>=100&&(console.log("结束"),"SUCCESS"==e[o].result?s.dataArr[o].barstate="success":"FAILD"==e[o].result&&(s.dataArr[o].barstate="exception",s.dataArr[o].msg=e[o].msg,s.reason=!0),a.timer&&(clearInterval(a.timer),a.timer=null),(o+=1)==a.dataArr.length&&(s.progresss=100),o<a.dataArr.length&&(console.log("次数",o),a.count(o,r)))},200))},batchclose1:function(){console.log("111"),this.shows=!1,this.progresss=0,this.reason=!1,this.timer&&(clearInterval(this.timer),this.timer=null),this.refreshPage("camera","/actq","cameralist")},plkqgb:function(){this.shows=!1,this.progresss=0,this.reason=!1,this.timer&&(clearInterval(this.timer),this.timer=null),this.refreshPage("camera","/actq","cameralist")},batchclose2:function(){this.shows1=!1,this.closeprogresss=0,this.reason1=!1,this.timer1&&(clearInterval(this.timer1),this.timer1=null),this.refreshPage("camera","/actq","cameralist")},plgbgb:function(){this.shows1=!1,this.closeprogresss=0,this.reason1=!1,this.timer1&&(clearInterval(this.timer1),this.timer1=null),this.refreshPage("camera","/actq","cameralist")},batchclose3:function(){this.shows2=!1,this.restartprogresss=0,this.reason2=!1,this.timer2&&(clearInterval(this.timer2),this.timer1=null),this.refreshPage("camera","/actq","cameralist")},plchgb:function(){this.shows2=!1,this.restartprogresss=0,this.reason2=!1,this.timer2&&(clearInterval(this.timer2),this.timer2=null),this.refreshPage("camera","/actq","cameralist")},show1:function(){var t=this;this.shows1=!0;for(var e={_hy:"cameraclose",qps:[{name:"id",val:this.cameraMultiSel,op:"in"}]},a=0;a<this.dataArr.length;a++)this.dataArr[a].closeprogress=0,this.dataArr[a].closebarcolor="",this.dataArr[a].closebarstate="";this.callSrvAct("/deviceclose",e).then(function(e){console.log("返回值",e,t.cameraMultiSel),t.count1(0,e.data)})},count1:function(t,e){var a=this,s=this,r=e;this.timer1||(this.timer1=setInterval(function(){var o=t;"SUCCESS"==e[o].result?(s.dataArr[o].closeprogress=s.dataArr[o].closeprogress+20,s.dataArr[o].date=e[o].date,s.dataArr[o].closebarcolor="green"):"FAILD"==e[o].result&&(s.dataArr[o].closeprogress=s.dataArr[o].closeprogress+20,s.dataArr[o].date=e[o].date,s.dataArr[o].closebarcolor="red"),s.$set(s.dataArr,o,s.dataArr[o]),s.closeprogresss=s.closeprogresss+10,s.closeprogresss>=90&&(s.closeprogresss=90),s.dataArr[o].closeprogress>=100&&("SUCCESS"==e[o].result?s.dataArr[o].closebarstate="success":"FAILD"==e[o].result&&(s.dataArr[o].closebarstate="exception",s.dataArr[o].msg=e[o].msg,s.reason1=!0),console.log("结束"),a.timer1&&(clearInterval(a.timer1),a.timer1=null),(o+=1)==a.dataArr.length&&(s.closeprogresss=100),o<a.dataArr.length&&(console.log("次数",o),a.count1(o,r)))},200))},show2:function(){var t=this;this.shows2=!0;for(var e={_hy:"camerarestart",qps:[{name:"id",val:this.cameraMultiSel,op:"in"}]},a=0;a<this.dataArr.length;a++)this.dataArr[a].restarprogress=0,this.dataArr[a].restarbarcolor="",this.dataArr[a].restarbarstate="";this.callSrvAct("/devicerestart",e).then(function(e){console.log("返回值",e,t.cameraMultiSel),t.count2(0,e.data)})},count2:function(t,e){var a=this,s=this,r=e;this.timer2||(this.timer2=setInterval(function(){var o=t;"SUCCESS"==e[o].result?(s.dataArr[o].restarprogress=s.dataArr[o].restarprogress+20,s.dataArr[o].date=e[o].date,s.dataArr[o].restarbarcolor="green"):"FAILD"==e[o].result&&(s.dataArr[o].restarprogress=s.dataArr[o].restarprogress+20,s.dataArr[o].date=e[o].date,s.dataArr[o].restarbarcolor="red"),s.$set(s.dataArr,o,s.dataArr[o]),s.restartprogresss=s.restartprogresss+10,s.restartprogresss>=90&&(s.restartprogresss=90),s.dataArr[o].restarprogress>=100&&(console.log("结束"),"SUCCESS"==e[o].result?s.dataArr[o].restarbarstate="success":"FAILD"==e[o].result&&(s.dataArr[o].restarbarstate="exception",s.dataArr[o].msg=e[o].msg,s.reason2=!0),a.timer2&&(clearInterval(a.timer2),a.timer2=null),(o+=1)==a.dataArr.length&&(s.restartprogresss=100),o<a.dataArr.length&&(console.log("次数",o),a.count2(o,r)))},200))},show3:function(){var t=this;console.log("多选ID",this.cameraMultiSel);var e=this;this.$confirm("此操作将删除该项数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={_hy:"cameradel",camera:[{name:"id",val:e.cameraMultiSel,op:"in"}]};console.log("upData:",a),t.callSrvAct("/act",a).then(function(e){t.refreshPage("camera","/actq","cameralist")})}).catch(function(e){t.$message.error(e)})},SizeChange:function(){},CurChange:function(){},editManSetOK:function(){},editRecamSetOK:function(){},showEditCameSets:function(t){console.log(t),this.showEditCameSet=!1,"SUCCESS"==t.status?(this.gbprogress=t.progress,this.gbbarstate=t.barstate,this.gbbarcolor=t.barcolor,this.successshow1=!0):(this.gbprogress=t.progress,this.gbbarstate=t.barstate,this.gbbarcolor=t.barcolor,this.msg1=t.msg,this.closeshow1=!0)},handleChange:function(t){console.log(t);for(var e=[],a=0;a<t.length;a++)e.push(t[a].id);this.cameraMultiSel=e,this.dataArr=JSON.parse(c()(t));for(var s=0;s<this.dataArr.length;s++)this.dataArr[s].msg="",this.dataArr[s].date=""},exportExcel:function(){for(var t=[],e=0;e<this.cameraData.length;e++)t.push({"设备名称":this.cameraData[e].title,"摄像机位置":this.cameraData[e].region_title,"视频地址":this.cameraData[e].videoa,"状态":this.cameraData[e].state,"算法":this.cameraData[e].algorithms,"分辨率及帧率":this.cameraData[e].resolution+""+this.cameraData[e].scene,"厂商":this.cameraData[e].corp});var a=XLSX.utils.json_to_sheet(t);console.log(a),this.openDownloadDialog(this.sheet2blob(a),"下载.xlsx")},sheet2blob:function(t,e){var a={SheetNames:[e=e||"sheet1"],Sheets:{}};a.Sheets[e]=t;var s=XLSX.write(a,{bookType:"xlsx",bookSST:!1,type:"binary"});return new Blob([function(t){for(var e=new ArrayBuffer(t.length),a=new Uint8Array(e),s=0;s!=t.length;++s)a[s]=255&t.charCodeAt(s);return e}(s)],{type:"application/octet-stream"})},openDownloadDialog:function(t,e){"object"==(void 0===t?"undefined":r()(t))&&t instanceof Blob&&(t=URL.createObjectURL(t));var a,s=document.createElement("a");s.href=t,s.download=e||"",window.MouseEvent?a=new MouseEvent("click"):(a=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(a)},search:function(){this.refreshPage("camera","/actq","cameralist")},successclose:function(){this.successshow=!1},closeclose:function(){this.closeshow=!1},successclose1:function(){this.successshow1=!1},closeclose1:function(){this.closeshow1=!1},successclose2:function(){this.successshow2=!1},closeclose2:function(){this.closeshow2=!1}},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},destroyed:function(){}},f=(a("Rtnw"),a("KHd+")),b=Object(f.a)(g,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticStyle:{height:"100%"},attrs:{direction:"horizontal"}},[a("el-aside",{staticStyle:{"border-right":"1px solid #D7D7D7"},attrs:{width:"250px"}},[a("div",{staticStyle:{display:"flex","justify-content":"space-around",width:"100%"}},[a("span",{staticStyle:{display:"block","font-size":"24px","font-weight":"800"},on:{click:t.handleShow1}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("span",{staticStyle:{display:"block","font-size":"24px","font-weight":"800"},on:{click:t.handleShow2}},[a("i",{staticClass:"el-icon-edit"})]),t._v(" "),a("span",{staticStyle:{display:"block","font-size":"24px","font-weight":"800"},on:{click:t.delss}},[a("i",{staticClass:"el-icon-delete"})])]),t._v(" "),a("el-input",{staticStyle:{margin:"10px",width:"270px"},attrs:{placeholder:"搜索区域名称"},on:{blur:t.regioneChange},model:{value:t.regioneTitle,callback:function(e){t.regioneTitle=e},expression:"regioneTitle"}}),t._v(" "),a("el-tree",{ref:"regione",attrs:{"node-key":"id",props:{label:"title",disabled:!1,isLeaf:!0,children:"children"},"highlight-current":!0,"default-expand-all":!0,id:"regione",data:t.regioneTtData},on:{"node-click":t.treeClick}})],1),t._v(" "),a("el-main",[a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{"margin-right":"10px"}},[a("span",[t._v("摄像机名称\n                ")]),t._v(" "),a("el-input",{staticStyle:{width:"220px","margin-left":"10px"},model:{value:t.cameraQueryArr[0].val,callback:function(e){t.$set(t.cameraQueryArr[0],"val",e)},expression:"cameraQueryArr[0].val"}})],1),t._v(" "),a("div",{staticStyle:{"margin-right":"30px","margin-left":"30px"}},[a("span",[t._v("运行状态\n                ")]),t._v(" "),a("el-select",{staticStyle:{"margin-left":"10px"},model:{value:t.cameraQueryArr[1].val,callback:function(e){t.$set(t.cameraQueryArr[1],"val",e)},expression:"cameraQueryArr[1].val"}},t._l(t.runArr,function(t,e){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[a("span",[t._v("搜索\n                    ")])])],1)]),t._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{on:{click:t.shesync}},[a("span",[t._v("设备同步\n                ")])]),t._v(" "),a("el-button",{on:{click:t.addCrm}},[a("span",[t._v("新增\n                ")])]),t._v(" "),a("el-button",{on:{click:t.show}},[a("span",[t._v("批量开启\n                ")])]),t._v(" "),a("el-button",{on:{click:t.show1}},[a("span",[t._v("批量关闭\n                ")])]),t._v(" "),a("el-button",{on:{click:t.show2}},[a("span",[t._v("批量重启\n                ")])]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:t.show3}},[a("span",[t._v("批量删除\n                ")])]),t._v(" "),a("el-button",{on:{click:t.lotimport}},[a("span",[t._v("批量导入\n                ")])]),t._v(" "),a("el-button",{on:{click:t.exportExcel}},[a("span",[t._v("批量导出\n                ")])])],1),t._v(" "),a("el-table",{ref:"camera",staticStyle:{margin:"10px 0px"},attrs:{stripe:!0,border:!0,height:t.tableHeight,"header-cell-style":{background:"#E6F4FF",fontWeight:"500",color:"#0A51C4",borderBottom:"2px solid #4093F7"},id:"camera",data:t.cameraData},on:{"selection-change":t.handleChange}},[a("el-table-column",{attrs:{label:"全选",type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{label:"摄像机名称",prop:"title",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"摄像机位置",prop:"region_title"}}),t._v(" "),a("el-table-column",{attrs:{label:"视频地址",prop:"videoa",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"state",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"算法",prop:"algorithms",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"分辨率",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.resolution)+"\n                    ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"帧率",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.framerate)+"\n                    ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"厂商",prop:"corp",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"400px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.opencam(e.$index,e.row)}}},[a("span",[t._v("开启\n                            ")])]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.turnoffcame(e.$index,e.row)}}},[a("span",[t._v("关闭\n                            ")])]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.recam(e.$index,e.row)}}},[a("span",[t._v("重启\n                            ")])]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handlecameraEdit(e.$index,e.row)}}},[a("span",[t._v("编辑\n                            ")])]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.handlecameraDel(e.$index,e.row)}}},[a("span",[t._v("删除\n                            ")])])],1)]}}])})],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{total:t.cameraTotalRec,"page-count":t.cameraTotalPage,layout:"total, sizes, prev, pager, next"},on:{"size-change":t.cameraSizeChange,"current-change":t.cameraCurChange}})],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.showAdd,title:"添加区域","modal-append-to-body":!1},on:{"update:visible":function(e){t.showAdd=e},close:t.close1}},[a("accessedit",{attrs:{paramsObj:t.accesseditEdit},on:{submitOk:t.accesseditOK,submitClose:t.accesseditSet}})],1),t._v(" "),a("el-dialog",{attrs:{visible:t.showUp,title:"区域部门","modal-append-to-body":!1},on:{"update:visible":function(e){t.showUp=e},close:t.close2}},[a("accessedit",{attrs:{paramsObj:t.accesseditEdit1},on:{submitOk:t.accesseditOK1,submitClose:t.accesseditSet1}})],1),t._v(" "),t.startcameras?a("el-dialog",{attrs:{visible:t.startcameras,title:"启动摄像机","append-to-body":!0,"destroy-on-close":!0,close:t.popupwclosed1},on:{"update:visible":function(e){t.startcameras=e}}},[t.startcameras?a("startcamera",{attrs:{paramsObj:t.startcameraEdit},on:{submitOk:t.startcameraOK,submitClose:t.startcameraSet}}):t._e()],1):t._e(),t._v(" "),a("el-dialog",{attrs:{visible:t.showEditCrmSet,title:t.titles,"append-to-body":!0,"destroy-on-close":!0},on:{"update:visible":function(e){t.showEditCrmSet=e}}},[t.showEditCrmSet?a("cameraedit",{attrs:{paramsObj:t.crmInstEdit},on:{submitOk:t.editCrmSetOK,submitClose:t.showEditCrmSets}}):t._e()],1),t._v(" "),a("el-dialog",{attrs:{visible:t.showEditManSet,title:"批量导入","append-to-body":!0,"destroy-on-close":!0},on:{"update:visible":function(e){t.showEditManSet=e}}},[t.showEditManSet?a("bulkimport",{attrs:{paramsObj:t.manInstEdit},on:{submitOk:t.editManSetOK,submitClose:t.showEditManSet}}):t._e()],1),t._v(" "),t.showEditSheSet?a("el-dialog",{attrs:{visible:t.showEditSheSet,title:"同步设备","append-to-body":!0,"destroy-on-close":!0},on:{"update:visible":function(e){t.showEditSheSet=e}}},[t.showEditSheSet?a("devices",{attrs:{paramsObj:t.sheInstEdit},on:{submitOk:t.editSheSetOK,submitClose:t.showEditSheSets}}):t._e()],1):t._e(),t._v(" "),t.showEditCameSet?a("el-dialog",{attrs:{visible:t.showEditCameSet,title:"关闭摄像机","append-to-body":!0,"destroy-on-close":!0,close:t.popupwclosed2},on:{"update:visible":function(e){t.showEditCameSet=e}}},[t.showEditCameSet?a("closecamera",{attrs:{paramsObj:t.cameInstEdit},on:{submitOk:t.editCameSetOK,submitClose:t.showEditCameSets}}):t._e()],1):t._e(),t._v(" "),t.showEditRecamSet?a("el-dialog",{attrs:{visible:t.showEditRecamSet,title:"重启摄像机","append-to-body":!0,"destroy-on-close":!0,close:t.popupwclosed3},on:{"update:visible":function(e){t.showEditRecamSet=e}}},[t.showEditRecamSet?a("restartcamera",{attrs:{paramsObj:t.RecamEdit},on:{submitOk:t.editRecamSetOK,submitClose:t.showEditRecamSets}}):t._e()],1):t._e(),t._v(" "),t.shows?a("el-dialog",{attrs:{visible:t.shows,title:"批量开启"},on:{"update:visible":function(e){t.shows=e},close:t.batchclose1}},[a("div",{staticStyle:{display:"flex"}},[a("span",[t._v("总进度：\n            ")]),t._v(" "),a("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.progresss,color:""}})],1),t._v(" "),a("el-table",{staticStyle:{margin:"10px 0px"},attrs:{data:t.dataArr,"header-cell-style":{background:"rgba(241,246,254,1)",fontWeight:"500",color:"#333333",fontSize:"16px"}}},[a("el-table-column",{attrs:{label:"设备名称",prop:"title"}}),t._v(" "),a("el-table-column",{attrs:{label:"启动时间",prop:"date"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.gcomm.v2datetimestr(e.row.date))+"\n                    ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"开启进度"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-progress",{attrs:{percentage:t.row.progress,status:t.row.barstate,color:t.row.barcolor}})]}}])}),t._v(" "),t.reason?a("el-table-column",{attrs:{label:"失败原因",prop:"msg"}}):t._e()],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{on:{click:t.plkqgb}},[a("span",[t._v("关闭\n                ")])])],1)],1):t._e(),t._v(" "),t.shows1?a("el-dialog",{attrs:{visible:t.shows1,title:"批量关闭","destroy-on-close":!0},on:{"update:visible":function(e){t.shows1=e},close:t.batchclose2}},[a("div",{staticStyle:{display:"flex"}},[a("span",[t._v("总进度：\n            ")]),t._v(" "),a("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.closeprogresss}})],1),t._v(" "),a("el-table",{staticStyle:{margin:"10px 0px"},attrs:{data:t.dataArr,"header-cell-style":{background:"rgba(241,246,254,1)",fontWeight:"500",color:"#333333",fontSize:"16px"}}},[a("el-table-column",{attrs:{label:"设备名称",prop:"title"}}),t._v(" "),a("el-table-column",{attrs:{label:"启动时间",prop:"date"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.gcomm.v2datetimestr(e.row.date))+"\n                    ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"关闭进度"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-progress",{attrs:{percentage:t.row.closeprogress,status:t.row.closebarstate,color:t.row.closebarcolor}})]}}])}),t._v(" "),t.reason1?a("el-table-column",{attrs:{label:"失败原因",prop:"msg"}}):t._e()],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{on:{click:t.plgbgb}},[a("span",[t._v("关闭\n                ")])])],1)],1):t._e(),t._v(" "),t.shows2?a("el-dialog",{attrs:{visible:t.shows2,title:"批量重启","destroy-on-close":!0},on:{"update:visible":function(e){t.shows2=e},close:t.batchclose3}},[a("div",{staticStyle:{display:"flex"}},[a("span",[t._v("总进度：\n            ")]),t._v(" "),a("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.restartprogresss}})],1),t._v(" "),a("el-table",{staticStyle:{margin:"10px 0px"},attrs:{data:t.dataArr,"header-cell-style":{background:"rgba(241,246,254,1)",fontWeight:"500",color:"#333333",fontSize:"16px"}}},[a("el-table-column",{attrs:{label:"设备名称",prop:"title"}}),t._v(" "),a("el-table-column",{attrs:{label:"启动时间",prop:"date"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.gcomm.v2datetimestr(e.row.date))+"\n                    ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"重启进度"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-progress",{attrs:{percentage:t.row.restarprogress,status:t.row.restarbarstate,color:t.row.restarbarcolor}})]}}])}),t._v(" "),t.reason2?a("el-table-column",{attrs:{label:"失败原因",prop:"msg"}}):t._e()],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{on:{click:t.plchgb}},[a("span",[t._v("关闭\n                ")])])],1)],1):t._e(),t._v(" "),t.successshow?a("el-dialog",{attrs:{visible:t.successshow,"append-to-body":!0},on:{"update:visible":function(e){t.successshow=e}}},[a("div",{staticStyle:{width:"100%","text-align":"center"}},[a("span",[t._v("启动成功\n            ")])]),t._v(" "),a("div",[a("span",{staticStyle:{"font-size":"18px","font-weight":"500"}},[t._v("开启进度\n            ")])]),t._v(" "),a("div",{staticStyle:{display:"flex",margin:"10px 0px"}},[a("span",[t._v("摄像机接入：\n            ")]),t._v(" "),a("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.cgprogress,status:t.cgbarstate,color:t.cgbarcolor}})],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{on:{click:t.successclose}},[a("span",[t._v("关闭\n                ")])])],1)]):t._e(),t._v(" "),t.closeshow?a("el-dialog",{attrs:{visible:t.closeshow,"append-to-body":!0},on:{"update:visible":function(e){t.closeshow=e}}},[a("div",{staticStyle:{width:"100%","text-align":"center"}},[a("span",[t._v("启动失败\n            ")])]),t._v(" "),a("div",[a("span",{staticStyle:{"font-size":"18px","font-weight":"500"}},[t._v("开启进度\n            ")])]),t._v(" "),a("div",{staticStyle:{display:"flex",margin:"10px 0px"}},[a("span",[t._v("摄像机接入：\n            ")]),t._v(" "),a("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.cgprogress,status:t.cgbarstate,color:t.cgbarcolor}})],1),t._v(" "),a("div",[a("span",{staticStyle:{"font-size":"18px","font-weight":"500"}},[t._v("失败原因：\n            ")])]),t._v(" "),a("div",{staticStyle:{margin:"10px 0px"}},[a("span",{staticStyle:{"margin-left":"50px"}},[t._v(t._s(t.msg)+"\n            ")])]),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{on:{click:t.closeclose}},[a("span",[t._v("关闭\n                ")])])],1)]):t._e(),t._v(" "),t.successshow1?a("el-dialog",{attrs:{visible:t.successshow1,"append-to-body":!0},on:{"update:visible":function(e){t.successshow1=e}}},[a("div",{staticStyle:{width:"100%","text-align":"center"}},[a("span",[t._v("关闭成功\n            ")])]),t._v(" "),a("div",[a("span",{staticStyle:{"font-size":"18px","font-weight":"500"}},[t._v("关闭进度\n            ")])]),t._v(" "),a("div",{staticStyle:{display:"flex",margin:"10px 0px"}},[a("span",[t._v("断开摄像机：\n            ")]),t._v(" "),a("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.gbprogress,status:t.gbbarstate,color:t.gbbarcolor}})],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{on:{click:t.successclose1}},[a("span",[t._v("关闭\n                ")])])],1)]):t._e(),t._v(" "),t.closeshow1?a("el-dialog",{attrs:{visible:t.closeshow1,"append-to-body":!0},on:{"update:visible":function(e){t.closeshow1=e}}},[a("div",{staticStyle:{width:"100%","text-align":"center"}},[a("span",[t._v("关闭失败\n            ")])]),t._v(" "),a("div",[a("span",{staticStyle:{"font-size":"18px","font-weight":"500"}},[t._v("关闭进度\n            ")])]),t._v(" "),a("div",{staticStyle:{display:"flex",margin:"10px 0px"}},[a("span",[t._v("断开摄像机：\n            ")]),t._v(" "),a("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.gbprogress,status:t.gbbarstate,color:t.gbbarcolor}})],1),t._v(" "),a("div",[a("span",{staticStyle:{"font-size":"18px","font-weight":"500"}},[t._v("失败原因：\n            ")])]),t._v(" "),a("div",{staticStyle:{margin:"10px 0px"}},[a("span",{staticStyle:{"margin-left":"50px"}},[t._v(t._s(t.msg1)+"\n            ")])]),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{on:{click:t.closeclose1}},[a("span",[t._v("关闭\n                ")])])],1)]):t._e(),t._v(" "),t.successshow2?a("el-dialog",{attrs:{visible:t.successshow2,"append-to-body":!0},on:{"update:visible":function(e){t.successshow2=e}}},[a("div",{staticStyle:{width:"100%","text-align":"center"}},[a("span",[t._v("重启成功\n            ")])]),t._v(" "),a("div",[a("span",{staticStyle:{"font-size":"18px","font-weight":"500"}},[t._v("关闭进度\n            ")])]),t._v(" "),a("div",{staticStyle:{display:"flex",margin:"10px 0px"}},[a("span",[t._v("断开摄像机：\n            ")]),t._v(" "),a("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.cqprogress1,status:t.cqbarstate1,color:t.cqbarcolor1}})],1),t._v(" "),a("div",{staticStyle:{display:"flex",margin:"10px 0px"}},[a("span",[t._v("推流模块关闭：\n            ")]),t._v(" "),a("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.cqprogress2,status:t.cqbarstate1,color:t.cqbarcolor2}})],1),t._v(" "),a("div",[a("span",{staticStyle:{"font-size":"18px","font-weight":"500"}},[t._v("开启进度\n            ")])]),t._v(" "),a("div",{staticStyle:{display:"flex",margin:"10px 0px"}},[a("span",[t._v("摄像机接入：\n            ")]),t._v(" "),a("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.cqprogress3,status:t.cqbarstate2,color:t.cqbarcolor3}})],1),t._v(" "),a("div",{staticStyle:{display:"flex",margin:"10px 0px"}},[a("span",[t._v("推流模块开启：\n            ")]),t._v(" "),a("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.cqprogress4,status:t.cqbarstate2,color:t.cqbarcolor4}})],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{on:{click:t.successclose2}},[a("span",[t._v("关闭\n                ")])])],1)]):t._e(),t._v(" "),t.closeshow2?a("el-dialog",{attrs:{visible:t.closeshow2,"append-to-body":!0},on:{"update:visible":function(e){t.closeshow2=e}}},[a("div",{staticStyle:{width:"100%","text-align":"center"}},[a("span",[t._v("重启失败\n            ")])]),t._v(" "),a("div",[a("span",{staticStyle:{"font-size":"18px","font-weight":"500"}},[t._v("关闭进度\n            ")])]),t._v(" "),a("div",{staticStyle:{display:"flex",margin:"10px 0px"}},[a("span",[t._v("断开摄像机：\n            ")]),t._v(" "),a("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.cqprogress1,status:t.cqbarstate1,color:t.cqbarcolor1}})],1),t._v(" "),a("div",{staticStyle:{display:"flex",margin:"10px 0px"}},[a("span",[t._v("推流模块关闭：\n            ")]),t._v(" "),a("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.cqprogress2,status:t.cqbarstate1,color:t.cqbarcolor2}})],1),t._v(" "),a("div",[a("span",{staticStyle:{"font-size":"18px","font-weight":"500"}},[t._v("开启进度\n            ")])]),t._v(" "),a("div",{staticStyle:{display:"flex",margin:"10px 0px"}},[a("span",[t._v("摄像机接入：\n            ")]),t._v(" "),a("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.cqprogress3,status:t.cqbarstate2,color:t.cqbarcolor3}})],1),t._v(" "),a("div",{staticStyle:{display:"flex",margin:"10px 0px"}},[a("span",[t._v("推流模块开启：\n            ")]),t._v(" "),a("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.cqprogress4,status:t.cqbarstate2,color:t.cqbarcolor4}})],1),t._v(" "),a("div",[a("span",{staticStyle:{"font-size":"18px","font-weight":"500"}},[t._v("失败原因：\n            ")])]),t._v(" "),a("div",{staticStyle:{margin:"10px 0px"}},[a("span",{staticStyle:{"margin-left":"50px"}},[t._v(t._s(t.msg2)+"\n            ")])]),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{on:{click:t.closeclose2}},[a("span",[t._v("关闭\n                ")])])],1)]):t._e()],1)},[],!1,null,"a909beb0",null);b.options.__file="index.vue";e.default=b.exports},"8D+x":function(t,e,a){"use strict";var s=a("+FZg");a.n(s).a},"8c0w":function(t,e,a){},"D+m3":function(t,e,a){"use strict";a.r(e);var s=a("P2sY"),r=a.n(s),o={name:"accessedit",mixins:[a("y2a5").a],components:{},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){return{newAccessForm:{id:0,title:""},accessForm:{}}},mounted:function(){console.log(this.paramsObj),this.pObj=r()({},this.paramsObj),this.gcomm.mapLength(this.pObj)>0?(this.isInDialog=!0,this.accessForm=r()({},this.newAccessForm,this.pObj)):this.accessForm=r()({},this.newAccessForm,this.$route.params)},methods:{pObjChanged:function(){this.gcomm.mapLength(this.pObj)>0&&(this.isInDialog=!0,this.accessForm=r()({},this.newAccessForm,this.pObj))},submit:function(){var t=this;if(console.log(this.accessForm),this.accessForm.id>0){var e=this.accessForm;e._hy="regionup",this.callSrvAct("/act",e).then(function(e){console.log("结果",e),t.$emit("submitOk")})}else{var a={id:0,parent_id:this.paramsObj.parent_id,title:this.accessForm.title,_hy:"regionadd"};this.callSrvAct("/act",a).then(function(e){console.log("结果",e),t.$emit("submitOk")})}}},watch:{paramsObj:function(t){this.pObj.id!=this.paramsObj.id&&(this.pObj=r()({},this.paramsObj),this.pObjChanged())}},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){this.accessForm.title=""},destroyed:function(){}},i=(a("8D+x"),a("KHd+")),n=Object(i.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{attrs:{direction:"vertical"}},[a("el-form",{attrs:{model:t.accessForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"区域名称",prop:"title"}},[a("el-input",{model:{value:t.accessForm.title,callback:function(e){t.$set(t.accessForm,"title",e)},expression:"accessForm.title"}})],1)],1),t._v(" "),a("el-row",{staticStyle:{"text-align":"center"},attrs:{autogenchild:!1,childcol:24,justify:"center"}},[a("el-button",{staticStyle:{"background-color":"#0066C1"},on:{click:t.submit}},[a("span",{staticStyle:{color:"#ffffff"}},[t._v("提交\n            ")])])],1)],1)},[],!1,null,"4303b8be",null);n.options.__file="index.vue";e.default=n.exports},Hf6e:function(t,e,a){},"L+kv":function(t,e,a){"use strict";var s=a("gYcG");a.n(s).a},M2Gm:function(t,e,a){"use strict";a.r(e);var s=a("P2sY"),r=a.n(s),o=a("YEIV"),i=a.n(o),n={name:"cameraedit",mixins:[a("y2a5").a],components:{},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){var t;return t={newCameraForm:{id:0,title:"",region_title:0,url:"",resolution:"",framerate:"",codec:"",videoa:"",corp:"",pos:"",scene:"",state:"",algorithms:""},cameraForm:{}},i()(t,"newCameraForm",{id:0,title:"",region_title:"",url:"",resolution:"",framerate:"",codec:"",videoa:"",corp:"",pos:"",scene:"",state:"",algorithms:"",planview:""}),i()(t,"cameraForm",{}),i()(t,"regionArr",[]),i()(t,"pObj",{}),i()(t,"pmst",[{lable:0,value:"平面视图"},{lable:1,value:"立体视图"}]),t},mounted:function(){var t=this;this.pObj=r()({},this.paramsObj),this.gcomm.mapLength(this.pObj)>0?(this.isInDialog=!0,this.cameraForm=r()({},this.newCameraForm,this.pObj)):this.cameraForm=r()({},this.newCameraForm,this.$route.params),this.callSrvAct("/regionlist",{title:"",cp:0,rop:10}).then(function(e){console.log("区域",e),t.regionArr=e.data||[]})},methods:{pObjChanged:function(){this.gcomm.mapLength(this.pObj)>0&&(this.isInDialog=!0,this.cameraForm=r()({},this.newCameraForm,this.pObj))},handleChange:function(t){console.log(t);for(var e=0;e<this.regionArr.length;e++)this.regionArr[e].title==t&&(this.cameraForm.region_id=this.regionArr[e].id)},handleAvatarSuccess:function(t,e){this.cameraForm.url=t.data},genDownUrl:function(t){if(!t||t.length<1)return"";var e=t.split(";");return!e||e.length<2?"":this.hysrvport+"/hydownload?btnEncode=headupload&relateType=camera&filename="+e[1]+"&Authorization="+this.apiSrv.token},genUploadUrl:function(t){return this.hysrvport+"/hyupload?btnEncode=headupload&relateType=camera&fi=add&Authorization="+this.apiSrv.token},handleClick:function(){console.log("数据",this.cameraForm),this.submitOrgForm("cameraForm")},submitOrgFormImpl:function(t){var e=this,a=void 0,s=!0,o="";this[t].id>0?(a="/act",s=!1,o="cameraup"):(a="/act",o="cameraadd",this[t].state="关闭");var i=r()({},this[t]);i._hy=o,this.callSrvAct(a,i).then(function(t){e.isInDialog?(console.log("不跳转"),s?t.data&&t.data.inst?(console.log("1111111111"),e.$emit("submitOk",t.data.inst)):t.data&&(console.log("22222222222"),e.$emit("submitOk",t.data||{})):e.$emit("submitOk",i)):(console.log("跳转"),e.$router.go(-1))})},submitOrgForm:function(t){var e=this;this.$refs[t].validate(function(a){if(!a)return!1;e.submitOrgFormImpl(t)})},close:function(){this.cameraForm.url="",this.$refs.box.clearFiles()},goClick:function(){this.$emit("submitClose")}},watch:{paramsObj:function(t){this.pObj.id!=this.paramsObj.id&&(this.pObj=r()({},this.paramsObj),this.pObjChanged())}},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},c=(a("/ZXr"),a("KHd+")),l=Object(c.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{attrs:{direction:"vertical"}},[a("el-form",{ref:"cameraForm",attrs:{model:t.cameraForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"设备名称：",prop:"title",rules:{required:!0,trigger:"input"}}},[a("el-input",{attrs:{placeholder:"请输入设备名称"},model:{value:t.cameraForm.title,callback:function(e){t.$set(t.cameraForm,"title",e)},expression:"cameraForm.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"摄像机位置：",prop:""}},[a("div",[a("el-select",{attrs:{placeholder:"选择区域"},on:{change:t.handleChange},model:{value:t.cameraForm.region_title,callback:function(e){t.$set(t.cameraForm,"region_title",e)},expression:"cameraForm.region_title"}},t._l(t.regionArr,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.title}})})),t._v(" "),t._e()],1)]),t._v(" "),t._e(),t._v(" "),a("el-form-item",{attrs:{label:"分辨率：",prop:"resolution"}},[a("el-input",{attrs:{placeholder:"请输入帧率"},model:{value:t.cameraForm.resolution,callback:function(e){t.$set(t.cameraForm,"resolution",e)},expression:"cameraForm.resolution"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"帧率：",prop:"framerate"}},[a("el-input",{attrs:{placeholder:"请输入帧率"},model:{value:t.cameraForm.framerate,callback:function(e){t.$set(t.cameraForm,"framerate",e)},expression:"cameraForm.framerate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"视频编码：",prop:"codec"}},[a("el-input",{attrs:{placeholder:"请输入视频编码"},model:{value:t.cameraForm.codec,callback:function(e){t.$set(t.cameraForm,"codec",e)},expression:"cameraForm.codec"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"视频地址：",prop:"videoa",rules:{required:!0,trigger:"input"}}},[a("el-input",{attrs:{placeholder:"请输入视频地址"},model:{value:t.cameraForm.videoa,callback:function(e){t.$set(t.cameraForm,"videoa",e)},expression:"cameraForm.videoa"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"厂商：",prop:"corp",rules:{required:!0,trigger:"input"}}},[a("el-input",{model:{value:t.cameraForm.corp,callback:function(e){t.$set(t.cameraForm,"corp",e)},expression:"cameraForm.corp"}})],1),t._v(" "),t._e(),t._v(" "),t._e(),t._v(" "),t._e(),t._v(" "),t._e()],1),t._v(" "),a("el-row",{staticStyle:{"text-align":"center"},attrs:{autogenchild:!1,childcol:24,justify:"center"}},[a("el-button",{on:{click:t.goClick}},[a("span",[t._v("取消\n            ")])]),t._v(" "),a("el-button",{on:{click:t.handleClick}},[a("span",[t._v("确定\n            ")])])],1)],1)},[],!1,null,"c0021856",null);l.options.__file="index.vue";e.default=l.exports},"RU/L":function(t,e,a){a("Rqdy");var s=a("WEpk").Object;t.exports=function(t,e,a){return s.defineProperty(t,e,a)}},Rqdy:function(t,e,a){var s=a("Y7ZC");s(s.S+s.F*!a("jmDH"),"Object",{defineProperty:a("2faE").f})},Rtnw:function(t,e,a){"use strict";var s=a("ugM7");a.n(s).a},SEkw:function(t,e,a){t.exports={default:a("RU/L"),__esModule:!0}},T6TZ:function(t,e,a){"use strict";a.r(e);var s=a("P2sY"),r=a.n(s),o={name:"restartcamera",mixins:[a("y2a5").a],components:{},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){return{pObj:{},success:!1,fail:!1,progress1:0,progress2:0,progress3:0,progress4:0,barcolor1:"",barcolor2:"",barcolor3:"",barcolor4:"",closingtext1:"",closingtext2:"",startuptext1:"",startuptext2:"",barstate1:"",barstate2:""}},mounted:function(){this.pObj=r()({},this.paramsObj),console.log("传过来的",this.pObj),this.restart()},methods:{restart:function(){var t=this,e=this,a={_hy:"camerarestart",qps:[{name:"id",val:[this.pObj.id],op:"in"}]};console.log("upData:",a),this.callSrvAct("/devicerestart",a).then(function(a){console.log("后台返回值",a),"SUCCESS"==a.data[0].result?(t.count("SUCCESS",a.data),e.success=!0,e.fail=!1,e.barcolor1="green",e.barcolor2="green",e.barcolor3="green",e.barcolor4="green",t.$emit("submitOk")):"FAILD"==a.data[0].result&&(t.count("FAILD",a.data),e.success=!0,e.fail=!0,e.barcolor1="red",e.barcolor2="red",e.barcolor3="red",e.barcolor4="red")})},count:function(t,e){var a=this,s=this;s.progress1=0,s.progress2=0,this.interval=window.setInterval(function(){s.progress1+=40,s.progress2+=40,s.closingtext1="断开中",s.closingtext2="关闭中",s.progress1>=100&&s.progress2>=100&&(s.progress1=100,s.progress2=100,window.clearInterval(s.interval),console.log(t),"SUCCESS"==t?(s.barstate1="success",s.closingtext1="断开完成",s.closingtext2="关闭完成"):"FAILD"==t&&(s.barstate1="exception",s.closingtext1="断开失败",s.closingtext2="关闭失败"),a.count1(t,e))},300)},count1:function(t,e){var a=this,s=this;s.progress3=0,s.progress4=0,this.interval1=window.setInterval(function(){s.progress3+=40,s.progress4+=40,s.startuptext1="接入中",s.startuptext2="开启中",s.progress3>=100&&s.progress4>=100&&(s.progress3=100,s.progress4=100,window.clearInterval(s.interval1),console.log(t),"SUCCESS"==t?(s.barstate2="success",s.startuptext1="接入完成",s.startuptext2="开启完成",a.$emit("submitClose",{progress1:s.progress1,progress2:s.progress2,progress3:s.progress3,progress4:s.progress4,barstate1:s.barstate1,barstate2:s.barstate2,barcolor1:s.barcolor1,barcolor2:s.barcolor2,barcolor3:s.barcolor3,barcolor4:s.barcolor4,status:t})):"FAILD"==t&&(s.barstate2="exception",s.startuptext1="接入失败",s.startuptext2="开启失败",a.$emit("submitClose",{progress1:s.progress1,progress2:s.progress2,progress3:s.progress3,progress4:s.progress4,barstate1:s.barstate1,barstate2:s.barstate2,barcolor1:s.barcolor1,barcolor2:s.barcolor2,barcolor3:s.barcolor3,barcolor4:s.barcolor4,status:t,msg:e[0].msg})))},300)},colse:function(){this.$emit("submitClose")}},watch:{paramsObj:function(t){this.pObj.id!=this.paramsObj.id&&(this.pObj=r()({},this.paramsObj),this.pObjChanged())}},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){window.clearInterval(this.interval),window.clearInterval(this.interval1)},destroyed:function(){}},i=(a("hIaR"),a("KHd+")),n=Object(i.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{attrs:{direction:"vertical"}},[a("el-main",[a("div",{staticStyle:{margin:"10px 0px"}},[a("span",{staticStyle:{"font-size":"20px","font-wieght":"800"}},[t._v("关闭进度\n            ")])]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("span",[t._v("断开摄像机：\n            ")]),t._v(" "),a("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.progress1,status:t.barstate1,color:t.barcolor1}}),t._v(" "),a("span",{class:{active1:t.success,active2:t.fail}},[t._v(t._s(t.closingtext1)+"\n            ")])],1),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("span",[t._v("推流模块关闭：\n            ")]),t._v(" "),a("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.progress2,status:t.barstate1,color:t.barcolor2}}),t._v(" "),a("span",{class:{active1:t.success,active2:t.fail}},[t._v(t._s(t.closingtext2)+"\n            ")])],1),t._v(" "),a("div",{staticStyle:{margin:"10px 0px"}},[a("span",{staticStyle:{"font-size":"20px","font-wieght":"800"}},[t._v("开启进度\n            ")])]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("span",[t._v("摄像机接入：\n            ")]),t._v(" "),a("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.progress3,status:t.barstate2,color:t.barcolor3}}),t._v(" "),a("span",{class:{active1:t.success,active2:t.fail}},[t._v(t._s(t.startuptext1)+"\n            ")])],1),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("span",[t._v("推流模块开启：\n            ")]),t._v(" "),a("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.progress4,status:t.barstate2,color:t.barcolor4}}),t._v(" "),a("span",{class:{active1:t.success,active2:t.fail}},[t._v(t._s(t.startuptext2)+"\n            ")])],1),t._v(" "),a("div",{staticStyle:{margin:"10px 0px"}},[a("span",{staticStyle:{"font-size":"20px","font-wieght":"800"}},[t._v("摄像机信息\n            ")])]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("div",[a("span",[t._v("场景：\n                ")]),t._v(" "),a("span",[t._v(t._s(t.pObj.scene)+"\n                ")])]),t._v(" "),a("div",{staticStyle:{"margin-left":"200px"}},[a("span",[t._v("位置：\n                ")]),t._v(" "),a("span",[t._v(t._s(t.pObj.pos)+"\n                ")])])]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("div",[a("span",[t._v("分辨率及帧率：\n                ")]),t._v(" "),a("span",[t._v(t._s(t.pObj.resolution+" "+t.pObj.framerate)+"\n                ")])]),t._v(" "),a("div",{staticStyle:{"margin-left":"200px"}},[a("span",[t._v("视频编码：\n                ")]),t._v(" "),a("span",[t._v(t._s(t.pObj.codec)+"\n                ")])])]),t._v(" "),a("div",[a("span",[t._v("视频地址：\n            ")]),t._v(" "),a("span",[t._v(t._s(t.pObj.videoa)+"\n            ")])]),t._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{on:{click:t.colse}},[a("span",[t._v("关闭\n                ")])])],1)])],1)},[],!1,null,"6a53ea8a",null);n.options.__file="index.vue";e.default=n.exports},VZk3:function(t,e,a){"use strict";a.r(e);var s=a("P2sY"),r=a.n(s),o={name:"startcamera",mixins:[a("y2a5").a],components:{},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){return{pObj:{},success:!1,fail:!1,startuptext:"",progress:0,barcolor:"",barstate:""}},mounted:function(){this.pObj=r()({},this.paramsObj),console.log("传过来的",this.pObj),"运行中"==this.pObj.state&&(this.startuptext="启动完成",this.$refs.bar.percentage=100),this.startup()},methods:{startup:function(){var t=this,e=this,a={_hy:"cameraopen",qps:[{name:"id",val:[this.pObj.id],op:"in"}]};console.log("upData:",a),this.callSrvAct("/deviceopen",a).then(function(a){console.log("后台返回值",a),"SUCCESS"==a.data[0].result?(t.count("SUCCESS",a.data),e.success=!0,e.fail=!1,e.barcolor="green",t.$emit("submitOk")):"FAILD"==a.data[0].result&&(t.count("FAILD",a.data),e.success=!0,e.fail=!0,e.barcolor="red")})},count:function(t,e){var a=this,s=this;s.progress=0,this.interval=window.setInterval(function(){s.progress+=40,s.startuptext="启动中",s.progress>=100&&(s.progress=100,window.clearInterval(s.interval),console.log(t),"SUCCESS"==t?(s.barstate="success",s.startuptext="启动完成",a.$emit("submitClose",{progress:s.progress,barstate:s.barstate,barcolor:s.barcolor,status:t})):"FAILD"==t&&(s.barstate="exception",s.startuptext="启动失败",a.$emit("submitClose",{progress:s.progress,barstate:s.barstate,barcolor:s.barcolor,status:t,msg:e[0].msg})))},300)},colse:function(){this.$emit("submitClose",{})}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){window.clearInterval(this.interval)},destroyed:function(){}},i=(a("tOIE"),a("KHd+")),n=Object(i.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{attrs:{direction:"vertical"}},[a("el-main",[a("div",{staticStyle:{margin:"10px 0px"}},[a("span",{staticStyle:{"font-size":"20px","font-wieght":"800"}},[t._v("开启进度\n            ")])]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("span",[t._v("摄像机接入：\n            ")]),t._v(" "),a("el-progress",{ref:"bar",staticStyle:{width:"200px"},attrs:{percentage:t.progress,status:t.barstate,color:t.barcolor,id:"bar"}}),t._v(" "),a("span",{class:{active1:t.success,active2:t.fail}},[t._v(t._s(t.startuptext)+"\n            ")])],1),t._v(" "),a("div",{staticStyle:{margin:"10px 0px"}},[a("span",{staticStyle:{"font-size":"20px","font-wieght":"800"}},[t._v("摄像机信息\n            ")])]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("div",[a("span",[t._v("场景：\n                ")]),t._v(" "),a("span",[t._v(t._s(t.pObj.scene)+"\n                ")])]),t._v(" "),a("div",{staticStyle:{"margin-left":"200px"}},[a("span",[t._v("位置：\n                ")]),t._v(" "),a("span",[t._v(t._s(t.pObj.pos)+"\n                ")])])]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("div",[a("span",[t._v("分辨率及帧率：\n                ")]),t._v(" "),a("span",[t._v(t._s(t.pObj.resolution+" "+t.pObj.framerate)+"\n                ")])]),t._v(" "),a("div",{staticStyle:{"margin-left":"200px"}},[a("span",[t._v("视频编码：\n                ")]),t._v(" "),a("span",[t._v(t._s(t.pObj.codec)+"\n                ")])])]),t._v(" "),a("div",[a("span",[t._v("视频地址：\n            ")]),t._v(" "),a("span",[t._v(t._s(t.pObj.videoa)+"\n            ")])]),t._v(" "),a("div",{staticStyle:{"text-align":"right"}},[t._e(),t._v(" "),a("el-button",{on:{click:t.colse}},[a("span",[t._v("关闭\n                ")])])],1)])],1)},[],!1,null,"09bbe1b1",null);n.options.__file="index.vue";e.default=n.exports},X4av:function(t,e,a){"use strict";var s=a("zPsc");a.n(s).a},XLZo:function(t,e,a){"use strict";a.r(e);var s=a("gDS+"),r=a.n(s),o={name:"devices",mixins:[a("y2a5").a],components:{},props:{},data:function(){return{cameraData:[],cameraTotalRec:0,cameraTotalPage:0,cameraRecOfPage:10,cameraCurPage:1,cameraCbPage:this.gen_list_cb("camera"),cameraQueryArr:[],cameraQueryInit:[],cameraMultiSel:[]}},mounted:function(){var t=this,e={_hy:"camerasync",qps:[{name:"title",val:"",op:"like"}],rop:this.cameraRecOfPage,cp:this.cameraCurPage};this.callSrvAct("/devicesync",e).then(function(e){console.log("返回值",e),t.cameraData=e.data.pageData,t.cameraTotalRec=e.data.totalRec})},methods:{cameraSizeChange:function(t){var e=this,a={_hy:"camerasync",qps:[{name:"title",val:"",op:"like"}],rop:t,cp:this.cameraCurPage};this.callSrvAct("/devicesync",a).then(function(t){console.log("返回值",t),e.cameraData=t.data.pageData,e.cameraTotalRec=t.data.totalRec})},cameraCurChange:function(t){var e=this,a={_hy:"camerasync",qps:[{name:"title",val:"",op:"like"}],rop:this.cameraRecOfPage,cp:t};this.callSrvAct("/devicesync",a).then(function(t){console.log("返回值",t),e.cameraData=t.data.pageData,e.cameraTotalRec=t.data.totalRec})},handleChange:function(t){this.cameraMultiSel=t,console.log(this.cameraMultiSel)},add:function(){var t=this;console.log(this.cameraMultiSel);var e=JSON.parse(r()(this.cameraMultiSel[0]));console.log(e),"1"==e.status?e.status="运行中":"0"==e.status&&(e.status="关闭");var a={id:0,title:e.cameraName,region_id:0,region_title:e.regionPath,pos:"",resolution:"",url:"",codec:"",scene:"",framerate:"",corp:e.firmType,videoa:e.hikUrl,state:e.status,algorithms:"",algorithms_id:0,_hy:"cameraadd"};this.callSrvAct("/act",a).then(function(e){console.log("后台返回",e),t.$emit("submitOk")})}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},i=(a("X4av"),a("KHd+")),n=Object(i.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{attrs:{direction:"vertical"}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{"margin-right":"10px"}},[a("span",[t._v("设备名称\n            ")]),t._v(" "),a("el-input",{staticStyle:{width:"200px"}})],1),t._v(" "),a("div",{staticStyle:{"margin-right":"10px"}},[a("el-button",[a("span",[t._v("搜索\n                ")])])],1),t._v(" "),a("div",[a("el-button",{on:{click:t.add}},[a("span",[t._v("添加\n                ")])])],1)]),t._v(" "),a("el-table",{ref:"camera",staticStyle:{margin:"10px 0px"},attrs:{"header-cell-style":{background:"rgba(241,246,254,1)",fontWeight:"500",color:"#333333",fontSize:"16px"},id:"camera",data:t.cameraData},on:{"selection-change":t.handleChange}},[a("el-table-column",{attrs:{type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{label:"设备名称",prop:"cameraName"}})],1),t._v(" "),a("div",[a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{total:t.cameraTotalRec,"page-count":t.cameraTotalPage,layout:"total, sizes, prev, pager, next"},on:{"size-change":t.cameraSizeChange,"current-change":t.cameraCurChange}})],1)],1)},[],!1,null,"bf089996",null);n.options.__file="index.vue";e.default=n.exports},YEIV:function(t,e,a){"use strict";e.__esModule=!0;var s=function(t){return t&&t.__esModule?t:{default:t}}(a("SEkw"));e.default=function(t,e,a){return e in t?(0,s.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},bzhe:function(t,e,a){},fkTm:function(t,e,a){"use strict";a.r(e);var s=a("P2sY"),r=a.n(s),o={name:"closecamera",mixins:[a("y2a5").a],components:{},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){return{pObj:{},success:!1,fail:!1,closingtext:"",progress:0,barcolor:"",barstate:""}},mounted:function(){this.pObj=r()({},this.paramsObj),this.confirm()},methods:{confirm:function(){var t=this,e=this,a={_hy:"cameraclose",qps:[{name:"id",val:[this.pObj.id],op:"in"}]};console.log("upData:",a),this.callSrvAct("/deviceclose",a).then(function(a){console.log("后台返回值",a),"SUCCESS"==a.data[0].result?(t.count("SUCCESS",a.data),e.success=!0,e.fail=!1,e.barcolor="green",t.$emit("submitOk")):"FAILD"==a.data[0].result&&(t.count("FAILD",a.data),e.success=!0,e.fail=!0,e.barcolor="red")})},count:function(t,e){var a=this,s=this;s.progress=0,this.interval=window.setInterval(function(){s.progress+=40,s.closingtext="关闭中",s.progress>=100&&(s.progress=100,window.clearInterval(s.interval),console.log(t),"SUCCESS"==t?(s.barstate="success",s.closingtext="关闭完成",a.$emit("submitClose",{progress:s.progress,barstate:s.barstate,barcolor:s.barcolor,status:t})):"FAILD"==t&&(s.barstate="exception",s.closingtext="关闭失败",a.$emit("submitClose",{progress:s.progress,barstate:s.barstate,barcolor:s.barcolor,status:t,msg:e[0].msg})))},300)},colse:function(){this.$emit("submitClose")}},watch:{paramsObj:function(t){this.pObj.id!=this.paramsObj.id&&(this.pObj=r()({},this.paramsObj),this.pObjChanged())}},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){window.clearInterval(this.interval)},destroyed:function(){}},i=(a("L+kv"),a("KHd+")),n=Object(i.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{attrs:{direction:"vertical"}},[a("el-main",[a("div",{staticStyle:{margin:"10px 0px"}},[a("span",{staticStyle:{"font-size":"20px","font-wieght":"800"}},[t._v("关闭进度\n            ")])]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("span",[t._v("断开摄像机：\n            ")]),t._v(" "),a("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.progress,status:t.barstate,color:t.barcolor}}),t._v(" "),a("span",{class:{active1:t.success,active2:t.fail}},[t._v(t._s(t.closingtext)+"\n            ")])],1),t._v(" "),a("div",{staticStyle:{margin:"10px 0px"}},[a("span",{staticStyle:{"font-size":"20px","font-wieght":"800"}},[t._v("摄像机信息\n            ")])]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("div",[a("span",[t._v("场景：\n                ")]),t._v(" "),a("span",[t._v(t._s(t.pObj.scene)+"\n                ")])]),t._v(" "),a("div",{staticStyle:{"margin-left":"200px"}},[a("span",[t._v("位置：\n                ")]),t._v(" "),a("span",[t._v(t._s(t.pObj.pos)+"\n                ")])])]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("div",[a("span",[t._v("分辨率及帧率：\n                ")]),t._v(" "),a("span",[t._v(t._s(t.pObj.resolution+" "+t.pObj.framerate)+"\n                ")])]),t._v(" "),a("div",{staticStyle:{"margin-left":"200px"}},[a("span",[t._v("视频编码：\n                ")]),t._v(" "),a("span",[t._v(t._s(t.pObj.codec)+"\n                ")])])]),t._v(" "),a("div",[a("span",[t._v("视频地址：\n            ")]),t._v(" "),a("span",[t._v(t._s(t.pObj.videoa)+"\n            ")])]),t._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{on:{click:t.colse}},[a("span",[t._v("关闭\n                ")])])],1)])],1)},[],!1,null,"24aa6518",null);n.options.__file="index.vue";e.default=n.exports},gYcG:function(t,e,a){},hIaR:function(t,e,a){"use strict";var s=a("Hf6e");a.n(s).a},"pqQ+":function(t,e,a){"use strict";a.r(e);var s=a("P2sY"),r=a.n(s),o=a("EJiy"),i=a.n(o),n={name:"bulkimport",mixins:[a("y2a5").a],components:{},props:{},data:function(){return{importData:[],num:0,success:0,fail:0,repeat:0}},mounted:function(){},methods:{importfxx:function(t){var e=this;e.num=0,e.success=0,e.fail=0,e.repeat=0,console.log(this.$refs.upload.value),this.file=event.currentTarget.files[0],console.log(this.file);var a=this.file,s=new FileReader;FileReader.prototype.readAsBinaryString=function(t){var a,s,r="";window.console.log(this);var o=new FileReader;o.onload=function(t){window.console.log(t);for(var i=new Uint8Array(o.result),n=i.byteLength,c=0;c<n;c++)r+=String.fromCharCode(i[c]);a=XLSX.read(r,{type:"binary"}),s=XLSX.utils.sheet_to_json(a.Sheets[a.SheetNames[0]]),window.console.log("哈哈哈",s);for(var l=[],p=0;p<s.length;p++)l.push({title:s[p].摄像机名称,region_title:s[p].摄像机位置,videoa:s[p].视频地址,state:s[p].状态,algorithms:s[p].算法,resolution:s[p].分辨率,framerate:s[p].帧率,corp:s[p].厂商});window.console.log(l),e.importData=l,console.log(e.$refs.upload.value),console.log(document.getElementById("upload").value)},o.readAsArrayBuffer(t)},s.readAsBinaryString(a)},fixdata:function(t){for(var e="",a=0,s=10240;a<t.byteLength/s;++a)e+=String.fromCharCode.apply(null,new Uint8Array(t.slice(a*s,a*s+s)));return e+=String.fromCharCode.apply(null,new Uint8Array(t.slice(a*s)))},SizeChange:function(){},CurChange:function(){},exportExcel:function(){this.num=0,this.success=0,this.fail=0,this.repeat=0;var t=XLSX.utils.json_to_sheet([{"摄像机名称":"","摄像机位置":"","视频地址":"","状态":"","算法":"","分辨率":"","帧率":"","厂商":""}]);console.log(t),this.openDownloadDialog(this.sheet2blob(t),"模板教程.xlsx")},sheet2blob:function(t,e){var a={SheetNames:[e=e||"sheet1"],Sheets:{}};a.Sheets[e]=t;var s=XLSX.write(a,{bookType:"xlsx",bookSST:!1,type:"binary"});return new Blob([function(t){for(var e=new ArrayBuffer(t.length),a=new Uint8Array(e),s=0;s!=t.length;++s)a[s]=255&t.charCodeAt(s);return e}(s)],{type:"application/octet-stream"})},openDownloadDialog:function(t,e){"object"==(void 0===t?"undefined":i()(t))&&t instanceof Blob&&(t=URL.createObjectURL(t));var a,s=document.createElement("a");s.href=t,s.download=e||"",window.MouseEvent?a=new MouseEvent("click"):(a=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(a)},uploadOk:function(){var t=this;this.num=0,this.success=0,this.fail=0,this.repeat=0,this.num=this.importData.length,console.log("上传数据",this.importData);for(var e=0;e<this.importData.length;e++){this.importData[e].pos="",this.importData[e].url="",this.importData[e].scene="",this.importData[e].algorithms="",this.importData[e].codec="";var a=r()({},this.importData[e]);a._hy="cameraadd",this.callSrvAct("/act",a).then(function(e){console.log("后台返回",e),"SUCCESS"==e.status?t.success=t.success+1:"FAILED"==e.status&&(t.fail=t.fail+1)})}}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},c=(a("+Ppq"),a("KHd+")),l=Object(c.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{attrs:{direction:"vertical"}},[a("el-row",{attrs:{autogenchild:!1,childcol:24}},[a("span",[t._v("提示：需保证上传的excel文件为单一文件\n        ")])]),t._v(" "),a("div",{staticStyle:{margin:"10px 0px"}},[a("span",[t._v("请先\n        ")]),t._v(" "),a("el-button",{on:{click:t.exportExcel}},[a("span",[t._v("下载模板和教程\n            ")])]),t._v(" "),a("span",[t._v("仔细阅读后，按要求填写车辆信息，并上传摄像机信息表格\n        ")])],1),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticStyle:{display:"flex",height:"36px","line-height":"35px"}},[a("span",[t._v("上传的文件：\n            ")]),t._v(" "),a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"文件路径"}}),t._v(" "),a("el-input",{ref:"upload",attrs:{type:"file",id:"upload"},on:{change:function(e){t.importfxx(this)}}}),t._v(" "),a("el-button",{on:{click:t.uploadOk}},[a("span",[t._v("确认上传\n                ")])])],1),t._v(" "),a("div",[a("span",[t._v("上传共\n            ")]),t._v(" "),a("span",[t._v(t._s(t.num)+"\n            ")]),t._v(" "),a("span",[t._v("条  成功\n            ")]),t._v(" "),a("span",{staticStyle:{color:"green"}},[t._v(t._s(t.success)+"\n            ")]),t._v(" "),a("span",{staticStyle:{color:"green"}},[t._v("条\n            ")]),t._v(" "),a("span",[t._v("失败\n            ")]),t._v(" "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.fail)+"\n            ")]),t._v(" "),a("span",{staticStyle:{color:"red"}},[t._v("条\n            ")]),t._v(" "),a("span",[t._v("重复\n            ")]),t._v(" "),a("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.repeat)+"\n            ")]),t._v(" "),a("span",{staticStyle:{color:"blue"}},[t._v("条\n            ")])])]),t._v(" "),a("el-table",{attrs:{data:t.importData,"header-cell-style":{background:"rgba(241,246,254,1)",fontWeight:"500",color:"#333333",fontSize:"16px","text-align":"center"}}},[a("el-table-column",{attrs:{label:"设备名称",prop:"title"}}),t._v(" "),a("el-table-column",{attrs:{label:"摄像机位置",prop:"region_title"}}),t._v(" "),a("el-table-column",{attrs:{label:"视频地址",prop:"videoa"}}),t._v(" "),a("el-table-column",{attrs:{label:"分辨率",prop:"resolution"}}),t._v(" "),a("el-table-column",{attrs:{label:"帧率",prop:"framerate"}}),t._v(" "),a("el-table-column",{attrs:{label:"厂商",prop:"corp"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"state"}})],1)],1)},[],!1,null,"11394e53",null);l.options.__file="index.vue";e.default=l.exports},rI3T:function(t,e,a){},tOIE:function(t,e,a){"use strict";var s=a("bzhe");a.n(s).a},ugM7:function(t,e,a){},zPsc:function(t,e,a){}}]);