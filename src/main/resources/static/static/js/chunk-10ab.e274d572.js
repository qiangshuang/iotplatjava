(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-10ab","chunk-3608"],{CP4g:function(e,t,n){},DMxb:function(e,t,n){},"O/PY":function(e,t,n){"use strict";var i=n("DMxb");n.n(i).a},"RU/L":function(e,t,n){n("Rqdy");var i=n("WEpk").Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},Rqdy:function(e,t,n){var i=n("Y7ZC");i(i.S+i.F*!n("jmDH"),"Object",{defineProperty:n("2faE").f})},SEkw:function(e,t,n){e.exports={default:n("RU/L"),__esModule:!0}},SoS4:function(e,t,n){"use strict";n.r(t);var i=n("P2sY"),r=n.n(i),o={name:"regionedit",mixins:[n("y2a5").a],components:{},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){return{newRegionForm:{id:0,title:"",parent_id:0},regionForm:{},isInDialog:!1}},mounted:function(){this.pObj=r()({},this.paramsObj),this.gcomm.mapLength(this.pObj)>0?(this.isInDialog=!0,this.regionForm=r()({},this.newRegionForm,this.pObj)):this.regionForm=r()({},this.newRegionForm,this.$route.params),console.log("123",this.paramsObj)},methods:{pObjChanged:function(){this.gcomm.mapLength(this.pObj)>0&&(this.isInDialog=!0,this.regionForm=r()({},this.newRegionForm,this.pObj))},submit:function(){this.submitOrgForm("regionForm")},submitOrgFormImpl:function(e){var t=this,n=void 0,i=!0,o="";this[e].id>0?(n="/act",i=!1,o="regionup"):(n="/act",o="regionadd");var a=r()({},this[e]);a._hy=o,this.callSrvAct(n,a).then(function(e){t.isInDialog?(console.log("不跳转"),i?e.data&&e.data.inst?(console.log("1111111111"),t.$emit("submitOk",e.data.inst)):e.data&&(console.log("22222222222"),t.$emit("submitOk",e.data||{})):t.$emit("submitOk",a)):(console.log("跳转"),t.$router.go(-1))})},submitOrgForm:function(e){var t=this;this.$refs[e].validate(function(n){if(!n)return!1;t.submitOrgFormImpl(e)})}},watch:{paramsObj:function(e){this.pObj.id!=this.paramsObj.id&&(this.pObj=r()({},this.paramsObj),this.pObjChanged())}},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},a=(n("O/PY"),n("KHd+")),s=Object(a.a)(o,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{attrs:{direction:"vertical"}},[n("el-form",{ref:"regionForm",attrs:{model:e.regionForm,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"区域名称：",prop:"title"}},[n("el-input",{model:{value:e.regionForm.title,callback:function(t){e.$set(e.regionForm,"title",t)},expression:"regionForm.title"}})],1),e._v(" "),e._e()],1),e._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("el-button",{staticStyle:{"background-color":"#317EF3"},on:{click:e.submit}},[n("span",{staticStyle:{color:"#ffffff"}},[e._v("提交\n                ")])])],1)],1)},[],!1,null,"7909977e",null);s.options.__file="index.vue";t.default=s.exports},YEIV:function(e,t,n){"use strict";t.__esModule=!0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("SEkw"));t.default=function(e,t,n){return t in e?(0,i.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},fqDL:function(e,t,n){"use strict";var i=n("CP4g");n.n(i).a},zzde:function(e,t,n){"use strict";n.r(t);var i=n("m1cH"),r=n.n(i),o=n("gDS+"),a=n.n(o),s=n("YEIV"),l=n.n(s),c=n("SoS4"),h={name:"rmanage",mixins:[n("y2a5").a],components:l()({Regionedit:c.default},"Regionedit",c.default),props:{},data:function(){return l()({show:!1,regioneInstEdit:null,regionQueryArr:[{name:"title",val:"",op:"like"}],regionSortParas:[{name:"id",orderV:"asc"}],regioneTtData:[]},"show",!1)},mounted:function(){this.getOrgTtData(0)},methods:{search:function(){this.getOrgTtData(0)},add:function(){var e=this.$refs.regione.getCheckedKeys();!e||e.length<1?this.regioneInstEdit={id:0,title:"",parent_id:0}:this.regioneInstEdit={id:0,title:"",parent_id:e[0]},this.show=!0},del:function(){var e=this,t=this.$refs.regione.getCheckedKeys();!t||t.length<1||0!=t[0]&&this.$confirm("确认删除？此区域下的子区域将会一并删除","删除区域",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var n=[],i=e.findOrgItem(e.regioneTtData,t[0]);if(i){n.push(i.id);for(var r=[],o=(e.getChildId(i.children,r),0);o<r.length;o++)n.indexOf(r[o])<0&&n.push(r[o])}if(n&&n.length>0){var a={_hy:"regiondel",region:[{name:"id",val:n,op:"in"}]};e.callSrvAct("/act",a).then(function(t){e.$refs.regione.remove(n[0])})}}).catch(function(e){})},getChildId:function(e,t){if(!e||e.length<1)return t;for(var n=0;n<e.length;n++)t.push(e[n].id);for(var i=0;i<e.length;i++)e[i]&&e[i].children&&e[i].children.length>0&&this.getChildId(e[i].children,t);return t},delregiones:function(){var e=this,t=this.$refs.regione.getCheckedKeys();!t||t.length<1||this.$confirm("确认删除？此区域下的子区域将会一并删除","删除区域",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var n=[],i=0;i<t.length;i++)if(0!=t[0]&&n.indexOf(t[i])<0){n.push(t[i]);var r=e.findOrgItem(e.regioneTtData,t[i]);if(r)for(var o=[],a=(e.getChildId(r.children,o),0);a<o.length;a++)n.indexOf(o[a])<0&&n.push(o[a])}if(n&&n.length>0){var s={_hy:"regiondel",region:[{name:"id",val:n,op:"in"}]};e.callSrvAct("/act",s).then(function(t){for(var i=0;i<n.length;i++)e.$refs.regione.remove(n[i])})}}).catch(function(e){})},setObjInParentArr:function(e,t){for(var n=!1,i=e.length-1;i>-1;i--)if(e[i].title>t.title){var r=e[i];e.splice(i,1,t,r),n=!0;break}n||e.push(t)},rmObjFromParentArr:function(e,t){if(e&&!(e.length<1)&&t)for(var n=0;n<e.length;n++)if(e[n].id==t.id)return void e.splice(n,1)},setOrgItem:function(e,t){var n=this.findOrgItem(e,t.id);if(n)if(n.parent_id>0){var i=this.findOrgItem(this.regioneTtData,n.parent_id);i&&(this.rmObjFromParentArr(i.children,n),i.hy_extra_num=i.children.length+1,i.isLeaf=i.hy_extra_num>1)}else this.rmObjFromParentArr(this.regioneTtData,n);if(t.parent_id<1)this.regioneTtData.push(t);else{var r=this.findOrgItem(this.regioneTtData,t.parent_id);r&&(r.children||(r.children=[]),this.setObjInParentArr(r.children,t),r.hy_extra_num=r.children.length+1,r.isLeaf=r.hy_extra_num>1)}},regioneditOK:function(e,t){this.setOrgItem(this.regioneTtData,e),this.regioneInstEdit={},this.show=!1},regioneditSet:function(){},up:function(){var e=this.$refs.regione.getCheckedKeys();if(e&&!(e.length<1)){var t=this.findOrgItem(this.regioneTtData,e[0]);t&&(this.regioneInstEdit=JSON.parse(a()(t)),this.show=!0)}},close:function(){this.show=!1},clickTreeItem:function(e,t){var n=this.$refs.regione.getCheckedKeys();n&&n.indexOf(e.id)>-1?this.$refs.regione.setChecked(e.id,!1,!1):this.$refs.regione.setChecked(e.id,!0,!1),console.log("node:",e);var i=this.findOrgItem(this.regioneTtData,e.id);i&&(i.hy_extra_num=1,i.children=[],this.getOrgTtData(e.id,t))},regioneTreeCheck:function(e,t){if(e.hy_extra_num>1&&(!e.children||e.children.length<1)){var n=this.$refs.regione.getNode(e.id);n&&this.getOrgTtData(e.id,n)}},getOrgTtData:function(e,t){var n=this,i=JSON.parse(a()(this.regionQueryArr));e>0&&i.push({name:"parent_id",val:e});var r={_hy:"regiontt",qps:i,sps:this.regionSortParas};this.callSrvAct("/actq",r).then(function(i){for(var r=i.data||[],o=0;o<r.length;o++)r[o].isLeaf=r[o].hy_extra_num>1,r[o].children=[];n.appendData(e,r),t&&(t.expanded=!0)})},findOrgItem:function(e,t){if(!e||e.length<1)return null;for(var n=0;n<e.length;n++)if(console.log("arr,",n,e[n].id,t,e[n].id==t),e[n].id==t)return e[n];for(var i=0;i<e.length;i++)if(e[i].children&&e[i].children.length>0){var r=this.findOrgItem(e[i].children,t);if(r)return r}return null},appendData:function(e,t){if(e<1){var n;t&&t.length>0&&(n=this.regioneTtData).push.apply(n,r()(t))}else{var i=this.findOrgItem(this.regioneTtData,e);i&&(i.children=t||[],i.hy_extra_num=i.children.length+1)}}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},d=(n("fqDL"),n("KHd+")),u=Object(d.a)(h,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{attrs:{direction:"vertical"}},[n("div",{staticStyle:{display:"flex",height:"40px","line-height":"40px"}},[e._e(),e._v(" "),n("el-input",{staticStyle:{margin:"0px 10px",width:"250px"},attrs:{placeholder:"区域名称"},model:{value:e.regionQueryArr[0].val,callback:function(t){e.$set(e.regionQueryArr[0],"val",t)},expression:"regionQueryArr[0].val"}}),e._v(" "),n("el-button",{on:{click:e.search}},[n("span",[e._v("搜索\n            ")])]),e._v(" "),n("el-button",{on:{click:e.add}},[n("span",[e._v("新增\n            ")])]),e._v(" "),n("el-button",{on:{click:e.up}},[n("span",[e._v("修改\n            ")])]),e._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:e.del}},[n("span",[e._v("删除\n            ")])]),e._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:e.delregiones}},[n("span",[e._v("批量删除\n            ")])])],1),e._v(" "),n("el-main",{staticStyle:{padding:"0px",margin:"0px"}},[n("el-tree",{ref:"regione",staticStyle:{"margin-top":"10px"},attrs:{"node-key":"id",props:{label:"title",disabled:!1,isLeaf:!0,children:"children"},"highlight-current":!0,"default-expand-all":!0,"show-checkbox":!0,"check-strictly":!0,data:e.regioneTtData},on:{click:e.regioneTreeCheck,"node-click":e.clickTreeItem}})],1),e._v(" "),n("el-dialog",{attrs:{visible:e.show,title:"区域编辑","append-to-body":!0,close:e.close},on:{"update:visible":function(t){e.show=t}}},[n("regionedit",{attrs:{paramsObj:e.regioneInstEdit},on:{submitOk:e.regioneditOK,submitClose:e.regioneditSet}})],1)],1)},[],!1,null,"2d0321fa",null);u.options.__file="index.vue";t.default=u.exports}}]);