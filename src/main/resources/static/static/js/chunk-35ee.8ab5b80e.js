(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-35ee","chunk-1e9e"],{"9rTL":function(e,t,i){"use strict";var n=i("Zzo8");i.n(n).a},"RU/L":function(e,t,i){i("Rqdy");var n=i("WEpk").Object;e.exports=function(e,t,i){return n.defineProperty(e,t,i)}},Rqdy:function(e,t,i){var n=i("Y7ZC");n(n.S+n.F*!i("jmDH"),"Object",{defineProperty:i("2faE").f})},SEkw:function(e,t,i){e.exports={default:i("RU/L"),__esModule:!0}},YEIV:function(e,t,i){"use strict";t.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(i("SEkw"));t.default=function(e,t,i){return t in e?(0,n.default)(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},Zzo8:function(e,t,i){},g8JM:function(e,t,i){"use strict";i.r(t);var n=i("P2sY"),a=i.n(n),r={name:"",mixins:[i("y2a5").a],components:{},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){return{newAccessForm:{id:0,title:""},accessForm:{}}},mounted:function(){this.pObj=a()({},this.paramsObj),this.gcomm.mapLength(this.pObj)>0?(this.isInDialog=!0,this.accessForm=a()({},this.newAccessForm,this.pObj)):this.accessForm=a()({},this.newAccessForm,this.$route.params)},methods:{pObjChanged:function(){this.gcomm.mapLength(this.pObj)>0&&(this.isInDialog=!0,this.accessForm=a()({},this.newAccessForm,this.pObj))},submit:function(){var e=this;if(console.log("大撒大",this.accessForm),this.accessForm.id>0){console.log("大",this.accessForm);var t=this.accessForm;t._hy="regionup",this.callSrvAct("/act",t).then(function(t){console.log("结果",t),e.$emit("submitOk")})}else{var i={id:0,parent_id:this.paramsObj.parent_id,title:this.accessForm.title};console.log("小",this.accessForm),i._hy="regionadd",this.callSrvAct("/act",i).then(function(t){console.log("结果",t),e.$emit("submitOk")})}}},watch:{paramsObj:function(e){this.pObj.id!=this.paramsObj.id&&(this.pObj=a()({},this.paramsObj),this.pObjChanged())}},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},o=(i("o4CT"),i("KHd+")),l=Object(o.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",{attrs:{direction:"vertical"}},[i("el-form",{attrs:{model:e.accessForm}},[i("el-form-item",{attrs:{label:"区域名称",prop:"title",rules:{required:!0,trigger:"input"}}},[i("el-input",{model:{value:e.accessForm.title,callback:function(t){e.$set(e.accessForm,"title",t)},expression:"accessForm.title"}})],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[i("span",[e._v("确定\n            ")])])],1)],1)},[],!1,null,"83a47b4e",null);l.options.__file="index.vue";t.default=l.exports},gTKV:function(e,t,i){},o4CT:function(e,t,i){"use strict";var n=i("gTKV");i.n(n).a},v190:function(e,t,i){"use strict";i.r(t);var n=i("gDS+"),a=i.n(n),r=i("YEIV"),o=i.n(r),l=i("g8JM"),s={name:"equi",mixins:[i("y2a5").a],components:{Aredit:l.default},props:{},data:function(){var e;return e={equData:[],equTotalRec:0,equTotalPage:0,equRecOfPage:10,equCurPage:1,equCbPage:this.gen_list_cb("equ"),equQueryArr:[{name:"titel",val:"",op:"like",tb:"sensor"},{name:"category_id",val:"",tb:"sensor"},{name:"stream_id",val:"",tb:"sensor"},{name:"region_id",val:"",tb:"sensor"}],equQueryInit:[{name:"titel",val:"",op:"like",tb:"sensor"},{name:"category_id",val:"",tb:"sensor"},{name:"stream_id",val:"",tb:"sensor"},{name:"region_id",val:"",tb:"sensor"}],equMultiSel:[],equSortParas:[{name:"id",tb:"sensor",orderV:"desc"}],show:!1,equEdit:null,show1:!1,eqEdit:null},o()(e,"equQueryArr",[{name:"titel",val:"",op:"like",tb:"sensor"},{name:"category_id",val:"",tb:"sensor"},{name:"stream_id",val:"",tb:"sensor"},{name:"region_id",val:"",tb:"sensor"}]),o()(e,"equQueryInit",[{name:"titel",val:"",op:"like",tb:"sensor"},{name:"category_id",val:"",tb:"sensor"},{name:"stream_id",val:"",tb:"sensor"},{name:"region_id",val:"",tb:"sensor"}]),o()(e,"ascending",{prop:"title",order:"ascending"}),o()(e,"selectData",[]),o()(e,"title",""),o()(e,"regioneTitle",""),o()(e,"regioneTtData",[]),o()(e,"regioneTtList",[]),o()(e,"regioneIndexCode",""),o()(e,"regioneId",0),o()(e,"regioneData",{}),o()(e,"arrID",[]),o()(e,"equArr",[{value:"",label:"全部"},{value:"温度传感器",label:"温度传感器"},{value:"振动传感器",label:"振动传感器"},{value:"粉尘传感器",label:"粉尘传感器"},{value:"气体传感器",label:"气体传感器"},{value:"噪声传感器",label:"噪声传感器"}]),o()(e,"stateArr",[{value:"",label:"全部"},{value:"在线",label:"在线"},{value:"离线",label:"离线"}]),o()(e,"tableHeight",window.innerHeight-150),e},mounted:function(){var e=this;this.refreshPage("equ","/actq","equlist"),this.callSrvAct("/regionlist",{title:"",cp:0,rop:10}).then(function(t){console.log("区域",t),e.regioneTtList=t.data||[];for(var i=t.data||[],n=[],a=0;a<i.length;a++)i[a].isLeaf=!0,i[a].children=[],0==i[a].parent_id&&n.push(i[a]);e.regioneTtData=n})},methods:{equMultiSelChange:function(e){this.equMultiSel=e},equQuery:function(){this.refreshPage2("equ","/actq",this.remoteRecOfPage,1,"equlist")},equResetQuery:function(){this.equQueryArr=JSON.parse(a()(this.equQueryInit))},equSizeChange:function(e){this.refreshPage2("equ","/actq",e,this.equCurPage,"equlist")},equCurChange:function(e){this.refreshPage2("equ","/actq",this.equRecOfPage,e,"equlist")},treeClick:function(e,t,i){console.log("数据",e,t,i),this.regioneData=e,0==e.parent_id?(this.regioneIndexCode="",this.regioneId=0):(this.regioneIndexCode=e.indexCode,this.regioneId=e.id);for(var n=0;n<this.regioneTtList.length;n++)e.id==this.regioneTtList[n].parent_id&&e.children.push(this.regioneTtList[n]);this.$refs.regione.updateKeyChildren(e.id,e.children),console.log("dasda",this.equQueryArr),this.equQueryArr[3].val=this.regioneId,this.refreshPage("equ","/actq","equlist")},eqClose:function(){this.show1=!1},eqOk:function(){var e=this;this.showUp=!1,this.callSrvAct("/regionlist",{title:"",cp:0,rop:10}).then(function(t){console.log("区域",t),e.regioneTtList=t.data||[];for(var i=t.data||[],n=[],a=0;a<i.length;a++)i[a].isLeaf=!0,i[a].children=[],0==i[a].parent_id&&n.push(i[a]);e.regioneTtData[0].children=n})},equClose:function(){this.show=!1},handleShow:function(){this.equEdit={id:0,title:"",parent_id:this.regioneData.id},console.log(this.regioneData),this.show=!0},equOk:function(){var e=this;this.show=!1,this.callSrvAct("/regionlist",{title:"",cp:0,rop:10}).then(function(t){console.log("区域",t),e.regioneTtList=t.data||[];for(var i=t.data||[],n=[],a=0;a<i.length;a++)i[a].isLeaf=!0,i[a].children=[],0==i[a].parent_id&&n.push(i[a]);e.regioneTtData[0].children=n})},search:function(){this.refreshPage("equ","/actq","equlist")},handleClick:function(e){var t,i=e;console.log("查看数据",i),t=JSON.parse(a()(i)),console.log("传递数据",t),this.$router.push({name:"seedetail",params:t})},handleEdit:function(e,t){console.log("aaa",t.name);var i;i=JSON.parse(a()(t)),this.$router.push({name:"addequ",params:i})},show3:function(){var e=this;console.log("多选ID",this.equMultiSel);var t=this;this.$confirm("此操作将删除该项数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var i={_hy:"equdel",sensor:[{name:"id",val:t.equMultiSel,op:"in"}]};console.log("upData:",i),e.callSrvAct("/act",i).then(function(t){e.refreshPage("equ","/actq","equlist")})}).catch(function(t){e.$message.error(t)})},handleChange:function(e){console.log("hahaha",e);for(var t=[],i=0;i<e.length;i++)t.push(e[i].id);this.equMultiSel=t,this.dataArr=e,console.log("qqq",e)},handleDel:function(e,t){var i=this,n=t;this.$confirm("此操作将删除该项数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={_hy:"equdel",sensor:[{name:"id",val:[n.id],op:"in"}]};console.log("upData:",e),i.callSrvAct("/act",e).then(function(e){i.refreshPage("equ","/actq","equlist")})}).catch(function(e){i.$message.error(e)})},add:function(){this.$router.push({name:"addequ",params:null})},handleShow2:function(){this.eqEdit=this.regioneData,this.show1=!0},regioneChange:function(){var e=this;this.callSrvAct("/regionlist",{title:this.regioneTitle,cp:0,rop:10}).then(function(t){console.log("区域",t),e.regioneTtList=t.data||[];var i=t.data||[],n=[];if(""==e.regioneTitle)for(var a=0;a<i.length;a++)i[a].isLeaf=!0,i[a].children=[],0==i[a].parent_id&&n.push(i[a]);else for(var r=0;r<i.length;r++)i[r].isLeaf=!0,i[r].children=[],n.push(i[r]);e.regioneTtData[0].children=n})},childID:function(e,t){for(var i=0;i<this.regioneTtList.length;i++)e.id==this.regioneTtList[i].parent_id&&(this.arrID.push(this.regioneTtList[i].id),this.childID(this.regioneTtList[i],this.regioneTtList));return this.arrID},delss:function(){var e=this;this.arrID=[],this.regioneData.children.length>0?(this.arrID=this.childID(this.regioneData,this.regioneTtList),this.arrID.push(this.regioneData.id)):this.arrID=[this.regioneData.id],console.log("2222222222222222",this.arrID),this.childID(this.regioneData),this.$confirm("确认删除？此区域下的子区域将会一并删除","删除区域",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={_hy:"regiondel",region:[{name:"id",val:e.arrID,op:"in"}]};e.callSrvAct("/act",t).then(function(t){e.callSrvAct("/regionlist",{title:"",cp:0,rop:10}).then(function(t){console.log("区域",t),e.regioneTtList=t.data||[],e.acccontrolTotalRec=t.data.totalRec;for(var i=t.data||[],n=[],a=0;a<i.length;a++)i[a].isLeaf=!0,i[a].children=[],0==i[a].parent_id&&n.push(i[a]);e.regioneTtData[0].children=n})})}).catch(function(e){})}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},c=(i("9rTL"),i("KHd+")),u=Object(c.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",{attrs:{direction:"horizontal"}},[i("el-aside",{staticStyle:{"border-right":"1px solid #D7D7D7"}},[i("div",{staticStyle:{display:"flex","justify-content":"space-around",width:"100%"}},[i("span",{staticStyle:{display:"block","font-size":"24px","font-weight":"800"},on:{click:e.handleShow}},[i("i",{staticClass:"el-icon-plus"})]),e._v(" "),i("span",{staticStyle:{display:"block","font-size":"24px","font-weight":"800"},on:{click:e.handleShow2}},[i("i",{staticClass:"el-icon-edit"})]),e._v(" "),i("span",{staticStyle:{display:"block","font-size":"24px","font-weight":"800"},on:{click:e.delss}},[i("i",{staticClass:"el-icon-delete"})])]),e._v(" "),i("el-input",{attrs:{placeholder:"搜索区域名称"},on:{blur:e.regioneChange},model:{value:e.regioneTitle,callback:function(t){e.regioneTitle=t},expression:"regioneTitle"}}),e._v(" "),i("el-tree",{ref:"regione",attrs:{"node-key":"id",props:{label:"title",disabled:!1,isLeaf:!0,children:"children"},"highlight-current":!0,"default-expand-all":!0,id:"regione",data:e.regioneTtData},on:{"node-click":e.treeClick}})],1),e._v(" "),i("el-main",[i("div",{staticStyle:{display:"flex"}},[i("div",[i("span",[e._v("设备名称\n                ")]),e._v(" "),i("el-input",{staticStyle:{width:"150px"},model:{value:e.equQueryArr[0].val,callback:function(t){e.$set(e.equQueryArr[0],"val",t)},expression:"equQueryArr[0].val"}})],1),e._v(" "),i("div",{staticStyle:{"margin-left":"6px"}},[i("span",[e._v("设备类型\n                ")]),e._v(" "),i("el-select",{staticStyle:{width:"150px"},model:{value:e.equQueryArr[1].val,callback:function(t){e.$set(e.equQueryArr[1],"val",t)},expression:"equQueryArr[1].val"}},e._l(e.equArr,function(e,t){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("div",{staticStyle:{"margin-left":"6px"}},[i("span",[e._v("状态\n                ")]),e._v(" "),i("el-select",{staticStyle:{width:"150px"},model:{value:e.equQueryArr[2].val,callback:function(t){e.$set(e.equQueryArr[2],"val",t)},expression:"equQueryArr[2].val"}},e._l(e.stateArr,function(e,t){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.search}},[i("span",[e._v("查询\n                ")])])],1),e._v(" "),i("div",{staticStyle:{"margin-top":"30px"}},[i("el-button",{on:{click:e.add}},[i("span",[e._v("新增\n                ")])]),e._v(" "),i("el-button",{attrs:{type:"danger"},on:{click:e.show3}},[i("span",[e._v("批量删除\n                ")])])],1),e._v(" "),i("el-table",{ref:"equ",staticStyle:{"margin-top":"20px"},attrs:{border:!0,height:e.tableHeight,"header-cell-style":{background:"#E6F4FF",fontWeight:"500",color:"#0A51C4",borderBottom:"2px solid #4093F7"},data:e.equData},on:{"selection-change":e.handleChange}},[i("el-table-column",{attrs:{label:"全选",prop:"全选",type:"selection"}}),e._v(" "),i("el-table-column",{attrs:{label:"设备名称",prop:"titel"}}),e._v(" "),i("el-table-column",{attrs:{label:"区域",prop:"region_title"}}),e._v(" "),i("el-table-column",{attrs:{label:"设备类型",prop:"category_id"}}),e._v(" "),i("el-table-column",{attrs:{label:"厂商",prop:"firm_id"}}),e._v(" "),i("el-table-column",{attrs:{label:"最近在线时间",prop:"最近在线时间"}}),e._v(" "),i("el-table-column",{attrs:{label:"状态",prop:"状态"}}),e._v(" "),i("el-table-column",{attrs:{label:"IP地址",prop:"ipandport"}}),e._v(" "),i("el-table-column",{attrs:{label:"数据流名称",prop:"stream_title"}}),e._v(" "),e._e(),e._v(" "),i("el-table-column",{attrs:{label:"操作",prop:"操作","min-width":"250px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{"margin-top":"10px"}},[i("el-button",{attrs:{size:"mini"},on:{click:function(i){e.handleClick(t.row)}}},[i("span",[e._v("查看\n                            ")])]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){e.handleEdit(t.$index,t.row)}}},[i("span",[e._v("编辑\n                            ")])]),e._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){e.handleDel(t.$index,t.row)}}},[i("span",[e._v("删除\n                            ")])])],1)]}}])})],1),e._v(" "),i("el-pagination",{staticStyle:{"text-align":"center"},attrs:{total:e.equTotalRec,"page-count":e.equTotalPage,layout:"total, sizes, prev, pager, next"},on:{"size-change":e.equSizeChange,"current-change":e.equCurChange}})],1),e._v(" "),i("el-dialog",{attrs:{visible:e.show,title:"添加区域"},on:{"update:visible":function(t){e.show=t}}},[i("aredit",{attrs:{paramsObj:e.equEdit},on:{submitOk:e.equOk,submitClose:e.equClose}})],1),e._v(" "),i("el-dialog",{attrs:{visible:e.show1,title:"区域部门"},on:{"update:visible":function(t){e.show1=t}}},[i("aredit",{attrs:{paramsObj:e.eqEdit},on:{submitOk:e.eqOk,submitClose:e.eqClose}})],1)],1)},[],!1,null,"10aa1f62",null);u.options.__file="index.vue";t.default=u.exports}}]);