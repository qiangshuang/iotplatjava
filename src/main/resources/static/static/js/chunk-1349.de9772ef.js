(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1349","chunk-4140"],{"/gyC":function(a,e,r){},"3fND":function(a,e,r){"use strict";r.r(e);var t=r("P2sY"),l=r.n(t),n=r("YEIV"),o=r.n(n),i={name:"alarmd",mixins:[r("y2a5").a],components:{},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){var a;return{newAlarmForm:(a={id:0},o()(a,"id",""),o()(a,"sensor_id",""),o()(a,"sensor_title",""),o()(a,"region_id",""),o()(a,"region_title",""),o()(a,"sensor_categary",""),o()(a,"dataval",""),o()(a,"standardval",""),o()(a,"grade",""),o()(a,"alarmtiem",""),o()(a,"state",""),o()(a,"created",""),o()(a,"updated",""),a),alarmForm:{}}},mounted:function(){this.pObj=l()({},this.paramsObj),this.gcomm.mapLength(this.pObj)>0?(this.isInDialog=!0,this.alarmForm=l()({},this.newAlarmForm,this.pObj)):this.alarmForm=l()({},this.newAlarmForm,this.$route.params)},methods:{pObjChanged:function(){this.gcomm.mapLength(this.pObj)>0&&(this.isInDialog=!0,this.alarmForm=l()({},this.newAlarmForm,this.pObj))}},watch:{paramsObj:function(a){this.pObj.id!=this.paramsObj.id&&(this.pObj=l()({},this.paramsObj),this.pObjChanged())}},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},s=(r("3pPW"),r("KHd+")),m=Object(s.a)(i,function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("el-container",{attrs:{direction:"vertical"}},[r("el-form",{ref:"alarm",attrs:{model:a.alarmForm,"label-position":"left","label-width":"100px"}},[r("el-form-item",{attrs:{label:"主键id",prop:"id",rules:{required:!0,max:1e11}}},[r("el-input",{model:{value:a.alarmForm.id,callback:function(e){a.$set(a.alarmForm,"id",e)},expression:"alarmForm.id"}})],1),a._v(" "),r("el-form-item",{attrs:{label:"传感器id",prop:"sensor_id",rules:{required:!0,max:1e11}}},[r("el-input",{model:{value:a.alarmForm.sensor_id,callback:function(e){a.$set(a.alarmForm,"sensor_id",e)},expression:"alarmForm.sensor_id"}})],1),a._v(" "),r("el-form-item",{attrs:{label:"传感器名称",prop:"sensor_title",rules:{required:!0,max:200}}},[r("el-input",{model:{value:a.alarmForm.sensor_title,callback:function(e){a.$set(a.alarmForm,"sensor_title",e)},expression:"alarmForm.sensor_title"}})],1),a._v(" "),r("el-form-item",{attrs:{label:"区域id",prop:"region_id",rules:{required:!0,max:1e11}}},[r("el-input",{model:{value:a.alarmForm.region_id,callback:function(e){a.$set(a.alarmForm,"region_id",e)},expression:"alarmForm.region_id"}})],1),a._v(" "),r("el-form-item",{attrs:{label:"区域名称",prop:"region_title",rules:{required:!0,max:200}}},[r("el-input",{model:{value:a.alarmForm.region_title,callback:function(e){a.$set(a.alarmForm,"region_title",e)},expression:"alarmForm.region_title"}})],1),a._v(" "),r("el-form-item",{attrs:{label:"传感器类型",prop:"sensor_categary",rules:{required:!0,max:200}}},[r("el-input",{model:{value:a.alarmForm.sensor_categary,callback:function(e){a.$set(a.alarmForm,"sensor_categary",e)},expression:"alarmForm.sensor_categary"}})],1),a._v(" "),r("el-form-item",{attrs:{label:"数据值",prop:"dataval",rules:{required:!0,max:200}}},[r("el-input",{model:{value:a.alarmForm.dataval,callback:function(e){a.$set(a.alarmForm,"dataval",e)},expression:"alarmForm.dataval"}})],1),a._v(" "),r("el-form-item",{attrs:{label:"标准值",prop:"standardval",rules:{required:!0,max:200}}},[r("el-input",{model:{value:a.alarmForm.standardval,callback:function(e){a.$set(a.alarmForm,"standardval",e)},expression:"alarmForm.standardval"}})],1),a._v(" "),r("el-form-item",{attrs:{label:"预警等级",prop:"grade",rules:{required:!0,max:200}}},[r("el-input",{model:{value:a.alarmForm.grade,callback:function(e){a.$set(a.alarmForm,"grade",e)},expression:"alarmForm.grade"}})],1),a._v(" "),r("el-form-item",{attrs:{label:"预警时间",prop:"alarmtiem",rules:{required:!0,max:1e11}}},[r("el-input",{model:{value:a.alarmForm.alarmtiem,callback:function(e){a.$set(a.alarmForm,"alarmtiem",e)},expression:"alarmForm.alarmtiem"}})],1),a._v(" "),r("el-form-item",{attrs:{label:"状态（未确认，已确认）",prop:"state",rules:{required:!0,max:20}}},[r("el-input",{model:{value:a.alarmForm.state,callback:function(e){a.$set(a.alarmForm,"state",e)},expression:"alarmForm.state"}})],1),a._v(" "),r("el-form-item",{attrs:{label:"创建时间",prop:"created",rules:{required:!0,max:1e11}}},[r("el-input",{model:{value:a.alarmForm.created,callback:function(e){a.$set(a.alarmForm,"created",e)},expression:"alarmForm.created"}})],1),a._v(" "),r("el-form-item",{attrs:{label:"修改时间",prop:"updated",rules:{required:!0,max:1e11}}},[r("el-input",{model:{value:a.alarmForm.updated,callback:function(e){a.$set(a.alarmForm,"updated",e)},expression:"alarmForm.updated"}})],1)],1)],1)},[],!1,null,"36527fc0",null);m.options.__file="index.vue";e.default=m.exports},"3pPW":function(a,e,r){"use strict";var t=r("/gyC");r.n(t).a},H1AG:function(a,e,r){},"RU/L":function(a,e,r){r("Rqdy");var t=r("WEpk").Object;a.exports=function(a,e,r){return t.defineProperty(a,e,r)}},Rqdy:function(a,e,r){var t=r("Y7ZC");t(t.S+t.F*!r("jmDH"),"Object",{defineProperty:r("2faE").f})},SEkw:function(a,e,r){a.exports={default:r("RU/L"),__esModule:!0}},YEIV:function(a,e,r){"use strict";e.__esModule=!0;var t=function(a){return a&&a.__esModule?a:{default:a}}(r("SEkw"));e.default=function(a,e,r){return e in a?(0,t.default)(a,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[e]=r,a}},ZTNO:function(a,e,r){"use strict";var t=r("H1AG");r.n(t).a},qdjv:function(a,e,r){"use strict";r.r(e);var t=r("gDS+"),l=r.n(t),n=r("3fND"),o={name:"wainf",mixins:[r("y2a5").a],components:{Alarmd:n.default},props:{},data:function(){return{alarmData:[],alarmTotalRec:0,alarmTotalPage:0,alarmRecOfPage:10,alarmCurPage:1,alarmCbPage:this.gen_list_cb("alarm"),alarmQueryArr:[{name:"sensor_title",val:"",op:"like",tb:"sensor_alarm"},{name:"region_title",val:"",tb:"sensor_alarm"},{name:"state",val:"",tb:"sensor_alarm"},{name:"alarmtiem",val:0,op:">=",tb:"sensor_alarm"},{name:"alarmtiem",val:0,op:"<=",tb:"sensor_alarm"}],alarmQueryInit:[{name:"sensor_title",val:"",op:"like",tb:"sensor_alarm"},{name:"region_title",val:"",tb:"sensor_alarm"},{name:"state",val:"",tb:"sensor_alarm"},{name:"alarmtiem",val:0,op:">=",tb:"sensor_alarm"},{name:"alarmtiem",val:0,op:"<=",tb:"sensor_alarm"}],alarmMultiSel:[],alarmShowDetail:!1,alarmShowInst:null,tableHeight:window.innerHeight-500}},mounted:function(){this.refreshPage("alarm","/actq","sensoralarmlist")},methods:{alarmMultiSelChange:function(a){this.alarmMultiSel=a},alarmQuery:function(){this.refreshPage2("alarm","/actq",this.remoteRecOfPage,1,"sensoralarmlist")},alarmResetQuery:function(){this.alarmQueryArr=JSON.parse(l()(this.alarmQueryInit))},alarmSizeChange:function(a){this.refreshPage2("alarm","/actq",a,this.alarmCurPage,"sensoralarmlist")},alarmCurChange:function(a){this.refreshPage2("alarm","/actq",this.alarmRecOfPage,a,"sensoralarmlist")},search:function(){this.refreshPage("alarm","/actq","sensoralarmlist")},multiEnd:function(){var a=this,e=[];console.log("alarmMultiSel:",this.alarmMultiSel);for(var r=0;r<this.alarmMultiSel.length;r++)e.push(this.alarmMultiSel[r].id);this.$confirm("此操作将结束多项告警, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var r={_hy:"sensoralarmup",state:"已处理",qps:[{name:"id",val:e,op:"in"}]};console.log("upData:",r),a.callSrvAct("/act",r).then(function(e){a.refreshPage("alarm","/actq","sensoralarmlist")})}).catch(function(e){a.$message.error(e)})},rowAlarmEnd:function(a,e){var r=this;this.$confirm("此操作将结束告警, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={_hy:"sensoralarmup",state:"已处理",qps:[{name:"id",val:e.id,op:"="}]};r.callSrvAct("/act",a).then(function(a){r.refreshPage("alarm","/actq","sensoralarmlist")})}).catch(function(a){r.$message.error(a)})},rowDetailEnd:function(a,e){this.alarmShowDetail=!0,this.alarmShowInst=e}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},i=(r("ZTNO"),r("KHd+")),s=Object(i.a)(o,function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("el-container",{staticStyle:{height:"100%"},attrs:{direction:"vertical"}},[r("div",[r("el-row",[r("el-col",{attrs:{span:8}},[r("span",[a._v("设备名称\n                ")]),a._v(" "),r("el-input",{staticStyle:{width:"260px","margin-left":"10px"},model:{value:a.alarmQueryArr[0].val,callback:function(e){a.$set(a.alarmQueryArr[0],"val",e)},expression:"alarmQueryArr[0].val"}})],1),a._v(" "),r("el-col",{attrs:{span:8}},[r("span",{staticStyle:{"margin-left":"30px"}},[a._v("预警位置\n                ")]),a._v(" "),r("el-select",{staticStyle:{"margin-left":"10px"},model:{value:a.alarmQueryArr[1].val,callback:function(e){a.$set(a.alarmQueryArr[1],"val",e)},expression:"alarmQueryArr[1].val"}})],1),a._v(" "),r("el-col",{attrs:{span:8}},[r("span",{staticStyle:{"margin-left":"30px"}},[a._v("预警状态\n                ")]),a._v(" "),r("el-select",{staticStyle:{"margin-left":"10px"},model:{value:a.alarmQueryArr[2].val,callback:function(e){a.$set(a.alarmQueryArr[2],"val",e)},expression:"alarmQueryArr[2].val"}})],1)],1)],1),a._v(" "),r("div",{staticStyle:{"margin-top":"20px"}},[r("span",[a._v("时间范围\n        ")]),a._v(" "),r("el-date-picker",{staticStyle:{"margin-left":"10px"},attrs:{"value-format":"timestamp",editable:!1,clearable:!1,"start-placeholder":"选择起使时间","end-placeholder":"选择截止时间",type:"datetime","range-separator":""},model:{value:a.alarmQueryArr[3].val,callback:function(e){a.$set(a.alarmQueryArr[3],"val",e)},expression:"alarmQueryArr[3].val"}}),a._v(" "),r("el-date-picker",{staticStyle:{"margin-left":"10px"},attrs:{"value-format":"timestamp",editable:!1,clearable:!1,"start-placeholder":"选择起使时间","end-placeholder":"选择截止时间",type:"datetime","range-separator":""},model:{value:a.alarmQueryArr[4].val,callback:function(e){a.$set(a.alarmQueryArr[4],"val",e)},expression:"alarmQueryArr[4].val"}}),a._v(" "),r("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"}},[r("span",[a._v("查询\n            ")])]),a._v(" "),r("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"danger"},on:{click:function(e){a.multiEnd()}}},[r("span",[a._v("批量结束\n            ")])])],1),a._v(" "),r("el-table",{ref:"alarm",staticStyle:{"margin-top":"10px"},attrs:{stripe:!0,border:!0,height:a.tableHeight,"header-cell-style":{background:"#E6F4FF",fontWeight:"500",color:"#0A51C4",borderBottom:"2px solid #4093F7"},data:a.alarmData},on:{"selection-change":a.alarmMultiSelChange}},[r("el-table-column",{attrs:{label:"全选",prop:"全选",type:"selection"}}),a._v(" "),r("el-table-column",{attrs:{label:"设备名称",prop:"sensor_title",align:"center"}}),a._v(" "),r("el-table-column",{attrs:{label:"位置",prop:"region_title",align:"center"}}),a._v(" "),r("el-table-column",{attrs:{label:"数据名称",prop:"sensor_categary",align:"center"}}),a._v(" "),r("el-table-column",{attrs:{label:"数据值",prop:"dataval",align:"center"}}),a._v(" "),r("el-table-column",{attrs:{label:"标准值",prop:"standardval",align:"center"}}),a._v(" "),r("el-table-column",{attrs:{label:"预警等级",prop:"grade",align:"center"},scopedSlots:a._u([{key:"default",fn:function(e){return[r("span",[a._v(a._s("0"==e.row.grade?"一般告警":"严重告警")+"\n                ")])]}}])}),a._v(" "),r("el-table-column",{attrs:{label:"时间",prop:"alarmtiem",align:"center"},scopedSlots:a._u([{key:"default",fn:function(e){return[r("span",[a._v(a._s(a.gcomm.v2datestr(e.row.alarmtiem))+"\n                ")])]}}])}),a._v(" "),r("el-table-column",{attrs:{label:"是否已确认",prop:"state",align:"center"}}),a._v(" "),r("el-table-column",{attrs:{label:"操作",prop:"操作",width:"100px",align:"center"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._e(),a._v(" "),r("el-button",{attrs:{size:"mini"},on:{click:function(r){a.rowAlarmEnd(e.$index,e.row)}}},[r("span",[a._v("结束预警\n                    ")])])]}}])})],1),a._v(" "),r("el-pagination",{staticStyle:{"text-align":"center"},attrs:{"page-size":a.alarmRecOfPage,total:a.alarmTotalRec,"page-count":a.alarmTotalPage,"current-page":a.alarmCurPage,layout:"total, sizes, prev, pager, next"},on:{"size-change":a.alarmSizeChange,"current-change":a.alarmCurChange}}),a._v(" "),r("el-dialog",{attrs:{visible:a.alarmShowDetail,title:"预警详情","append-to-body":!0,"destroy-on-close":!0},on:{"update:visible":function(e){a.alarmShowDetail=e}}},[a.alarmShowDetail?r("alarmd",{attrs:{paramsObj:a.alarmShowInst}}):a._e()],1)],1)},[],!1,null,"e3b2aba4",null);s.options.__file="index.vue";e.default=s.exports}}]);