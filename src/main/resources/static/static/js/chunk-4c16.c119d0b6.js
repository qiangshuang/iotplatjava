(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4c16","chunk-8367","chunk-6bc7","chunk-625e"],{"+u97":function(t,e,r){},"3WsS":function(t,e,r){"use strict";r.r(e);var a,s=r("gDS+"),o=r.n(s),l=r("YEIV"),n=r.n(l),i=r("JYr9"),c=r("twYc"),u=r("uiSD"),p={name:"algorithmm",mixins:[r("y2a5").a],components:(a={Restart:i.default,Stopit:c.default,Pushpeople:u.default},n()(a,"Restart",i.default),n()(a,"Stopit",c.default),a),props:{},data:function(){return{algorithmData:[],algorithmTotalRec:0,algorithmTotalPage:0,algorithmRecOfPage:10,algorithmCurPage:1,algorithmCbPage:this.gen_list_cb("algorithm"),algorithmQueryArr:[{name:"algorithm_id",val:0,tb:"algorithm"},{name:"camera_id",val:0,tb:"algorithm"},{name:"state",val:"",op:"like",tb:"algorithm"},{name:"user_titles",val:"",op:"like",tb:"algorithm"}],algorithmQueryInit:[{name:"algorithm_id",val:0,tb:"algorithm"},{name:"camera_id",val:0,tb:"algorithm"},{name:"state",val:"",op:"like",tb:"algorithm"},{name:"user_titles",val:"",op:"like",tb:"algorithm"}],algorithmMultiSel:[],algorithmSortParas:[{name:"algorithm_title",tb:"algorithm",orderV:"asc"}],show:!1,restartEdit:null,show1:!1,stopitEdit:null,show3:!1,pushpeopleEdits:null,batchstart:!1,batchclose:!1,runstate:[{value:"",label:"全部"},{value:"运行中",label:"运行中"},{value:"异常",label:"异常"}],crameaData:[],peopleData:[],countData:[],dataArr:[],algorithmMultiSelID:[],batchprogresss:0,stopprogresss:0,reason:!1,reason1:!1,peoples:"全部",tableHeight:window.innerHeight-420}},mounted:function(){var t=this;this.refreshPage("algorithm","/actq","algorithmlist"),console.log("高度",this.tableHeight);this.callSrvAct("/actq",{_hy:"cameralist",qps:[{name:"title",val:"",op:"like",tb:"camera"},{name:"state",val:"",op:"like",tb:"camera"}],sps:[{name:"title",tb:"camera",orderV:"asc"}]}).then(function(e){console.log("摄像机信息",e),t.crameaData=e.data.pageData,t.crameaData.splice(0,0,{id:0,title:"全部"})});this.callSrvAct("/actq",{_hy:"pushuserlist",qps:[{name:"parent_title",val:"",op:"like",tb:"user"},{name:"title",val:"",op:"like",tb:"user"}],sps:[{name:"title",tb:"user",orderV:"asc"}]}).then(function(e){console.log("推送人员信息",e),t.peopleData=e.data.pageData,t.peopleData.splice(0,0,{id:0,title:"全部"})});this.callSrvAct("/actq",{_hy:"algorithmacclist",qps:[{name:"title",val:"",op:"like"}]}).then(function(e){console.log("算法信息",e),t.countData=e.data.pageData,t.countData.splice(0,0,{id:0,title:"全部"})})},methods:{algorithmMultiSelChange:function(t){this.algorithmMultiSel=t},algorithmQuery:function(){this.refreshPage2("algorithm","/actq",this.remoteRecOfPage,1,"algorithmlist")},algorithmResetQuery:function(){this.algorithmQueryArr=JSON.parse(o()(this.algorithmQueryInit))},algorithmSizeChange:function(t){this.refreshPage2("algorithm","/actq",t,this.algorithmCurPage,"algorithmlist")},algorithmCurChange:function(t){this.refreshPage2("algorithm","/actq",this.algorithmRecOfPage,t,"algorithmlist")},add:function(){this.$router.push({name:"seleype",params:null})},restartOK:function(){},restartSet:function(){this.show=!1,this.refreshPage("algorithm","/actq","algorithmlist")},stopitOK:function(){},stopitSet:function(){this.show1=!1,this.refreshPage("algorithm","/actq","algorithmlist")},handleChange:function(t){this.algorithmMultiSel=t;for(var e=[],r=0;r<t.length;r++)e.push(t[r].id);this.algorithmMultiSelID=e,this.dataArr=JSON.parse(o()(t));for(var a=0;a<this.dataArr.length;a++)this.dataArr[a].msg=""},handlestop:function(t,e){this.show1=!0,this.stopitEdit=e,this.stopitEdit.msg=""},stopclose:function(){this.show1=!1,this.refreshPage("algorithm","/actq","algorithmlist")},handleSetup:function(t){this.pushpeopleEdits=JSON.parse(o()(t)),this.show3=!0},pushpeopleOKs:function(t){var e=this;this.show3=!1,console.log("管理界面",t);var r=t;r._hy="algorithmup",this.callSrvAct("/act",r).then(function(t){console.log(t),"SUCCESS"==t.status&&e.refreshPage("algorithm","/actq","algorithmlist")})},pushpeopleSets:function(){this.show3=!1},handlerest:function(t,e){console.log("row:",e),this.show=!0,this.restartEdit=e,this.restartEdit.msg=""},restartclose1:function(){this.show=!1,this.refreshPage("algorithm","/actq","algorithmlist")},search:function(){this.refreshPage("algorithm","/actq","algorithmlist")},batchstarts:function(){var t=this;this.batchstart=!0;var e={_hy:"algorithmrestart",qps:[{name:"id",val:this.algorithmMultiSelID,op:"in"}]};console.log("upData:",e);for(var r=0;r<this.dataArr.length;r++)this.dataArr[r].batchprogress=0,this.dataArr[r].batchbarcolor="",this.dataArr[r].batchbarstate="";console.log("数据",this.dataArr),this.callSrvAct("/algorithmrestart",e).then(function(e){console.log("返回值",e),t.count1(0,e.data)})},count1:function(t,e){var r=this,a=this,s=e;this.interval1=window.setInterval(function(){var o=t;"SUCCESS"==e[o].result?(a.dataArr[o].batchprogress=a.dataArr[o].batchprogress+20,a.dataArr[o].batchbarcolor="green"):"FAILD"==e[o].result&&(a.dataArr[o].batchprogress=a.dataArr[o].batchprogress+20,a.dataArr[o].batchbarcolor="red"),a.$set(a.dataArr,o,a.dataArr[o]),a.batchprogresss=a.batchprogresss+10,a.batchprogresss>=90&&(a.batchprogresss=90),a.dataArr[o].batchprogress>=100&&("SUCCESS"==e[o].result?a.dataArr[o].batchbarstate="success":"FAILD"==e[o].result&&(a.dataArr[o].batchbarstate="exception",a.dataArr[o].msg=e[o].msg,a.reason=!0),console.log("结束"),window.clearInterval(a.interval1),(o+=1)==r.dataArr.length&&(a.batchprogresss=100),o<r.dataArr.length&&(console.log("次数",o),r.count1(o,s)))},500)},batchstartclose:function(){console.log("1111111111111111111111111111"),this.batchstart=!1,this.batchprogresss=0,this.reason=!1,window.clearInterval(this.interval1),this.refreshPage("algorithm","/actq","algorithmlist")},batchcloses:function(){var t=this;this.batchclose=!0;var e={_hy:"algorithmclose",qps:[{name:"id",val:this.algorithmMultiSelID,op:"in"}]};console.log("upData:",e);for(var r=0;r<this.dataArr.length;r++)this.dataArr[r].stopprogress=0,this.dataArr[r].stopcolor="",this.dataArr[r].stopstate="";console.log("数据",this.dataArr),this.callSrvAct("/algorithmclose",e).then(function(e){console.log("返回值",e),t.count(0,e.data)})},batchcloseclose:function(){this.batchclose=!1,this.stopprogresss=0,this.reason1=!1,window.clearInterval(this.interval),this.refreshPage("algorithm","/actq","algorithmlist")},count:function(t,e){var r=this,a=this,s=e;this.interval=window.setInterval(function(){var o=t;"SUCCESS"==e[o].result?(a.dataArr[o].stopprogress=a.dataArr[o].stopprogress+20,a.dataArr[o].stopcolor="green"):"FAILD"==e[o].result&&(a.dataArr[o].stopprogress=a.dataArr[o].stopprogress+20,a.dataArr[o].stopcolor="red"),a.$set(a.dataArr,o,a.dataArr[o]),a.stopprogresss=a.stopprogresss+10,a.stopprogresss>=90&&(a.stopprogresss=90),a.dataArr[o].stopprogress>=100&&(console.log("结束"),"SUCCESS"==e[o].result?a.dataArr[o].stopstate="success":"FAILD"==e[o].result&&(a.dataArr[o].stopstate="exception",a.dataArr[o].msg=e[o].msg,a.reason1=!0),window.clearInterval(a.interval),(o+=1)==r.dataArr.length&&(a.stopprogresss=100),o<r.dataArr.length&&(console.log("次数",o),r.count(o,s)))},500)},peopleclose:function(){this.show3=!1},peoplechange:function(t){"全部"==t&&(this.algorithmQueryArr[3].val="")},transformation:function(t){var e=t.split(",");return console.log("人",e),""==e[0]?"":e[0]+"等"+e.length+"人"}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},h=(r("ChEy"),r("KHd+")),g=Object(h.a)(p,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-container",{staticStyle:{height:"100%"},attrs:{direction:"vertical"}},[r("div",{staticStyle:{display:"flex"}},[r("div",{staticStyle:{margin:"0px 10px"}},[r("span",[t._v("算法名称\n            ")]),t._v(" "),r("el-select",{model:{value:t.algorithmQueryArr[0].val,callback:function(e){t.$set(t.algorithmQueryArr[0],"val",e)},expression:"algorithmQueryArr[0].val"}},t._l(t.countData,function(t,e){return r("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}))],1),t._v(" "),r("div",{staticStyle:{margin:"0px 10px"}},[r("span",[t._v("摄像机名称\n            ")]),t._v(" "),r("el-select",{model:{value:t.algorithmQueryArr[1].val,callback:function(e){t.$set(t.algorithmQueryArr[1],"val",e)},expression:"algorithmQueryArr[1].val"}},t._l(t.crameaData,function(t,e){return r("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}))],1),t._v(" "),r("div",[r("span",[t._v("运行状态\n            ")]),t._v(" "),r("el-select",{model:{value:t.algorithmQueryArr[2].val,callback:function(e){t.$set(t.algorithmQueryArr[2],"val",e)},expression:"algorithmQueryArr[2].val"}},t._l(t.runstate,function(t,e){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),r("div",{staticStyle:{margin:"0px 10px"}},[r("span",[t._v("推送人员\n            ")]),t._v(" "),r("el-select",{on:{change:t.peoplechange},model:{value:t.peoples,callback:function(e){t.peoples=e},expression:"peoples"}},t._l(t.peopleData,function(t,e){return r("el-option",{key:t.id,attrs:{label:t.title,value:t.title}})}))],1),t._v(" "),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.search}},[r("span",[t._v("搜索\n            ")])]),t._v(" "),r("div")],1),t._v(" "),r("div",{staticStyle:{"margin-top":"10px"}},[r("el-button",{on:{click:t.batchstarts}},[r("span",[t._v("批量重启\n            ")])]),t._v(" "),r("el-button",{on:{click:t.batchcloses}},[r("span",[t._v("批量停止\n            ")])]),t._v(" "),r("el-button",{on:{click:t.add}},[r("span",[t._v("新建任务\n            ")])])],1),t._v(" "),r("el-table",{ref:"algorithm",staticStyle:{margin:"10px 0px"},attrs:{border:!0,height:t.tableHeight,"header-cell-style":{background:"#E6F4FF",fontWeight:"500",color:"#0A51C4",borderBottom:"2px solid #4093F7"},id:"algorithm",data:t.algorithmData},on:{"selection-change":t.handleChange}},[r("el-table-column",{attrs:{label:"全选",type:"selection"}}),t._v(" "),r("el-table-column",{attrs:{label:"算法名称",prop:"algorithm_title",align:"center"}}),t._v(" "),r("el-table-column",{attrs:{label:"摄像机名称",prop:"camera_title",align:"center"}}),t._v(" "),r("el-table-column",{attrs:{label:"运行状态",prop:"state",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.state)+"\n                ")])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"推送人员",prop:"user_titles",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(t.transformation(e.row.user_titles))+"\n                ")])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"启动时间",prop:"opentime",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(t.gcomm.v2datetimestr(e.row.opentime))+"\n                ")])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"操作","min-width":"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",["异常"==e.row.state?r("el-button",{attrs:{type:"danger",size:"small"}},[r("span",[t._v("查看异常\n                        ")])]):t._e(),t._v(" "),"运行中"==e.row.state||"关闭"==e.row.state?r("el-button",{attrs:{size:"small"},on:{click:function(r){t.handleSetup(e.row)}}},[r("span",[t._v("设置\n                        ")])]):t._e(),t._v(" "),"运行中"==e.row.state||"关闭"==e.row.state?r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(r){t.handlestop(e.$index,e.row)}}},[r("span",[t._v("停止\n                        ")])]):t._e(),t._v(" "),"运行中"==e.row.state||"关闭"==e.row.state?r("el-button",{attrs:{size:"small"},on:{click:function(r){t.handlerest(e.$index,e.row)}}},[r("span",[t._v("重启\n                        ")])]):t._e()],1)]}}])})],1),t._v(" "),r("div",{staticStyle:{"text-align":"center"}},[r("el-pagination",{attrs:{total:t.algorithmTotalRec,"page-count":t.algorithmTotalPage,layout:"total, sizes, prev, pager, next"},on:{"size-change":t.algorithmSizeChange,"current-change":t.algorithmCurChange}})],1),t._v(" "),t.show?r("el-dialog",{attrs:{visible:t.show,title:"重启","destroy-on-close":!0},on:{"update:visible":function(e){t.show=e},close:t.restartclose1}},[r("restart",{attrs:{paramsObj:t.restartEdit},on:{submitOk:t.restartOK,submitClose:t.restartSet}})],1):t._e(),t._v(" "),t.show1?r("el-dialog",{attrs:{visible:t.show1,title:"停止","destroy-on-close":!0},on:{"update:visible":function(e){t.show1=e},colse:t.stopclose}},[r("stopit",{attrs:{paramsObj:t.stopitEdit},on:{submitOk:t.stopitOK,submitClose:t.stopitSet}})],1):t._e(),t._v(" "),t.show3?r("el-dialog",{attrs:{visible:t.show3,title:"选择推送人员","destroy-on-close":!0,close:t.peopleclose},on:{"update:visible":function(e){t.show3=e}}},[r("pushpeople",{attrs:{paramsObj:t.pushpeopleEdits},on:{submitOk:t.pushpeopleOKs,submitClose:t.pushpeopleSets}})],1):t._e(),t._v(" "),t.batchstart?r("el-dialog",{attrs:{visible:t.batchstart,title:"批量重启","destroy-on-close":!0},on:{"update:visible":function(e){t.batchstart=e},close:t.batchstartclose}},[r("div",[r("span",[t._v("总进度：\n            ")]),t._v(" "),r("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.batchprogresss,color:""}})],1),t._v(" "),r("el-table",{attrs:{data:t.dataArr,"header-cell-style":{background:"rgba(241,246,254,1)",fontWeight:"500",color:"#333333",fontSize:"16px"}}},[r("el-table-column",{attrs:{label:"算法名称",prop:"title"}}),t._v(" "),r("el-table-column",{attrs:{label:"摄像机名称",prop:"cameratitle"}}),t._v(" "),r("el-table-column",{attrs:{label:"启动时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(t.gcomm.v2datetimestr(e.row.opentime))+"\n                    ")])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"重启进度"},scopedSlots:t._u([{key:"default",fn:function(t){return[r("el-progress",{attrs:{percentage:t.row.batchprogress,status:t.row.batchbarstate,color:t.row.batchbarcolor}})]}}])}),t._v(" "),t.reason?r("el-table-column",{attrs:{label:"失败原因",prop:"msg"}}):t._e()],1)],1):t._e(),t._v(" "),t.batchclose?r("el-dialog",{attrs:{visible:t.batchclose,title:"批量停止","destroy-on-close":!0},on:{"update:visible":function(e){t.batchclose=e},close:t.batchcloseclose}},[r("div",[r("span",[t._v("总进度：\n            ")]),t._v(" "),r("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.stopprogresss,color:""}})],1),t._v(" "),r("el-table",{attrs:{data:t.dataArr,"header-cell-style":{background:"rgba(241,246,254,1)",fontWeight:"500",color:"#333333",fontSize:"16px"}}},[r("el-table-column",{attrs:{label:"算法名称",prop:"title"}}),t._v(" "),r("el-table-column",{attrs:{label:"摄像机名称",prop:"cameratitle"}}),t._v(" "),r("el-table-column",{attrs:{label:"启动时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(t.gcomm.v2datetimestr(e.row.opentime))+"\n                    ")])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"停止进度"},scopedSlots:t._u([{key:"default",fn:function(t){return[r("el-progress",{attrs:{percentage:t.row.stopprogress,status:t.row.stopstate,color:t.row.stopcolor}})]}}])}),t._v(" "),t.reason1?r("el-table-column",{attrs:{label:"失败原因",prop:"msg"}}):t._e()],1)],1):t._e()],1)},[],!1,null,"4c2afefc",null);g.options.__file="index.vue";e.default=g.exports},ChEy:function(t,e,r){"use strict";var a=r("XoFJ");r.n(a).a},JYr9:function(t,e,r){"use strict";r.r(e);var a=r("P2sY"),s=r.n(a),o={name:"restart",mixins:[r("y2a5").a],components:{},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){return{pObj:{},progresss:0,barcolors:"",pArr:[],reason:!1}},mounted:function(){this.pObj=s()({},this.paramsObj),this.pObj.progress=0,this.pObj.barcolor="",this.pObj.barstate="",this.pArr.push(this.pObj),this.startup()},methods:{startup:function(){var t=this,e=this,r={_hy:"algorithmrestart",qps:[{name:"id",val:[this.pObj.id],op:"in"}]};console.log("upData:",r),this.callSrvAct("/algorithmrestart",r).then(function(r){console.log("后台返回值",r),"FAILD"==r.status?(t.count("FAILD",r.data),e.barcolors="red",t.pArr[0].barcolor="red"):"SUCCESS"==r.data[0].result?(t.count("SUCCESS",r.data),e.barcolors="green",t.pArr[0].barcolor="green",t.$emit("submitOk")):"FAILD"==r.data[0].result&&(t.count("FAILD",r.data),e.barcolors="red",t.pArr[0].barcolor="red")})},count:function(t,e){var r=this,a=this;a.progress=0,this.interval=window.setInterval(function(){a.progresss+=40,r.pArr[0].progress+=40,a.$set(a.pArr,0,a.pArr[0]),a.progresss>=100&&(a.progresss=100,a.pArr[0].progress=100,"SUCCESS"==t?r.pArr[0].barstate="success":"FAILD"==t&&(r.pArr[0].barstate="exception",r.pArr[0].msg=e[0].msg,r.reason=!0),window.clearInterval(a.interval),console.log(t))},500)},colse:function(){this.reason=!1,this.$emit("submitClose")}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){this.reason=!1,window.clearInterval(this.interval)},destroyed:function(){}},l=(r("aLxM"),r("KHd+")),n=Object(l.a)(o,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-container",{attrs:{direction:"vertical"}},[r("div",{staticStyle:{display:"flex",margin:"10px 0px"}},[r("span",[t._v("总进度：\n        ")]),t._v(" "),r("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.progresss,color:t.barcolors}})],1),t._v(" "),r("el-table",{attrs:{data:t.pArr,"header-cell-style":{background:"rgba(241,246,254,1)",fontWeight:"500",color:"#333333",fontSize:"16px"}}},[r("el-table-column",{attrs:{label:"算法名称",prop:"title"}}),t._v(" "),r("el-table-column",{attrs:{label:"摄像机名称",prop:"cameratitle"}}),t._v(" "),r("el-table-column",{attrs:{label:"启动时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(t.gcomm.v2datetimestr(e.row.opentime))+"\n                ")])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"重启进度"},scopedSlots:t._u([{key:"default",fn:function(t){return[r("el-progress",{attrs:{percentage:t.row.progress,status:t.row.barstate,color:t.row.barcolor}})]}}])}),t._v(" "),t.reason?r("el-table-column",{attrs:{label:"失败原因",prop:"msg"}}):t._e()],1),t._v(" "),r("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[r("el-button",{on:{click:t.colse}},[r("span",[t._v("关闭\n            ")])])],1)],1)},[],!1,null,"20c81b16",null);n.options.__file="index.vue";e.default=n.exports},LEJw:function(t,e,r){},RG45:function(t,e,r){"use strict";var a=r("LEJw");r.n(a).a},"RU/L":function(t,e,r){r("Rqdy");var a=r("WEpk").Object;t.exports=function(t,e,r){return a.defineProperty(t,e,r)}},Rqdy:function(t,e,r){var a=r("Y7ZC");a(a.S+a.F*!r("jmDH"),"Object",{defineProperty:r("2faE").f})},SEkw:function(t,e,r){t.exports={default:r("RU/L"),__esModule:!0}},XoFJ:function(t,e,r){},YEIV:function(t,e,r){"use strict";e.__esModule=!0;var a=function(t){return t&&t.__esModule?t:{default:t}}(r("SEkw"));e.default=function(t,e,r){return e in t?(0,a.default)(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},ZTru:function(t,e,r){},aLxM:function(t,e,r){"use strict";var a=r("ZTru");r.n(a).a},twYc:function(t,e,r){"use strict";r.r(e);var a=r("P2sY"),s=r.n(a),o={name:"stopit",mixins:[r("y2a5").a],components:{},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){return{pObj:{},progresss:0,barcolors:"",pArr:[],reason:!1}},mounted:function(){this.pObj=s()({},this.paramsObj),this.pObj.progress=0,this.pObj.barcolor="",this.pObj.barstate="",this.pArr.push(this.pObj);this.startup()},methods:{startup:function(){var t=this,e=this,r={_hy:"algorithmclose",qps:[{name:"id",val:[this.pObj.id],op:"in"}]};console.log("upData:",r),this.callSrvAct("/algorithmclose",r).then(function(r){console.log("后台返回值",r),"SUCCESS"==r.data[0].result?(t.count("SUCCESS",r.data),e.barcolors="green",t.pArr[0].barcolor="green",t.$emit("submitOk")):"FAILD"==r.data[0].result&&(t.count("FAILD",r.data),e.barcolors="red",t.pArr[0].barcolor="red")})},count:function(t,e){var r=this,a=this;a.progress=0,this.interval=window.setInterval(function(){a.progresss+=40,r.pArr[0].progress+=40,a.$set(a.pArr,0,a.pArr[0]),a.progresss>=100&&(a.progresss=100,a.pArr[0].progress=100,"SUCCESS"==t?r.pArr[0].barstate="success":"FAILD"==t&&(r.pArr[0].barstate="exception",r.pArr[0].msg=e[0].msg,r.reason=!0),window.clearInterval(a.interval),console.log(t))},500)},colse:function(){this.reason=!1,this.$emit("submitClose")}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){this.reason=!1,window.clearInterval(this.interval)},destroyed:function(){}},l=(r("zkI4"),r("KHd+")),n=Object(l.a)(o,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-container",{attrs:{direction:"vertical"}},[r("div",{staticStyle:{display:"flex",margin:"10px 0px"}},[r("span",[t._v("总进度：\n        ")]),t._v(" "),r("el-progress",{staticStyle:{width:"200px"},attrs:{percentage:t.progresss,color:t.barcolors}})],1),t._v(" "),r("el-table",{attrs:{data:t.pArr,"header-cell-style":{background:"rgba(241,246,254,1)",fontWeight:"500",color:"#333333",fontSize:"16px"}}},[r("el-table-column",{attrs:{label:"算法名称",prop:"title"}}),t._v(" "),r("el-table-column",{attrs:{label:"摄像机名称",prop:"cameratitle"}}),t._v(" "),r("el-table-column",{attrs:{label:"启动时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(t.gcomm.v2datetimestr(e.row.opentime))+"\n                ")])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"停止进度"},scopedSlots:t._u([{key:"default",fn:function(t){return[r("el-progress",{attrs:{percentage:t.row.progress,status:t.row.barstate,color:t.row.barcolor}})]}}])}),t._v(" "),t.reason?r("el-table-column",{attrs:{label:"失败原因",prop:"msg"}}):t._e()],1),t._v(" "),r("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[r("el-button",{on:{click:t.colse}},[r("span",[t._v("关闭\n            ")])])],1)],1)},[],!1,null,"f1cb5474",null);n.options.__file="index.vue";e.default=n.exports},uiSD:function(t,e,r){"use strict";r.r(e);var a=r("gDS+"),s=r.n(a),o=r("YEIV"),l=r.n(o),n={name:"pushpeople",mixins:[r("y2a5").a],components:{},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){return{pushuserData:[],pushuserTotalRec:0,pushuserTotalPage:0,pushuserRecOfPage:10,pushuserCurPage:1,pushuserCbPage:this.gen_list_cb("pushuser"),pushuserQueryArr:[{name:"parent_id",val:0,tb:"user"},{name:"title",val:"",op:"like",tb:"user"}],pushuserQueryInit:[{name:"parent_id",val:0,tb:"user"},{name:"title",val:"",op:"like",tb:"user"}],pushuserMultiSel:[],pushuserSortParas:[{name:"title",tb:"user",orderV:"asc"}],departmentArr:[],pobj:{}}},mounted:function(){var t=this;this.refreshPage("pushuser","/actq","pushuserlist");var e=l()({_hy:"departlist",qps:[{name:"type",val:"部门",tb:"org"}],sps:[{name:"title",tb:"org",orderV:"asc"}]},"sps",[{name:"title",orderV:"asc"}]),r=this;this.callSrvAct("/actq",e).then(function(e){var a=e.data||[];console.log("部门数据",a),r.departmentArr=a,t.departmentArr.splice(0,0,{id:0,title:"全部"})}),this.pobj=this.paramsObj},methods:{pushuserMultiSelChange:function(t){this.pushuserMultiSel=t},pushuserQuery:function(){this.refreshPage2("pushuser","/actq",this.remoteRecOfPage,1,"pushuserlist")},pushuserResetQuery:function(){this.pushuserQueryArr=JSON.parse(s()(this.pushuserQueryInit))},pushuserSizeChange:function(t){this.refreshPage2("pushuser","/actq",t,this.pushuserCurPage,"pushuserlist")},pushuserCurChange:function(t){this.refreshPage2("pushuser","/actq",this.pushuserRecOfPage,t,"pushuserlist")},close:function(){this.$emit("submitClose")},handleChange:function(t){this.pushuserMultiSel=t,console.log(this.pushuserMultiSel)},determine:function(){if(console.log("父组件传的",this.pobj),"id"in this.pobj){var t=this.pobj;if(t.user_ids="",t.user_titles="",this.pushuserMultiSel&&this.pushuserMultiSel.length>0)for(var e=0;e<this.pushuserMultiSel.length;e++)t.user_ids&&t.user_ids.length>0&&(t.user_ids=t.user_ids+",",t.user_titles=t.user_titles+","),t.user_ids=t.user_ids+this.pushuserMultiSel[e].id,t.user_titles=t.user_titles+this.pushuserMultiSel[e].title;this.$emit("submitOk",t)}else this.$emit("submitOk",this.pushuserMultiSel)},search:function(){this.refreshPage2("pushuser","/actq",this.userRecOfPage,1,"pushuserlist")}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},i=(r("RG45"),r("KHd+")),c=Object(i.a)(n,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-container",{attrs:{direction:"vertical"}},[r("div",[r("el-select",{attrs:{placeholder:"请选择部门"},model:{value:t.pushuserQueryArr[0].val,callback:function(e){t.$set(t.pushuserQueryArr[0],"val",e)},expression:"pushuserQueryArr[0].val"}},t._l(t.departmentArr,function(t,e){return r("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),t._v(" "),r("el-input",{staticStyle:{width:"220px",margin:"0px 10px"},attrs:{placeholder:"请输入姓名"},model:{value:t.pushuserQueryArr[1].val,callback:function(e){t.$set(t.pushuserQueryArr[1],"val",e)},expression:"pushuserQueryArr[1].val"}}),t._v(" "),r("el-button",{on:{click:t.search}},[r("span",[t._v("搜索\n            ")])])],1),t._v(" "),r("el-table",{ref:"pushuser",staticStyle:{margin:"10px 0px"},attrs:{"header-cell-style":{background:"rgba(241,246,254,1)",fontWeight:"500",color:"#333333",fontSize:"16px"},data:t.pushuserData},on:{"selection-change":t.handleChange}},[r("el-table-column",{attrs:{type:"selection"}}),t._v(" "),r("el-table-column",{attrs:{label:"姓名",prop:"title"}}),t._v(" "),r("el-table-column",{attrs:{label:"岗位",prop:"job_title"}}),t._v(" "),r("el-table-column",{attrs:{label:"手机号",prop:"mobile"}})],1),t._v(" "),r("div",{staticStyle:{"text-align":"center"}},[r("el-pagination",{attrs:{total:t.pushuserTotalRec,"page-count":t.pushuserTotalPage,"current-page":t.pushuserCurPage,layout:"total, sizes, prev, pager, next"},on:{"size-change":t.pushuserSizeChange,"current-change":t.pushuserCurChange}})],1),t._v(" "),r("div",{staticStyle:{"text-align":"right"}},[r("el-button",{on:{click:t.close}},[r("span",[t._v("取消\n            ")])]),t._v(" "),r("el-button",{on:{click:t.determine}},[r("span",[t._v("确定\n            ")])])],1)],1)},[],!1,null,"24fd9fb8",null);c.options.__file="index.vue";e.default=c.exports},zkI4:function(t,e,r){"use strict";var a=r("+u97");r.n(a).a}}]);