(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-a2d8","chunk-a393"],{"1Gmv":function(e,t,o){},FcWn:function(e,t,o){"use strict";var l=o("1Gmv");o.n(l).a},Gd1s:function(e,t,o){},XaZM:function(e,t,o){"use strict";o.r(t);var l=o("P2sY"),n=o.n(l),r={name:"roleedit",mixins:[o("y2a5").a],components:{},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){return{newRoleForm:{id:0,title:"",memo:"",is_edit:"",enable:"",addtime:(new Date).getTime(),sort:0,version:0},roleForm:{},isInDialog:!1,pObj:{}}},mounted:function(){this.pObj=n()({},this.paramsObj),this.gcomm.mapLength(this.pObj)>0?(this.isInDialog=!0,this.roleForm=n()({},this.newRoleForm,this.pObj)):this.roleForm=n()({},this.newRoleForm,this.$route.params)},methods:{pObjChanged:function(){this.gcomm.mapLength(this.pObj)>0&&(this.isInDialog=!0,this.roleForm=n()({},this.newRoleForm,this.pObj))},handleSubmitRole:function(){this.submitRoleForm("roleForm")},submitRoleFormImpl:function(e){var t=this,o=void 0,l=!0,r="";this[e].id>0?(o="/act",l=!1,r="roleup"):(o="/act",r="roleadd");var i=n()({},this[e]);i._hy=r,this.callSrvAct(o,i).then(function(e){console.log("res:",e,t.isInDialog),t.isInDialog?l?(console.log(" 1------------"),e.data&&e.data.inst?t.$emit("submitOk",e.data.inst):e.data&&t.$emit("submitOk",e.data||{})):(console.log(" 3------------"),t.$emit("submitOk",i)):(console.log(" 2------------"),t.$router.go(-1))})},submitRoleForm:function(e){var t=this;this.$refs[e].validate(function(o){if(!o)return!1;t.submitRoleFormImpl(e)})}},watch:{paramsObj:function(e){this.pObj.id!=this.paramsObj.id&&(this.pObj=n()({},this.paramsObj),this.pObjChanged())}},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},i=(o("e6+o"),o("KHd+")),a=Object(i.a)(r,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",{attrs:{direction:"vertical"}},[o("el-form",{ref:"roleForm",attrs:{model:e.roleForm,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"角色名称",prop:"title",rules:{max:60}}},[o("el-input",{model:{value:e.roleForm.title,callback:function(t){e.$set(e.roleForm,"title",t)},expression:"roleForm.title"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"角色描述",prop:"memo",rules:{max:200}}},[o("el-input",{model:{value:e.roleForm.memo,callback:function(t){e.$set(e.roleForm,"memo",t)},expression:"roleForm.memo"}})],1),e._v(" "),e._e(),e._v(" "),e._e(),e._v(" "),e._e(),e._v(" "),e._e(),e._v(" "),e._e()],1),e._v(" "),o("div",{staticStyle:{"text-align":"center"}},[o("el-button",{nativeOn:{click:function(t){return t.stopPropagation(),e.handleSubmitRole(t)}}},[o("span",[e._v("提交\n            ")])])],1)],1)},[],!1,null,"2cf60dde",null);a.options.__file="index.vue";t.default=a.exports},"e6+o":function(e,t,o){"use strict";var l=o("Gd1s");o.n(l).a},kMdH:function(e,t,o){"use strict";o.r(t);var l=o("P2sY"),n=o.n(l),r=o("gDS+"),i=o.n(r),a=o("XaZM"),s={name:"rolelist",mixins:[o("y2a5").a],components:{Roleedit:a.default},props:{},data:function(){return{roleData:[],roleTotalRec:0,roleTotalPage:0,roleRecOfPage:10,roleCurPage:1,roleCbPage:this.gen_list_cb("role"),roleQueryArr:[{name:"title",val:"",op:"like",tb:"role"}],roleQueryInit:[{name:"title",val:"",op:"like",tb:"role"}],roleMultiSel:[],roleSortParas:[{name:"title",tb:"role",orderV:"asc"}],roleEditShow:!1,roleEditInst:null,tableHeight:window.innerHeight-500}},mounted:function(){this.refreshPage("role","/actq","rolelist")},methods:{roleMultiSelChange:function(e){this.roleMultiSel=e},roleQuery:function(){this.refreshPage2("role","/actq",this.remoteRecOfPage,1,"rolelist")},roleResetQuery:function(){this.roleQueryArr=JSON.parse(i()(this.roleQueryInit))},roleSizeChange:function(e){this.refreshPage2("role","/actq",e,this.roleCurPage,"rolelist")},roleCurChange:function(e){this.refreshPage2("role","/actq",this.roleRecOfPage,e,"rolelist")},add:function(){this.roleEditInst={id:0,title:"",memo:"",is_edit:"t",addtime:(new Date).getTime(),enable:"t"},this.roleEditShow=!0},handleRoleEdit:function(e,t){this.roleEditInst=n()({},t),this.roleEditShow=!0},handleRoleDel:function(e,t){var o=this,l=t;this.$confirm("此操作将删除该项数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={_hy:"roledel",role:[{name:"id",val:[l.id],op:"in"}],user_role:[{name:"role_id",val:[l.id],op:"in"}],role_page:[{name:"role_id",val:[l.id],op:"in"}],role_btn:[{name:"role_id",val:[l.id],op:"in"}]};console.log("upData:",e),o.callSrvAct("/act",e).then(function(e){o.refreshPage("role","/actq","rolelist")})}).catch(function(e){o.$message.error(e)})},handleRoleDels:function(){var e=this;console.log("多选ID",this.roleMultiSel);var t=this;this.$confirm("此操作将删除该项数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var o={_hy:"roledel",role:[{name:"id",val:t.roleMultiSel,op:"in"}],user_role:[{name:"role_id",val:t.roleMultiSel,op:"in"}],role_page:[{name:"role_id",val:t.roleMultiSel,op:"in"}],role_btn:[{name:"role_id",val:t.roleMultiSel,op:"in"}]};console.log("upData:",o),e.callSrvAct("/act",o).then(function(t){e.refreshPage("role","/actq","rolelist")})}).catch(function(t){e.$message.error(t)})},jurisdiction:function(e,t){this.$router.push({name:"rolepage",params:t})},handleChange:function(e){for(var t=[],o=0;o<e.length;o++)t.push(e[o].id);this.roleMultiSel=t},roleEditOK:function(){this.roleEdit={},this.roleEditShow=!1,this.refreshPage("role","/actq","rolelist")},roleEditClose:function(){this.roleEditShow=!1},roleEnableSet:function(e){var t=this;console.log("row:",e);var o=n()({},{id:e.id,enable:e.enable,version:e.version});o._hy="roleup",console.log("params:",o),this.callSrvAct("/act",o).then(function(e){t.refreshPage("role","/actq","rolelist")})}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},c=(o("FcWn"),o("KHd+")),u=Object(c.a)(s,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",{staticStyle:{height:"100%"},attrs:{direction:"vertical"}},[o("div",[o("span",[e._v("角色名称\n        ")]),e._v(" "),o("el-input",{staticStyle:{width:"220px","margin-left":"10px"},model:{value:e.roleQueryArr[0].val,callback:function(t){e.$set(e.roleQueryArr[0],"val",t)},expression:"roleQueryArr[0].val"}}),e._v(" "),o("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:e.roleQuery}},[o("span",[e._v("搜索\n            ")])]),e._v(" "),o("el-button",{staticStyle:{"margin-left":"30px"},on:{click:e.add}},[o("span",[e._v("新增\n            ")])]),e._v(" "),o("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"danger"},on:{click:e.handleRoleDels}},[o("span",[e._v("批量删除\n            ")])])],1),e._v(" "),o("el-table",{ref:"role",staticStyle:{margin:"10px 0px"},attrs:{stripe:!0,border:!0,height:e.tableHeight,"header-cell-style":{background:"#E6F4FF",fontWeight:"500",color:"#0A51C4",borderBottom:"2px solid #4093F7"},data:e.roleData},on:{"selection-change":e.handleChange}},[o("el-table-column",{attrs:{type:"selection"}}),e._v(" "),o("el-table-column",{attrs:{label:"角色名称",prop:"title",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{label:"描述",prop:"memo",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{label:"添加时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e.gcomm.v2datetimestr(t.row.addtime))+"\n                ")])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"是否启用",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-radio-group",{on:{change:function(o){e.roleEnableSet(t.row)}},model:{value:t.row.enable,callback:function(o){e.$set(t.row,"enable",o)},expression:"scope.row.enable"}},[o("el-radio",{attrs:{label:"t"}},[o("span",[e._v("是\n                        ")])]),e._v(" "),o("el-radio",{attrs:{label:"f"}},[o("span",[e._v("否\n                        ")])])],1)]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"操作","min-width":"100%",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"small"},on:{click:function(o){e.handleRoleEdit(t.$index,t.row)}}},[o("span",[e._v("修改\n                    ")])]),e._v(" "),o("el-button",{attrs:{size:"small"},on:{click:function(o){e.jurisdiction(t.$index,t.row)}}},[o("span",[e._v("查看权限\n                    ")])]),e._v(" "),o("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(o){e.handleRoleDel(t.$index,t.row)}}},[o("span",[e._v("删除\n                    ")])])]}}])})],1),e._v(" "),o("div",{staticStyle:{"text-align":"center"}},[o("el-pagination",{attrs:{total:e.roleTotalRec,"page-count":e.roleTotalPage,layout:"total, sizes, prev, pager, next"},on:{"size-change":e.roleSizeChange,"current-change":e.roleCurChange}})],1),e._v(" "),o("el-dialog",{attrs:{visible:e.roleEditShow,title:"角色编辑","append-to-body":!0},on:{"update:visible":function(t){e.roleEditShow=t}}},[e.roleEditShow?o("roleedit",{attrs:{paramsObj:e.roleEditInst},on:{submitOk:e.roleEditOK,submitClose:e.roleEditClose}}):e._e()],1)],1)},[],!1,null,"eb632b36",null);u.options.__file="index.vue";t.default=u.exports}}]);