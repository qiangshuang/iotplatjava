(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2dfc"],{KNwu:function(t,e,o){"use strict";var a=o("s3Ke");o.n(a).a},Obdq:function(t,e,o){"use strict";o.r(e);var a=o("YEIV"),n=o.n(a),l={name:"",mixins:[o("y2a5").a],components:{},props:{},data:function(){var t;return t={showUploadPercent:!1,selFileName:"",importData:[],num:0,success:0,fail:0,repeat:0,uploadFile:"",uploadPercent:0,uploadText:""},n()(t,"showUploadPercent",!1),n()(t,"uploadError",!1),t},mounted:function(){},methods:{importfxx:function(t){this.uploadFile=document.getElementById("upload").files[0],this.selFileName=this.uploadFile.name},SizeChange:function(){},CurChange:function(){},exportExcel:function(){var t=document.createElement("a");t.href="/static/upload.xlsx",t.click()},uploadOk:function(){var t=this;console.log("uploadfiless:",this.uploadFile),this.uploadFile?(this.showUploadPercent=!0,this.uploadText="上传中 ",this.apiSrv.fileUpload("/hyimportzip?btnEncode=headupload&relateType=importzip&fi=add","",[this.uploadFile],"",null,null,this.uploadProcess).then(function(e){if(console.log("retJson:",e),t.uploadPercent=100,t.uploadText="上传中 "+t.uploadPercent+"%",t.showUploadPercent=!1,t.importData=e.data||[],t.num=0,t.success=0,t.fail=0,t.repeat=0,t.importData){t.num=t.importData.length;for(var o=0;o<t.importData.length;o++)"成功"==t.importData[o].state&&(t.success=t.success+1),"失败"==t.importData[o].state&&(t.fail=t.fail+1),"重复"==t.importData[o].state&&(t.repeat=t.repeat+1)}}).catch(function(e){console.log("err:",e),t.uploadText=e.Msg,t.uploadError=!0})):this.$message.info("请先选择上传文件包.")},uploadProcess:function(t){t.lengthComputable&&(this.uploadPercent=Math.round(t.loaded/t.total*100),this.uploadPercent>=100&&(this.uploadPercent=100),this.uploadText="上传中 "+this.uploadPercent+"%")},genDownUrl:function(t){if(!t||t.length<1)return"";var e=t.split(";");return!e||e.length<2?"":this.hysrvport+"/hydownload?btnEncode=headupload&relateType=camera&filename="+e[1]+"&Authorization="+this.apiSrv.token}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},i=(o("KNwu"),o("KHd+")),r=Object(i.a)(l,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-container",{attrs:{direction:"vertical"}},[o("el-row",{attrs:{autogenchild:!1,childcol:24}},[o("span",[t._v("提示：上传zip压缩包内容：Excel文件名称为upload.xlsx,图片为JPG格式,文件名为身份证+.JPG\n        ")])]),t._v(" "),o("div",{staticStyle:{margin:"10px 0px"}},[o("span",[t._v("请先\n        ")]),t._v(" "),o("el-button",{on:{click:t.exportExcel}},[o("span",[t._v("下载模板和教程\n            ")])]),t._v(" "),o("span",[t._v("仔细阅读后，按要求填写人员信息，并上传人员信息表格和图片\n        ")])],1),t._v(" "),o("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-bottom":"6px"}},[o("div",{staticStyle:{display:"flex",height:"36px","line-height":"35px"}},[o("span",[t._v("上传的文件：\n            ")]),t._v(" "),o("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"文件路径"},model:{value:t.selFileName,callback:function(e){t.selFileName=e},expression:"selFileName"}}),t._v(" "),o("label",{staticStyle:{position:"relative"},attrs:{"目标控件":"upload"}},[o("el-input",{ref:"upload",staticStyle:{left:"0",top:"0",opacity:"0",position:"absolute"},attrs:{type:"file",id:"upload"},on:{change:t.importfxx}}),t._v(" "),o("el-button",{staticStyle:{"margin-left":"6px","margin-right":"6px"}},[o("span",[t._v("选择文件\n                    ")])])],1),t._v(" "),o("el-button",{on:{click:t.uploadOk}},[o("span",[t._v("确认上传\n                ")])])],1),t._v(" "),o("div",[o("span",[t._v("上传共\n            ")]),t._v(" "),o("span",[t._v(t._s(t.num)+"\n            ")]),t._v(" "),o("span",[t._v("条  成功\n            ")]),t._v(" "),o("span",{staticStyle:{color:"green"}},[t._v(t._s(t.success)+"\n            ")]),t._v(" "),o("span",{staticStyle:{color:"green"}},[t._v("条\n            ")]),t._v(" "),o("span",[t._v("失败\n            ")]),t._v(" "),o("span",{staticStyle:{color:"red"}},[t._v(t._s(t.fail)+"\n            ")]),t._v(" "),o("span",{staticStyle:{color:"red"}},[t._v("条\n            ")]),t._v(" "),o("span",[t._v("重复\n            ")]),t._v(" "),o("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.repeat)+"\n            ")]),t._v(" "),o("span",{staticStyle:{color:"blue"}},[t._v("条\n            ")])])]),t._v(" "),o("el-table",{attrs:{data:t.importData,"header-cell-style":{background:"rgba(241,246,254,1)",fontWeight:"500",color:"#333333",fontSize:"16px","text-align":"center"}}},[o("el-table-column",{attrs:{label:"姓名",prop:"title",align:"center","show-overflow-tooltip":!0}}),t._v(" "),o("el-table-column",{attrs:{label:"性别",prop:"gender",align:"center","show-overflow-tooltip":!0}}),t._v(" "),o("el-table-column",{attrs:{label:"身份证号",prop:"idnumber",align:"center","show-overflow-tooltip":!0}}),t._v(" "),o("el-table-column",{attrs:{label:"工号",prop:"user_nam",align:"center","show-overflow-tooltip":!0}}),t._v(" "),o("el-table-column",{attrs:{label:"手机号",prop:"mobile",align:"center","show-overflow-tooltip":!0}}),t._v(" "),o("el-table-column",{attrs:{label:"图片",prop:"image",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.photo&&e.row.photo.length>0?o("img",{staticStyle:{width:"100px",height:"50px"},attrs:{src:t.genDownUrl(e.row.photo)}}):t._e()]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"状态",prop:"state",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["失败"==e.row.state?o("span",{staticStyle:{color:"#F56C6C"}},[t._v(t._s(e.row.state)+"\n                ")]):t._e(),t._v(" "),"重复"==e.row.state?o("span",{staticStyle:{color:"#409EFF"}},[t._v(t._s(e.row.state)+"\n                ")]):t._e(),t._v(" "),"成功"==e.row.state?o("span",{staticStyle:{color:"#67C23A"}},[t._v(t._s(e.row.state)+"\n                ")]):t._e()]}}])})],1),t._v(" "),o("el-dialog",{attrs:{visible:t.showUploadPercent,"show-close":!1},on:{"update:visible":function(e){t.showUploadPercent=e}}},[o("div",{staticStyle:{display:"block",width:"100%","text-align":"center"}},[o("svg-icon",{staticStyle:{margin:"20px 0px"},attrs:{"icon-class":"s4",color:"#52B2DC","font-size":"50px"}}),t._v(" "),t.uploadError?t._e():o("el-progress",{attrs:{percentage:t.uploadPercent}}),t._v(" "),o("span",{staticStyle:{display:"block",margin:"20px 0px"}},[t._v(t._s(t.uploadText)+"\n            ")]),t._v(" "),t.uploadError?o("el-button",{on:{click:function(e){t.showUploadPercent=!1,t.uploadError=!1}}},[o("span",[t._v("确定\n                ")])]):t._e()],1)])],1)},[],!1,null,"5a44b561",null);r.options.__file="index.vue";e.default=r.exports},"RU/L":function(t,e,o){o("Rqdy");var a=o("WEpk").Object;t.exports=function(t,e,o){return a.defineProperty(t,e,o)}},Rqdy:function(t,e,o){var a=o("Y7ZC");a(a.S+a.F*!o("jmDH"),"Object",{defineProperty:o("2faE").f})},SEkw:function(t,e,o){t.exports={default:o("RU/L"),__esModule:!0}},YEIV:function(t,e,o){"use strict";e.__esModule=!0;var a=function(t){return t&&t.__esModule?t:{default:t}}(o("SEkw"));e.default=function(t,e,o){return e in t?(0,a.default)(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}},s3Ke:function(t,e,o){}}]);