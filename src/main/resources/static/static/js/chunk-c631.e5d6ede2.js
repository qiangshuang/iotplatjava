(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-c631"],{"/yr2":function(t,n,e){"use strict";var a=e("9oUA");e.n(a).a},"9oUA":function(t,n,e){},bxv5:function(t,n,e){"use strict";e.r(n);var a=e("EJiy"),o=e.n(a),i=e("gDS+"),l=e.n(i),r={name:"iotman",mixins:[e("y2a5").a],components:{},props:{},data:function(){return{iotmanData:[],iotmanTotalRec:0,iotmanTotalPage:0,iotmanRecOfPage:10,iotmanCurPage:1,iotmanCbPage:this.gen_list_cb("iotman"),iotmanQueryArr:[{name:"title",val:"",op:"like",tb:"iotman"}],iotmanQueryInit:[{name:"title",val:"",op:"like",tb:"iotman"}],iotmanMultiSel:[],iotmanSortParas:[{name:"id",tb:"iotman",orderV:"desc"}],tableHeight:window.innerHeight-500}},mounted:function(){this.refreshPage("iotman","/actq","iotmanlist")},methods:{iotmanMultiSelChange:function(t){this.iotmanMultiSel=t},iotmanQuery:function(){this.refreshPage2("iotman","/actq",this.remoteRecOfPage,1,"iotmanlist")},iotmanResetQuery:function(){this.iotmanQueryArr=JSON.parse(l()(this.iotmanQueryInit))},iotmanSizeChange:function(t){this.refreshPage2("iotman","/actq",t,this.iotmanCurPage,"iotmanlist")},iotmanCurChange:function(t){this.refreshPage2("iotman","/actq",this.iotmanRecOfPage,t,"iotmanlist")},add:function(){this.$router.push({name:"iotmanedit"})},handleIotmanEdit:function(t,n){var e;e=JSON.parse(l()(n)),console.log("编辑过去数据",e),this.$router.push({name:"iotmanedit",params:e})},handleDel:function(t,n){var e=this,a=n;console.log("哈哈",n),this.$confirm("此操作将删除该项数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={_hy:"iotmandel",iotman:[{name:"id",val:[a.id],op:"in"}]};console.log("upData:",t),e.callSrvAct("/act",t).then(function(t){e.refreshPage("iotman","/actq","iotmanlist")})}).catch(function(t){e.$message.error(t)})},show3:function(){var t=this;console.log("多选ID",this.iotmanMultiSel);var n=this;this.$confirm("此操作将删除该项数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={_hy:"iotmandel",iotman:[{name:"id",val:n.iotmanMultiSel,op:"in"}]};console.log("upData:",e),t.callSrvAct("/act",e).then(function(n){t.refreshPage("iotman","/actq","iotmanlist")})}).catch(function(n){t.$message.error(n)})},handleChange:function(t){console.log("hahaha",t);for(var n=[],e=0;e<t.length;e++)n.push(t[e].id);this.iotmanMultiSel=n,this.dataArr=t,console.log("qqq",t)},importing:function(){this.$router.push({name:"iotmanimport"})},exporting:function(){for(var t=[],n=0;n<this.iotmanData.length;n++)t.push({"设备名称":this.iotmanData[n].title,"设备描述":this.iotmanData[n].equdes,"设备IP":this.iotmanData[n].equip,"厂商":this.iotmanData[n].factory,"最后通信时间":this.iotmanData[n].lasttime,"工作时长":this.iotmanData[n].workdur});var e=XLSX.utils.json_to_sheet(t);console.log(e),this.openDownloadDialog(this.sheet2blob(e),"下载1.xlsx")},sheet2blob:function(t,n){var e={SheetNames:[n=n||"sheet1"],Sheets:{}};e.Sheets[n]=t;var a=XLSX.write(e,{bookType:"xlsx",bookSST:!1,type:"binary"});return new Blob([function(t){for(var n=new ArrayBuffer(t.length),e=new Uint8Array(n),a=0;a!=t.length;++a)e[a]=255&t.charCodeAt(a);return n}(a)],{type:"application/octet-stream"})},openDownloadDialog:function(t,n){"object"==(void 0===t?"undefined":o()(t))&&t instanceof Blob&&(t=URL.createObjectURL(t));var e,a=document.createElement("a");a.href=t,a.download=n||"",window.MouseEvent?e=new MouseEvent("click"):(e=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(e)},search:function(){this.refreshPage("iotman","/actq","iotmanlist")},handleClick:function(t){var n,e=t;console.log("查看数据",e),n=JSON.parse(l()(e)),console.log("传递数据",n),this.$router.push({name:"iotdet",params:n})}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},c=(e("/yr2"),e("KHd+")),s=Object(c.a)(r,function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("el-container",{staticStyle:{height:"100%"},attrs:{direction:"vertical"}},[e("div",[e("span",[t._v("设备名称\n        ")]),t._v(" "),e("el-input",{staticStyle:{width:"300px"},model:{value:t.iotmanQueryArr[0].val,callback:function(n){t.$set(t.iotmanQueryArr[0],"val",n)},expression:"iotmanQueryArr[0].val"}}),t._v(" "),e("span",[t._v("设备状态\n        ")]),t._v(" "),e("el-select",[e("el-option")],1),t._v(" "),e("el-button",{staticStyle:{"margin-left":"30px"},on:{click:t.search}},[e("span",[t._v("搜索\n            ")])])],1),t._v(" "),e("div",{staticStyle:{"margin-top":"20px"}},[e("el-button",{on:{click:t.add}},[e("span",[t._v("新增\n            ")])]),t._v(" "),e("el-button",{on:{click:t.show3}},[e("span",[t._v("批量删除\n            ")])]),t._v(" "),e("el-button",{on:{click:t.importing}},[e("span",[t._v("批量导入\n            ")])]),t._v(" "),e("el-button",{on:{click:t.exporting}},[e("span",[t._v("批量导出\n            ")])])],1),t._v(" "),e("el-table",{ref:"iotman",staticStyle:{"margin-top":"10px"},attrs:{stripe:!0,border:!0,height:t.tableHeight,"header-cell-style":{background:"#E6F4FF",fontWeight:"500",color:"#0A51C4",borderBottom:"2px solid #4093F7"},data:t.iotmanData},on:{"selection-change":t.handleChange}},[e("el-table-column",{attrs:{label:"全选",type:"selection"}}),t._v(" "),e("el-table-column",{attrs:{label:"设备名称",prop:"title",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{label:"设备描述",prop:"equdes",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{label:"设备IP",prop:"equip",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{label:"厂商",prop:"factory",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{label:"最后通信时间",prop:"lasttime",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{label:"工作时长",prop:"workdur",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("div",{staticStyle:{"margin-top":"10px"}},[e("el-button",{attrs:{size:"mini"},on:{click:function(e){t.handleClick(n.row)}}},[e("span",[t._v("查看\n                        ")])]),t._v(" "),e("el-button",{attrs:{size:"mini"},on:{click:function(e){t.handleIotmanEdit(n.$index,n.row)}}},[e("span",[t._v("编辑\n                        ")])]),t._v(" "),e("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){t.handleDel(n.$index,n.row)}}},[e("span",[t._v("删除\n                        ")])])],1)]}}])})],1),t._v(" "),e("el-pagination",{staticStyle:{"text-align":"center"},attrs:{total:t.iotmanTotalRec,"page-count":t.iotmanTotalPage,layout:"total, sizes, prev, pager, next"},on:{"size-change":t.iotmanSizeChange,"current-change":t.iotmanCurChange}})],1)},[],!1,null,"69751017",null);s.options.__file="index.vue";n.default=s.exports}}]);