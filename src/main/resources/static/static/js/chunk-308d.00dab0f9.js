(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-308d","chunk-7117"],{QGih:function(t,e,a){"use strict";var i=a("p/JN");a.n(i).a},Qbk3:function(t,e,a){},"RU/L":function(t,e,a){a("Rqdy");var i=a("WEpk").Object;t.exports=function(t,e,a){return i.defineProperty(t,e,a)}},Rqdy:function(t,e,a){var i=a("Y7ZC");i(i.S+i.F*!a("jmDH"),"Object",{defineProperty:a("2faE").f})},SEkw:function(t,e,a){t.exports={default:a("RU/L"),__esModule:!0}},X898:function(t,e,a){"use strict";a.r(e);var i=a("P2sY"),n=a.n(i),l=a("YEIV"),r=a.n(l),o=a("YxVA"),s={name:"addequ",mixins:[a("y2a5").a],components:{Selecatw:o.default},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){var t,e;return e={newEqumanForm:(t={id:0,equ_id:"",titel:"",category_id:0,firm_id:"",devcode:"",region_title:0,stream_title:""},r()(t,"region_title",""),r()(t,"ipandport",""),r()(t,"equipment",""),r()(t,"accesscode",""),r()(t,"site",""),r()(t,"site",""),t),equmanForm:{},active1:!1,selecatwEdit:null},r()(e,"newEqumanForm",{id:0,equ_id:"",titel:"",category_id:"",firm_id:"",region_title:"",ipandport:"",equipment:"",accesscode:"",site:"",stream_id:""}),r()(e,"typeArr",["温度传感器","振动传感器","粉尘传感器","气体传感器","噪声传感器"]),r()(e,"equmanForm",{}),r()(e,"regionArr",[]),e},mounted:function(){var t=this;this.pObj=n()({},this.paramsObj),this.gcomm.mapLength(this.pObj)>0?(this.isInDialog=!0,this.equmanForm=n()({},this.newEqumanForm,this.pObj)):this.equmanForm=n()({},this.newEqumanForm,this.$route.params),this.callSrvAct("/regionlist",{title:"",cp:0,rop:10}).then(function(e){console.log("区域",e),t.regionArr=e.data||[]})},methods:{pObjChanged:function(){this.gcomm.mapLength(this.pObj)>0&&(this.isInDialog=!0,this.equmanForm=n()({},this.newEqumanForm,this.pObj))},handleChange1:function(t){console.log(t);for(var e=0;e<this.regionArr.length;e++)this.regionArr[e].title==t&&(this.equmanForm.region_id=this.regionArr[e].id)},handleClose1:function(){},selecatwSet:function(){},seOK:function(t){console.log("数据",t),console.log("数据123",t),this.equmanForm.stream_title="",this.active1=!1;for(var e=0;e<t.length;e++)""==this.equmanForm.stream_title?(this.equmanForm.stream_title=t[e].datatitle,this.equmanForm.stream_id=t[e].id):(this.equmanForm.stream_title=this.equmanForm.stream_title+","+t[e].datatitle,console.log("哈哈哈",this.equmanForm.stream_title),this.equmanForm.stream_id=this.equmanForm.stream_id+","+t[e].id,console.log("哈哈哈haha",this.equmanForm.stream_id))},handleClick1:function(){this.active1=!0},genUploadUrl:function(t){return this.hysrvport+"/hyupload?btnEncode=headupload&relateType=camera&fi=add&Authorization="+this.apiSrv.token},handleAvatarSuccess:function(t,e){this.equmanForm.site=t.data},genDownUrl:function(t){if(!t||t.length<1)return"";var e=t.split(";");return!e||e.length<2?"":this.hysrvport+"/hydownload?btnEncode=headupload&relateType=camera&filename="+e[1]+"&Authorization="+this.apiSrv.token},handleClick:function(){this.submitBasemanForm("equmanForm")},submitBasemanForm:function(t){var e=this;this.$refs[t].validate(function(a){if(!a)return!1;e.submitBasemanFormImpl(t)})},submitBasemanFormImpl:function(t){var e=this,a=void 0,i=!0,l="";this[t].id>0?(a="/act",i=!1,l="equup"):(a="/act",l="equadd");var r=n()({},this[t]);r._hy=l,this.callSrvAct(a,r).then(function(t){console.log("res:",t,e.isInDialog),e.isInDialog?i?t.data&&t.data.inst?e.$emit("submitOk",t.data.inst):t.data&&e.$emit("submitOk",t.data||{}):e.$emit("submitOk",r):e.$router.go(-1)})}},watch:{paramsObj:function(t){this.pObj.id!=this.paramsObj.id&&(this.pObj=n()({},this.paramsObj),this.pObjChanged())}},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},u=(a("QGih"),a("KHd+")),c=Object(u.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{attrs:{direction:"vertical"}},[a("el-form",{ref:"equmanForm",attrs:{model:t.equmanForm,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"设备ID：",prop:"equ_id"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.equmanForm.equ_id,callback:function(e){t.$set(t.equmanForm,"equ_id",e)},expression:"equmanForm.equ_id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"设备名称：",prop:"titel"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.equmanForm.titel,callback:function(e){t.$set(t.equmanForm,"titel",e)},expression:"equmanForm.titel"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"设备类型：",prop:"category_id"}},[a("el-select",{staticStyle:{width:"300px"},model:{value:t.equmanForm.category_id,callback:function(e){t.$set(t.equmanForm,"category_id",e)},expression:"equmanForm.category_id"}},t._l(t.typeArr,function(t,e){return a("el-option",{key:t,attrs:{label:t,value:t}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"厂商：",prop:"firm_id"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.equmanForm.firm_id,callback:function(e){t.$set(t.equmanForm,"firm_id",e)},expression:"equmanForm.firm_id"}})],1),t._v(" "),t._e(),t._v(" "),a("el-form-item",{attrs:{label:"区域：",prop:"region_title"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择区域"},on:{change:t.handleChange1},model:{value:t.equmanForm.region_title,callback:function(e){t.$set(t.equmanForm,"region_title",e)},expression:"equmanForm.region_title"}},t._l(t.regionArr,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.title}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"触发数据流：",prop:"stream_title",rules:{required:!0,trigger:"input"}}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.equmanForm.stream_title,callback:function(e){t.$set(t.equmanForm,"stream_title",e)},expression:"equmanForm.stream_title"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:""}},[a("el-button",{on:{click:t.handleClick1}},[a("span",[t._v("选择数据流\n                ")])])],1),t._v(" "),a("el-form-item",{attrs:{label:"区域：",prop:"region_title"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.equmanForm.region_title,callback:function(e){t.$set(t.equmanForm,"region_title",e)},expression:"equmanForm.region_title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"IP地址及端口号：",prop:"ipandport"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.equmanForm.ipandport,callback:function(e){t.$set(t.equmanForm,"ipandport",e)},expression:"equmanForm.ipandport"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"设备型号：",prop:"equipment"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.equmanForm.equipment,callback:function(e){t.$set(t.equmanForm,"equipment",e)},expression:"equmanForm.equipment"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"接入协议：",prop:"accesscode"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.equmanForm.accesscode,callback:function(e){t.$set(t.equmanForm,"accesscode",e)},expression:"equmanForm.accesscode"}})],1),t._v(" "),t._e(),t._v(" "),a("el-form-item",{attrs:{label:"位置信息",prop:"site"}},[a("el-upload",{ref:"box",staticStyle:{border:"1px solid #d9d9d9","border-radius":"6px",cursor:"pointer",position:"relative",overflow:"hidden",width:"100%",height:"178px","line-height":"178px","text-align":"center"},attrs:{action:t.genUploadUrl(),multiple:!1,"on-success":t.handleAvatarSuccess,limit:0,id:"box"}},[t.equmanForm.site?a("img",{staticStyle:{"object-fit":"fill"},attrs:{src:t.genDownUrl(t.equmanForm.site)}}):a("svg-icon",{staticStyle:{"font-size":"28px",color:"#8c939d"},attrs:{"icon-class":"add"}}),t._v(" "),t.equmanForm.site?a("span",{ref:"clos",staticStyle:{position:"absolute",top:"0px",right:"0px"},attrs:{id:"clos"}},[a("i",{staticClass:"el-icon-close",staticStyle:{position:"absolute",top:"0px",right:"0px"},on:{click:function(e){return e.stopPropagation(),t.close(e)}}})]):t._e()],1)],1)],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{"margin-left":"150px"},attrs:{type:"primary"},on:{click:t.handleClick}},[a("span",[t._v("提交\n            ")])]),t._v(" "),a("el-button",[a("span",[t._v("重置\n            ")])])],1),t._v(" "),a("el-dialog",{attrs:{visible:t.active1,title:"选择数据流","modal-append-to-body":!1,close:t.handleClose1},on:{"update:visible":function(e){t.active1=e}}},[a("selecatw",{attrs:{paramsObj:t.selecatwEdit},on:{submitOk:t.seOK,submitClose:t.selecatwSet}})],1)],1)},[],!1,null,"a6071026",null);c.options.__file="index.vue";e.default=c.exports},YEIV:function(t,e,a){"use strict";e.__esModule=!0;var i=function(t){return t&&t.__esModule?t:{default:t}}(a("SEkw"));e.default=function(t,e,a){return e in t?(0,i.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},YxVA:function(t,e,a){"use strict";a.r(e);var i=a("gDS+"),n=a.n(i),l=a("YEIV"),r=a.n(l),o={name:"selecatw",mixins:[a("y2a5").a],components:{},props:{paramsObj:{type:Array,default:function(){return[]}}},data:function(){return r()({pObj:null,dataflData:[],dataflTotalRec:0,dataflTotalPage:0,dataflRecOfPage:10,dataflCurPage:1,dataflCbPage:this.gen_list_cb("datafl"),dataflQueryArr:[{name:"datatitle",val:"",op:"like",tb:"dataflow"},{name:"id",val:0,tb:"dataflow"}],dataflQueryInit:[{name:"datatitle",val:"",op:"like",tb:"dataflow"},{name:"id",val:0,tb:"dataflow"}],dataflMultiSel:[],dataflSortParas:[{name:"id",tb:"sensor_stream",orderV:"desc"}]},"dataflQueryArr",[{name:"datatitle",val:"",op:"like",tb:"dataflow"},{name:"id",val:0,tb:"dataflow"}])},mounted:function(){this.pObj=this.paramsObj,this.pObj?(this.isInDialog=!0,console.log("this.pObj:",this.pObj,this.pObj.length,this.pObj.length>0),this.pObj.length>0?(this.dataflQueryArr[1].val=this.pObj,this.dataflQueryArr[1].op="in"):(this.dataflQueryArr[1].val=0,this.dataflQueryArr[1].op="in")):(this.dataflQueryArr[1].val=0,this.dataflQueryArr[1].op="in"),this.refreshPage("datafl","/actq","datafllist")},methods:{dataflMultiSelChange:function(t){this.dataflMultiSel=t},dataflQuery:function(){this.refreshPage2("datafl","/actq",this.remoteRecOfPage,1,"datafllist")},dataflResetQuery:function(){this.dataflQueryArr=JSON.parse(n()(this.dataflQueryInit))},dataflSizeChange:function(t){this.refreshPage2("datafl","/actq",t,this.dataflCurPage,"datafllist")},dataflCurChange:function(t){this.refreshPage2("datafl","/actq",this.dataflRecOfPage,t,"datafllist")},pObjChanged:function(){this.pObj?(this.isInDialog=!0,console.log("this.pObj:",this.pObj,this.pObj.length,this.pObj.length>0),this.pObj.length>0?(this.dataflQueryArr[1].val=this.pObj,this.dataflQueryArr[1].op="in"):(this.dataflQueryArr[1].val=0,this.dataflQueryArr[1].op="in")):(this.dataflQueryArr[1].val=0,this.dataflQueryArr[1].op="in"),this.refreshPage("datafl","/actq","datafllist")},search:function(){this.refreshPage("datafl","/actq","datafllist")},handleChange:function(t){console.log("hahaha",t);for(var e=[],a=0;a<t.length;a++)e.push(t[a].id);this.dataflMultiSel=e,this.dataArr=t,console.log("qqq",t)},submit:function(){console.log("提交",this.dataArr),this.$emit("submitOk",this.dataArr)},close:function(){this.$emit("submitClose")}},watch:{paramsObj:function(t){this.pObj!=this.paramsObj&&(this.pObj=this.paramsObj,this.pObjChanged())}},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},s=(a("t4S4"),a("KHd+")),u=Object(s.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{attrs:{direction:"vertical"}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("span",[t._v("数据流名称\n        ")]),t._v(" "),a("el-input",{staticStyle:{width:"220px","margin-right":"10px"},model:{value:t.dataflQueryArr[0].val,callback:function(e){t.$set(t.dataflQueryArr[0],"val",e)},expression:"dataflQueryArr[0].val"}}),t._v(" "),a("el-button",{on:{click:t.search}},[a("span",[t._v("搜索\n            ")])])],1),t._v(" "),a("el-table",{ref:"datafl",attrs:{"header-cell-style":{background:"rgba(241,246,254,1)",fontWeight:"500",color:"#333333",fontSize:"16px"},data:t.dataflData},on:{"selection-change":t.handleChange}},[a("el-table-column",{attrs:{type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{label:"数据流值",prop:"dataval"}}),t._v(" "),a("el-table-column",{attrs:{label:"数据流名称",prop:"datatitle"}}),t._v(" "),a("el-table-column",{attrs:{label:"单位",prop:"company"}}),t._v(" "),a("el-table-column",{attrs:{label:"单位符号",prop:"comsym"}})],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-pagination",{staticStyle:{},attrs:{total:t.dataflTotalRec,"page-count":t.dataflTotalPage,layout:"total, sizes, prev, pager, next"},on:{"size-change":t.dataflSizeChange,"current-change":t.dataflCurChange}})],1),t._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[a("el-button",{staticStyle:{"background-color":"#317EF3"},on:{click:t.submit}},[a("span",{staticStyle:{color:"#ffffff"}},[t._v("提交\n            ")])]),t._v(" "),a("el-button",{on:{click:t.close}},[a("span",[t._v("取消\n            ")])])],1)],1)},[],!1,null,"c7547fd4",null);u.options.__file="index.vue";e.default=u.exports},"p/JN":function(t,e,a){},t4S4:function(t,e,a){"use strict";var i=a("Qbk3");a.n(i).a}}]);