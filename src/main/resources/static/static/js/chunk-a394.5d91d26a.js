(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-a394","chunk-5c2c","chunk-5093"],{EIrn:function(t,a,e){"use strict";var o=e("yG7q");e.n(o).a},Ex4g:function(t,a,e){"use strict";var o=e("RL0X");e.n(o).a},FQyy:function(t,a,e){"use strict";e.r(a);var o=e("EJiy"),n=e.n(o),l=e("P2sY"),i=e.n(l),r=e("gDS+"),s=e.n(r),c=e("YEIV"),u=e.n(c),f=e("Q3ra"),d=e("Y6Yy"),p={name:"datowtate",mixins:[e("y2a5").a],components:u()({Nlate:f.default,Dataflowimport:d.default},"Nlate",f.default),props:{},data:function(){return{dataflowData:[],dataflowTotalRec:0,dataflowTotalPage:0,dataflowRecOfPage:10,dataflowCurPage:1,dataflowCbPage:this.gen_list_cb("dataflow"),dataflowQueryArr:[{name:"datatitle",val:"",op:"like",tb:"dataflow"}],dataflowQueryInit:[{name:"datatitle",val:"",op:"like",tb:"dataflow"}],dataflowMultiSel:[],show:!1,nlateEdit:null,showimport:!1,importEdit:null,tableHeight:window.innerHeight-500}},mounted:function(){this.refreshPage("dataflow","/actq","dataflowlist")},methods:{dataflowMultiSelChange:function(t){this.dataflowMultiSel=t},dataflowQuery:function(){this.refreshPage2("dataflow","/actq",this.remoteRecOfPage,1,"dataflowlist")},dataflowResetQuery:function(){this.dataflowQueryArr=JSON.parse(s()(this.dataflowQueryInit))},dataflowSizeChange:function(t){this.refreshPage2("dataflow","/actq",t,this.dataflowCurPage,"dataflowlist")},dataflowCurChange:function(t){this.refreshPage2("dataflow","/actq",this.dataflowRecOfPage,t,"dataflowlist")},goback:function(){console.log("嘿嘿嘿"),this.show=!1},search:function(){this.refreshPage("dataflow","/actq","dataflowlist")},handledataflowEdit:function(t,a){this.nlateEdit=i()({},a),this.show=!0,this.nlateSet=!0},importing:function(){this.$router.push({name:"dataflowimport"})},importOk:function(){},importClose:function(){},exporting:function(){for(var t=[],a=0;a<this.dataflowData.length;a++)t.push({"数据流值":this.dataflowData[a].dataval,"数据流名称":this.dataflowData[a].datatitle,"单位":this.dataflowData[a].company,"单位符号":this.dataflowData[a].comsym,"关联设备数":this.dataflowData[a].equman});var e=XLSX.utils.json_to_sheet(t);console.log(e),this.openDownloadDialog(this.sheet2blob(e),"下载1.xlsx")},sheet2blob:function(t,a){var e={SheetNames:[a=a||"sheet1"],Sheets:{}};e.Sheets[a]=t;var o=XLSX.write(e,{bookType:"xlsx",bookSST:!1,type:"binary"});return new Blob([function(t){for(var a=new ArrayBuffer(t.length),e=new Uint8Array(a),o=0;o!=t.length;++o)e[o]=255&t.charCodeAt(o);return a}(o)],{type:"application/octet-stream"})},openDownloadDialog:function(t,a){"object"==(void 0===t?"undefined":n()(t))&&t instanceof Blob&&(t=URL.createObjectURL(t));var e,o=document.createElement("a");o.href=t,o.download=a||"",window.MouseEvent?e=new MouseEvent("click"):(e=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(e)},add:function(){this.show=!0,this.nlateEdit={id:0},console.log("数据哈哈哈",this.nlatEdit)},handleChange:function(t){console.log("hahaha",t);for(var a=[],e=0;e<t.length;e++)a.push(t[e].id);this.dataflowMultiSel=a,this.dataArr=t,console.log("qqq",t)},handledataflowDel:function(t,a){var e=this,o=a;this.$confirm("此操作将删除该项数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={_hy:"dataflowdel",dataflow:[{name:"id",val:[o.id],op:"in"}]};console.log("upData:",t),e.callSrvAct("/act",t).then(function(t){e.refreshPage("dataflow","/actq","dataflowlist")})}).catch(function(t){e.$message.error(t)})},show3:function(){var t=this;console.log("多选ID",this.dataflowMultiSel);var a=this;this.$confirm("此操作将删除该项数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={_hy:"dataflowdel",dataflow:[{name:"id",val:a.dataflowMultiSel,op:"in"}]};console.log("upData:",e),t.callSrvAct("/act",e).then(function(a){t.refreshPage("dataflow","/actq","dataflowlist")})}).catch(function(a){t.$message.error(a)})},nlateOK:function(){this.show=!1,this.refreshPage("dataflow","/actq","dataflowlist")},nlateSet:function(){this.show=!1}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},h=(e("TbDt"),e("KHd+")),m=Object(h.a)(p,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-container",{staticStyle:{height:"100%"},attrs:{direction:"vertical"}},[e("div",[e("span",[t._v("名称\n        ")]),t._v(" "),e("el-input",{staticStyle:{width:"200px"},model:{value:t.dataflowQueryArr[0].val,callback:function(a){t.$set(t.dataflowQueryArr[0],"val",a)},expression:"dataflowQueryArr[0].val"}}),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.search}},[e("span",[t._v("搜索\n            ")])])],1),t._v(" "),e("div",{staticStyle:{margin:"10px 0px"}},[e("el-button",{on:{click:t.add}},[e("span",[t._v("新增\n            ")])]),t._v(" "),e("el-button",{attrs:{type:"danger"},on:{click:t.show3}},[e("span",[t._v("批量删除\n            ")])]),t._v(" "),t._e(),t._v(" "),t._e()],1),t._v(" "),e("el-table",{ref:"dataflow",attrs:{stripe:!0,border:!0,height:t.tableHeight,"header-cell-style":{background:"#E6F4FF",fontWeight:"500",color:"#0A51C4",borderBottom:"2px solid #4093F7"},data:t.dataflowData},on:{"selection-change":t.handleChange}},[e("el-table-column",{attrs:{type:"selection"}}),t._v(" "),e("el-table-column",{attrs:{label:"数据流值",prop:"dataval",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{label:"数据流名称",prop:"datatitle",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{label:"单位",prop:"company",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{label:"单位符号",prop:"comsym",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{label:"关联设备数",prop:"equman",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticStyle:{"margin-top":"10px"}},[e("el-button",{attrs:{size:"small"},on:{click:function(e){t.handledataflowEdit(a.$index,a.row)}}},[e("span",[t._v("编辑\n                        ")])]),t._v(" "),e("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){t.handledataflowDel(a.$index,a.row)}}},[e("span",[t._v("删除\n                        ")])])],1)]}}])})],1),t._v(" "),e("el-pagination",{staticStyle:{"text-align":"center"},attrs:{total:t.dataflowTotalRec,"page-count":t.dataflowTotalPage,layout:"total, sizes, prev, pager, next"},on:{"size-change":t.dataflowSizeChange,"current-change":t.dataflowCurChange}}),t._v(" "),t.show?e("el-dialog",{attrs:{visible:t.show,title:"新增数据流模板"},on:{"update:visible":function(a){t.show=a}}},[e("nlate",{attrs:{paramsObj:t.nlateEdit},on:{submitOk:t.nlateOK,submitClose:t.nlateSet,submitclos:t.goback}})],1):t._e(),t._v(" "),e("el-dialog",{attrs:{visible:t.showimport,title:"导入"},on:{"update:visible":function(a){t.showimport=a}}},[e("dataflowimport",{attrs:{paramsObj:t.importEdit},on:{submitOk:t.importOk,submitClose:t.importClose}})],1)],1)},[],!1,null,"65d3f0bc",null);m.options.__file="index.vue";a.default=m.exports},Q3ra:function(t,a,e){"use strict";e.r(a);var o=e("P2sY"),n=e.n(o),l={name:"nlate",mixins:[e("y2a5").a],components:{},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){return{newDataflowForm:{id:0,dataval:"",datatitle:"",company:"",comsym:""},dataflowForm:{}}},mounted:function(){this.pObj=n()({},this.paramsObj),this.gcomm.mapLength(this.pObj)>0?(this.isInDialog=!0,this.dataflowForm=n()({},this.newDataflowForm,this.pObj)):this.dataflowForm=n()({},this.newDataflowForm,this.$route.params)},methods:{pObjChanged:function(){this.gcomm.mapLength(this.pObj)>0&&(this.isInDialog=!0,this.dataflowForm=n()({},this.newDataflowForm,this.pObj))},handleClick12:function(){this.submitOrgForm("dataflowForm")},submitOrgForm:function(t){var a=this;this.$refs[t].validate(function(e){if(!e)return!1;a.submitOrgFormImpl(t)})},submitOrgFormImpl:function(t){var a=this,e=void 0,o=!0,l="";this[t].id>0?(e="/act",o=!1,l="dataflowup"):(e="/act",l="dataflowadd",this[t].state="关闭");var i=n()({},this[t]);i._hy=l,this.callSrvAct(e,i).then(function(t){a.isInDialog?o?t.data&&t.data.inst?(console.log("1111111111"),a.$emit("submitOk",t.data.inst)):t.data&&(console.log("22222222222"),a.$emit("submitOk",t.data||{})):a.$emit("submitOk",i):a.$router.go(-1)})},goClick:function(){this.$emit("submitclos")}},watch:{paramsObj:function(t){this.pObj.id!=this.paramsObj.id&&(this.pObj=n()({},this.paramsObj),this.pObjChanged())}},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},i=(e("EIrn"),e("KHd+")),r=Object(i.a)(l,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-container",{attrs:{direction:"vertical"}},[e("el-form",{ref:"dataflowForm",attrs:{model:t.dataflowForm,"label-width":"120px"}},[e("el-form-item",{attrs:{label:"数据流值：",prop:"dataval"}},[e("el-input",{model:{value:t.dataflowForm.dataval,callback:function(a){t.$set(t.dataflowForm,"dataval",a)},expression:"dataflowForm.dataval"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"数据流名称：",prop:"datatitle"}},[e("el-input",{model:{value:t.dataflowForm.datatitle,callback:function(a){t.$set(t.dataflowForm,"datatitle",a)},expression:"dataflowForm.datatitle"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"单位名称：",prop:"company"}},[e("el-input",{model:{value:t.dataflowForm.company,callback:function(a){t.$set(t.dataflowForm,"company",a)},expression:"dataflowForm.company"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"单位符号：",prop:"comsym"}},[e("el-input",{model:{value:t.dataflowForm.comsym,callback:function(a){t.$set(t.dataflowForm,"comsym",a)},expression:"dataflowForm.comsym"}})],1)],1),t._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("el-button",{staticStyle:{"background-color":"#317EF3"},on:{click:t.handleClick12}},[e("span",{staticStyle:{color:"#ffffff"}},[t._v("提交\n            ")])]),t._v(" "),e("el-button",{on:{click:t.goClick}},[e("span",[t._v("取消\n            ")])])],1)],1)},[],!1,null,"f1c2a4d2",null);r.options.__file="index.vue";a.default=r.exports},RL0X:function(t,a,e){},"RU/L":function(t,a,e){e("Rqdy");var o=e("WEpk").Object;t.exports=function(t,a,e){return o.defineProperty(t,a,e)}},Rqdy:function(t,a,e){var o=e("Y7ZC");o(o.S+o.F*!e("jmDH"),"Object",{defineProperty:e("2faE").f})},SEkw:function(t,a,e){t.exports={default:e("RU/L"),__esModule:!0}},TbDt:function(t,a,e){"use strict";var o=e("Ufh3");e.n(o).a},Ufh3:function(t,a,e){},Y6Yy:function(t,a,e){"use strict";e.r(a);var o=e("P2sY"),n=e.n(o),l=e("EJiy"),i=e.n(l),r={name:"dataflowimport",mixins:[e("y2a5").a],components:{},props:{},data:function(){return{importData:[],num:0,success:0,fail:0,repeat:0}},mounted:function(){},methods:{importfxx:function(t){var a=this;a.num=0,a.success=0,a.fail=0,a.repeat=0,console.log(this.$refs.upload.value),this.file=event.currentTarget.files[0],console.log(this.file);var e=this.file,o=new FileReader;FileReader.prototype.readAsBinaryString=function(t){var e,o,n="";window.console.log(this);var l=new FileReader;l.onload=function(t){window.console.log(t);for(var i=new Uint8Array(l.result),r=i.byteLength,s=0;s<r;s++)n+=String.fromCharCode(i[s]);e=XLSX.read(n,{type:"binary"}),o=XLSX.utils.sheet_to_json(e.Sheets[e.SheetNames[0]]),window.console.log("呵呵呵",o),console.log("哈哈哈",o);for(var c=[],u=0;u<o.length;u++)c.push({dataval:o[u].数据流值,datatitle:o[u].数据流名称,company:o[u].单位,comsym:o[u].单位符号,equman:o[u].关联设备数});window.console.log(c),a.importData=c,console.log(a.$refs.upload.value),console.log(document.getElementById("upload").value)},l.readAsArrayBuffer(t)},o.readAsBinaryString(e)},fixdata:function(t){for(var a="",e=0,o=10240;e<t.byteLength/o;++e)a+=String.fromCharCode.apply(null,new Uint8Array(t.slice(e*o,e*o+o)));return a+=String.fromCharCode.apply(null,new Uint8Array(t.slice(e*o)))},SizeChange:function(){},CurChange:function(){},exportExcel:function(){this.num=0,this.success=0,this.fail=0,this.repeat=0;var t=XLSX.utils.json_to_sheet([{"数据流值":"","数据流名称":"","单位":"","单位符号":"","关联设备数":""}]);console.log(t),this.openDownloadDialog(this.sheet2blob(t),"模板教程.xlsx")},sheet2blob:function(t,a){var e={SheetNames:[a=a||"sheet1"],Sheets:{}};e.Sheets[a]=t;var o=XLSX.write(e,{bookType:"xlsx",bookSST:!1,type:"binary"});return new Blob([function(t){for(var a=new ArrayBuffer(t.length),e=new Uint8Array(a),o=0;o!=t.length;++o)e[o]=255&t.charCodeAt(o);return a}(o)],{type:"application/octet-stream"})},openDownloadDialog:function(t,a){"object"==(void 0===t?"undefined":i()(t))&&t instanceof Blob&&(t=URL.createObjectURL(t));var e,o=document.createElement("a");o.href=t,o.download=a||"",window.MouseEvent?e=new MouseEvent("click"):(e=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(e)},uploadOk:function(){var t=this;this.num=0,this.success=0,this.fail=0,this.repeat=0,this.num=this.importData.length,console.log("上传数据",this.importData);for(var a=0;a<this.importData.length;a++){var e=n()({},this.importData[a]);console.log("数据",this.importData),e._hy="dataflowadd",this.callSrvAct("/act",e).then(function(a){console.log("后台返回",a),"SUCCESS"==a.status?t.success=t.success+1:"FAILED"==a.status&&(t.fail=t.fail+1)})}}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},s=(e("Ex4g"),e("KHd+")),c=Object(s.a)(r,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-container",{attrs:{direction:"vertical"}},[e("div",[e("el-row",{attrs:{autogenchild:!1,childcol:24}},[e("span",[t._v("提示：需保证上传的excel文件为单一文件\n            ")])]),t._v(" "),e("div",{staticStyle:{margin:"10px 0px"}},[e("span",[t._v("请先\n            ")]),t._v(" "),e("el-button",{on:{click:t.exportExcel}},[e("span",[t._v("下载模板和教程\n                ")])]),t._v(" "),e("span",[t._v("仔细阅读后，按要求填写车辆信息，并上传摄像机信息表格\n            ")])],1),t._v(" "),e("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[e("div",{staticStyle:{display:"flex",height:"36px","line-height":"35px"}},[e("span",[t._v("上传的文件：\n                ")]),t._v(" "),e("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"文件路径"}}),t._v(" "),e("el-input",{ref:"upload",attrs:{type:"file",id:"upload"},on:{change:function(a){t.importfxx(this)}}}),t._v(" "),e("el-button",{on:{click:t.uploadOk}},[e("span",[t._v("确认上传\n                    ")])])],1),t._v(" "),e("div",[e("span",[t._v("上传共\n                ")]),t._v(" "),e("span",[t._v(t._s(t.num)+"\n                ")]),t._v(" "),e("span",[t._v("条  成功\n                ")]),t._v(" "),e("span",{staticStyle:{color:"green"}},[t._v(t._s(t.success)+"\n                ")]),t._v(" "),e("span",{staticStyle:{color:"green"}},[t._v("条\n                ")]),t._v(" "),e("span",[t._v("失败\n                ")]),t._v(" "),e("span",{staticStyle:{color:"red"}},[t._v(t._s(t.fail)+"\n                ")]),t._v(" "),e("span",{staticStyle:{color:"red"}},[t._v("条\n                ")]),t._v(" "),e("span",[t._v("重复\n                ")]),t._v(" "),e("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.repeat)+"\n                ")]),t._v(" "),e("span",{staticStyle:{color:"blue"}},[t._v("条\n                ")])])]),t._v(" "),e("el-table",{attrs:{data:t.importData,"header-cell-style":{background:"rgba(241,246,254,1)",fontWeight:"500",color:"#333333",fontSize:"16px","text-align":"center"}}},[e("el-table-column",{attrs:{label:"数据流值",prop:"dataval"}}),t._v(" "),e("el-table-column",{attrs:{label:"数据流名称",prop:"datatitle"}}),t._v(" "),e("el-table-column",{attrs:{label:"单位",prop:"company"}}),t._v(" "),e("el-table-column",{attrs:{label:"单位符号",prop:"comsym"}}),t._v(" "),e("el-table-column",{attrs:{label:"关联设备数",prop:"equman"}})],1)],1)])},[],!1,null,"4a6400ea",null);c.options.__file="index.vue";a.default=c.exports},YEIV:function(t,a,e){"use strict";a.__esModule=!0;var o=function(t){return t&&t.__esModule?t:{default:t}}(e("SEkw"));a.default=function(t,a,e){return a in t?(0,o.default)(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}},yG7q:function(t,a,e){}}]);