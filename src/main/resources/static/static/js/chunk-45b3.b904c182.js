(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-45b3"],{"C/qp":function(t,e,o){"use strict";o.r(e);var i=o("P2sY"),s=o.n(i),n={name:"sensortypeedit",mixins:[o("y2a5").a],components:{},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){return{newSensortypeForm:{id:0,title:"",url:""},sensortypeForm:{}}},mounted:function(){this.pObj=s()({},this.paramsObj),this.gcomm.mapLength(this.pObj)>0?(this.isInDialog=!0,this.sensortypeForm=s()({},this.newSensortypeForm,this.pObj)):this.sensortypeForm=s()({},this.newSensortypeForm,this.$route.params)},methods:{pObjChanged:function(){this.gcomm.mapLength(this.pObj)>0&&(this.isInDialog=!0,this.sensortypeForm=s()({},this.newSensortypeForm,this.pObj))},genUploadUrl:function(t){return this.hysrvport+"/hyupload?btnEncode=headupload&relateType=camera&fi=add&Authorization="+this.apiSrv.token},genDownUrl:function(t){if(!t||t.length<1)return"";var e=t.split(";");return!e||e.length<2?"":this.hysrvport+"/hydownload?btnEncode=headupload&relateType=camera&filename="+e[1]+"&Authorization="+this.apiSrv.token},handleAvatarSuccess:function(t,e){this.sensortypeForm.url=t.data},handleClick:function(){console.log("数据",this.sensortypeForm),this.submitOrgForm("sensortypeForm")},submitOrgFormImpl:function(t){var e=this,o=void 0,i=!0,n="";this[t].id>0?(o="/act",i=!1,n="sensorup"):(o="/act",n="sensoradd",this[t].state="关闭");var r=s()({},this[t]);r._hy=n,this.callSrvAct(o,r).then(function(t){e.isInDialog?(console.log("不跳转"),i?t.data&&t.data.inst?(console.log("1111111111"),e.$emit("submitOk",t.data.inst)):t.data&&(console.log("22222222222"),e.$emit("submitOk",t.data||{})):e.$emit("submitOk",r)):(console.log("跳转"),e.$router.go(-1))})},submitOrgForm:function(t){var e=this;this.$refs[t].validate(function(o){if(!o)return!1;e.submitOrgFormImpl(t)})},close:function(){this.sensortypeForm.url="",this.$refs.box.clearFiles()},goClick:function(){this.$emit("submitClose")}},watch:{paramsObj:function(t){this.pObj.id!=this.paramsObj.id&&(this.pObj=s()({},this.paramsObj),this.pObjChanged())}},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},r=(o("ycoH"),o("KHd+")),a=Object(r.a)(n,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-container",{attrs:{direction:"vertical"}},[o("el-form",{ref:"sensortypeForm",attrs:{model:t.sensortypeForm}},[o("el-form-item",{attrs:{label:"传感器名称：",prop:"title",rules:{required:!0,trigger:"input"}}},[o("el-input",{staticStyle:{width:"300px"},model:{value:t.sensortypeForm.title,callback:function(e){t.$set(t.sensortypeForm,"title",e)},expression:"sensortypeForm.title"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"图标：",prop:"url"}},[o("el-upload",{ref:"box",staticStyle:{border:"1px solid #d9d9d9","border-radius":"6px",cursor:"pointer",position:"relative",overflow:"hidden",width:"100%",height:"178px","line-height":"178px","text-align":"center"},attrs:{action:t.genUploadUrl(),multiple:!1,"on-success":t.handleAvatarSuccess,limit:0,id:"box"}},[t.sensortypeForm.url?o("img",{staticStyle:{"object-fit":"fill"},attrs:{src:t.genDownUrl(t.sensortypeForm.url)}}):o("svg-icon",{staticStyle:{"font-size":"28px",color:"#8c939d"},attrs:{"icon-class":"add"}}),t._v(" "),t.sensortypeForm.url?o("span",{ref:"clos",staticStyle:{position:"absolute",top:"0px",right:"0px"},attrs:{id:"clos"}},[o("i",{staticClass:"el-icon-close",staticStyle:{position:"absolute",top:"0px",right:"0px"},on:{click:function(e){return e.stopPropagation(),t.close(e)}}})]):t._e()],1)],1)],1),t._v(" "),o("div",{staticStyle:{"text-align":"center"}},[o("el-button",{on:{click:t.handleClick}},[o("span",[t._v("确定\n            ")])]),t._v(" "),o("el-button",{on:{click:t.goClick}},[o("span",[t._v("取消\n            ")])])],1)],1)},[],!1,null,"7f73ee86",null);a.options.__file="index.vue";e.default=a.exports},Cszi:function(t,e,o){},ycoH:function(t,e,o){"use strict";var i=o("Cszi");o.n(i).a}}]);