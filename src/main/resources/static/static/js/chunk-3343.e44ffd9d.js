(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3343","chunk-1e10"],{"4YDf":function(t,e,a){"use strict";a.r(e);var i=a("PDX7"),l={name:"homepage1",mixins:[a("y2a5").a],components:{Viewdetails:i.default},props:{},data:function(){return{show:!1,detailsEdit:null,inx:0,regionArr:[],countArr:[],cameraArr:[],policeClassificationTop:[],policeClassificationBottom:[],policeNum:0,policeArr:[],leftTotalData:{base:{jrls:0,sfmxsl:0,sxtsl:0},totality:{bjs:0,fzr:0,gbsl:0,jrls:0,kqsl:0,sxtsl:0,ycsl:0,yxzsl:0},today_warning:{a:{hxyj:0,pdyc:0,qcaq:0,xwwz:0,zywz:0,pbwz:0,smyj:0,xyyj:0},b:{fypd:0,hx:0,pp:0,qc:0,ryyj:0,sm:0,wdaqm:21,xy:0}}},regionID:"",countID:"",cameraTitle:"",countNum:0,cameraNum:0,countANum:0,option:{title:{textStyle:{color:"#ffffff"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{right:"50",data:["上月","本月","同比"],textStyle:{color:"#c3dbff"}},xAxis:{name:"时间/日期",data:[],axisLabel:{textStyle:{color:"#c3dbff"}},nameTextStyle:{color:"#c3dbff",fontSize:10}},yAxis:{name:"数量",axisLabel:{textStyle:{color:"#c3dbff"}},nameTextStyle:{color:"#c3dbff",fontSize:10}},series:[{name:"上月",type:"bar",stack:"总量",data:[],itemStyle:{normal:{color:"#66B3FF"}}},{name:"本月",type:"bar",stack:"总量",data:[],itemStyle:{normal:{color:"#FF8040"}}},{name:"同比",type:"line",data:[],itemStyle:{normal:{color:"#66B3FF"}},areaStyle:{}}]},option1:{title:{textStyle:{color:"#ffffff"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{right:50,data:["确认数","报警数"],textStyle:{color:"#c3dbff"}},xAxis:{data:[],axisLabel:{textStyle:{color:"#c3dbff"}}},yAxis:{axisLabel:{textStyle:{color:"#c3dbff"}}},series:[{name:"确认数",type:"bar",data:[],itemStyle:{normal:{color:"#66B3FF",barBorderRadius:[10,10,0,0]}}},{name:"报警数",type:"bar",data:[],itemStyle:{normal:{color:"#FF8040",barBorderRadius:[10,10,0,0]}}}]}}},mounted:function(){var t=this;this.callSrvAct("/regionlist",{title:"",cp:0,rop:10}).then(function(e){console.log("区域",e),t.regionArr=e.data||[]});this.callSrvAct("/actq",{_hy:"algorithmacclist",qps:[{name:"title",val:"",op:"like"}]}).then(function(e){console.log("算法接入信息",e),t.countArr=e.data.pageData||[],t.countNum=e.data.totalRec||0,t.countArr.splice(0,0,{id:0,title:"全部"})}),this.callSrvAct("/cameraindexlist",["","",""]).then(function(e){console.log("摄像机信息",e),t.cameraArr=e.data||[],t.cameraArr&&t.cameraArr.length>0&&(t.video(t.cameraArr[0]),t.paint(t.cameraArr[0].border,t.cameraArr[0].box))});this.callSrvAct("/actq",{_hy:"algorithmlist",qps:[],sps:[{name:"algorithm_title",tb:"algorithm",orderV:"asc"}]}).then(function(e){console.log("算法管理信息",e),t.countANum=e.data.totalRec||0}),this.callSrvAct("/alarmdtl",-1).then(function(e){console.log("报警明细数据",e),t.policeArr=e.data});this.callSrvAct("/algorithmhome",{_hy:"algorithmhome"}).then(function(e){console.log("基本、总体、历史告警数据",e),t.leftTotalData=e.data,t.option.xAxis.data=e.data.history_alarm.day,t.option.series[0].data=e.data.history_alarm.sy,t.option.series[1].data=e.data.history_alarm.by,t.option.series[2].data=e.data.history_alarm.tb;for(var a=[],i=[],l=[],n=0;n<e.data.today_alarm.length;n++)a.push(e.data.today_alarm[n].qrs),i.push(e.data.today_alarm[n].bjs),l.push(e.data.today_alarm[n].algorithm_name);t.option1.series[0].data=a,t.option1.series[1].data=i,t.option1.xAxis.data=l,echarts.init(document.getElementById("Histogram")).setOption(t.option),echarts.init(document.getElementById("Statistics")).setOption(t.option1)});this.callSrvAct("/alarmcount",{_hy:"alarmcount"}).then(function(e){console.log("报警统计数据",e),t.policeNum=0,t.policeClassificationTop=[],t.policeClassificationBottom=[];for(var a=0;a<e.data.length;a++)t.policeNum+=e.data[a].algorithm_num;for(var i=0;i<3;i++)t.policeClassificationTop.push(e.data[i]);for(var l=3;l<7;l++)t.policeClassificationBottom.push(e.data[l])}),console.log("分类数据",this.policeClassificationTop,this.policeClassificationBottom)},methods:{video:function(t){this.startVideo(t)},startVideo:function(t){if(console.log("cameraV:",t),null!=this.flvPlayer&&this.destoryVideo(),"关闭"!=t.state&&t.pushaddress&&!(t.pushaddress.length<1)&&(console.log("cameraV 2:"),flvjs.isSupported())){var e=document.getElementById("testplay");this.flvPlayer=flvjs.createPlayer({type:"flv",url:t.pushaddress}),this.flvPlayer.on("error",function(t){console.log("err",t)}),this.flvPlayer.attachMediaElement(e),this.flvPlayer.load(),this.flvPlayer.play()}},destoryVideo:function(){null!=this.flvPlayer&&(this.flvPlayer.pause(),this.flvPlayer.unload(),this.flvPlayer.detachMediaElement(),this.flvPlayer.destroy(),this.flvPlayer=null)},jump1:function(){this.$router.push({name:"algorithmm"})},jump2:function(){this.$router.push({name:"videoca"})},jump3:function(){this.$router.push({name:"alaccess"})},dateyTime:function(){var t=new Date,e="",a=t.toLocaleTimeString("chinese",{hour12:!1});return 0==t.getDay()?e="星期七":1==t.getDay()?e="星期一":2==t.getDay()?e="星期二":3==t.getDay()?e="星期三":4==t.getDay()?e="星期四":5==t.getDay()?e="星期五":6==t.getDay()&&(e="星期六"),t.getFullYear()+"年"+(t.getMonth()+1)+"月"+t.getDate()+"日  "+e+"  "+a},handleclick:function(t,e){this.detailsEdit=e,this.show=!0},handleclose:function(){var t=this;this.show=!1;this.callSrvAct("/alarmcount",{_hy:"alarmcount"}).then(function(e){console.log("报警统计数据",e),t.policeNum=0,t.policeClassificationTop=[],t.policeClassificationBottom=[];for(var a=0;a<e.data.length;a++)t.policeNum+=e.data[a].algorithm_num;for(var i=0;i<3;i++)t.policeClassificationTop.push(e.data[i]);for(var l=3;l<7;l++)t.policeClassificationBottom.push(e.data[l])}),this.callSrvAct("/alarmdtl",-1).then(function(e){console.log("报警明细数据",e),t.policeArr=e.data})},handleplices:function(t){var e=this;this.callSrvAct("/alarmdtl",t).then(function(t){console.log("返回值",t),e.policeArr=t.data})},handleplice:function(t){var e=this;console.log(t),this.callSrvAct("/alarmdtl",t).then(function(t){console.log("返回值",t),e.policeArr=t.data})},handleplice1:function(t){var e=this;console.log(t),this.callSrvAct("/alarmdtl",t).then(function(t){console.log("返回值",t),e.policeArr=t.data})},detailsOK:function(){},detailsSet:function(){},time:function(t){var e=new Date(1e3*t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"  "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())},tableHeaderColor:function(t){t.row,t.column;var e=t.rowIndex;t.columnIndex;if(0===e)return"background-color: red;color: #0000;font-weight: 500;"},regionIDChange:function(t){var e=this;console.log(t);for(var a=0;a<this.regionArr.length;a++)t==this.regionArr[a].id&&0==this.regionArr[a].parent_id&&(this.regionID="");this.callSrvAct("/cameraindexlist",[this.regionID+"",this.countID+"",this.cameraTitle+""]).then(function(t){console.log("摄像机信息",t),e.cameraArr=t.data})},countIDChange:function(t){var e=this;0==t&&(this.countID=""),this.callSrvAct("/cameraindexlist",[this.regionID+"",this.countID+"",this.cameraTitle+""]).then(function(t){console.log("摄像机信息",t),e.cameraArr=t.data})},cameraTitleChange:function(){var t=this;this.callSrvAct("/cameraindexlist",[this.regionID+"",this.countID+"",this.cameraTitle+""]).then(function(e){console.log("摄像机信息",e),t.cameraArr=e.data||[]})},cameraVideo2:function(t){if(t){var e=document.getElementById("cvs");e.height=e.height,this.paint(t.border,t.box),this.video(t)}},cameraVideo:function(t,e,a){console.log("参数",t,e,a)},isUndef:function(t){return void 0===t||"undefined"==t||null==t},paint:function(t,e){console.log("recv value:",t);var a=[];t&&t.length>0&&(a=JSON.parse(t)),console.log("----- 2 2----");var i=[],l=[];console.log("----- 2 1 ----");var n=document.getElementById("cvs");if(e&&e.length>0){var o=JSON.parse(e);if(o&&o.length)for(var s=0;s<o.length-1;s+=2)i.push(o[s+1]),i.push(o[s]);l=[[i[0]*n.width,i[1]*n.height],[i[2]*n.width,i[1]*n.height],[i[2]*n.width,i[3]*n.height],[i[0]*n.width,i[3]*n.height],[i[0]*n.width,i[1]*n.height]]}console.log("----- 2 ----");var c=this.$refs.cvs.getContext("2d"),r=this.$refs.cvs.getContext("2d");if(console.log("value1Arr",l),console.log("---4 ",!!a&&0!=a.length),!this.isUndef(a)&&a.length>0){console.log("3 ------ :"),c.lineWidth=1,c.strokeStyle="#ffdc35",c.beginPath(),c.moveTo(a[0][0]*n.width,a[0][1]*n.height);for(var d=0;d<a.length;d++)d+1<a.length&&(console.log("次数","1111111111111"),c.lineTo(a[d+1][0]*n.width,a[d+1][1]*n.height),c.stroke());c.closePath()}if(!this.isUndef(l)&&l.length>0){console.log("3 3------ :"),r.lineWidth=1,r.strokeStyle="#f9f900",r.beginPath();for(var p=0;p<l.length-1;p++)r.moveTo(l[p][0],l[p][1]),r.lineTo(l[p+1][0],l[p+1][1]),r.stroke();r.closePath()}},leftChange:function(){this.inx=this.inx-1,this.inx<=0&&(this.inx=0),console.log(this.inx)},rightChange:function(){this.inx=this.inx+1,this.inx>=this.cameraArr.length-5&&(this.inx=this.cameraArr.length-5,this.inx<=0&&(this.inx=0)),console.log(this.inx)}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){this.destoryVideo()},destroyed:function(){}},n=(a("tAsA"),a("KHd+")),o=Object(n.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticStyle:{background:"url(/static/image/bg3.jpg) no-repeat","background-size":"100% 100%",width:"100%"},attrs:{direction:"vertical"}},[a("el-main",[a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{display:"flex","justify-content":"space-around",width:"100%"}},[a("div",{staticStyle:{"line-height":"40px",width:"25%"}},[a("span",{staticStyle:{"font-size":"25px",color:"#00E3E3"}},[t._v("违章预警\n                    ")]),t._v(" "),t._e()]),t._v(" "),a("div",{staticStyle:{"line-height":"40px",width:"47%","text-align":"center"}}),t._v(" "),a("div",{staticStyle:{"line-height":"40px",width:"25%"}},[a("span",{staticStyle:{color:"#ffffff"}},[t._v(t._s(t.dateyTime())+"\n                    ")]),t._v(" "),t._e(),t._v(" "),t._e(),t._v(" "),t._e()])]),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"space-around",width:"100%","margin-top":"10px"}},[a("div",{staticStyle:{width:"25%"}},[a("div",[a("div",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{"font-size":"24px",color:"#ffffff"}},[t._v("基本信息\n                            ")])]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px",background:"url(/static/image/kuang.png) no-repeat","background-size":"100% 100%",padding:"15px",height:"200px"}},[a("div",{staticStyle:{display:"flex","flex-direction":"column","align-items":"stretch",height:"100%"}},[a("div",{staticStyle:{display:"flex","justify-content":"space-between",height:"24px","margin-bottom":"50px"}},[a("div",{staticStyle:{"text-align":"right",width:"100px"}},[a("span",{staticStyle:{color:"#ffffff"}},[t._v("接入路数\n                                        ")])]),t._v(" "),a("div",{staticStyle:{height:"100%",width:"60%",display:"flex","justify-content":"space-around"}},[a("div",{class:{active1:t.leftTotalData.base.jrls>=1,active3:0==t.leftTotalData.base.jrls},staticStyle:{height:"100%",width:"8%"}}),t._v(" "),a("div",{class:{active1:t.leftTotalData.base.jrls>=1,active3:0==t.leftTotalData.base.jrls},staticStyle:{height:"100%",width:"8%"}}),t._v(" "),a("div",{class:{active1:t.leftTotalData.base.jrls>=1,active3:0==t.leftTotalData.base.jrls},staticStyle:{height:"100%",width:"8%"}}),t._v(" "),a("div",{class:{active2:t.leftTotalData.base.jrls>=100,active3:t.leftTotalData.base.jrls<=100},staticStyle:{height:"100%",width:"8%"}}),t._v(" "),a("div",{class:{active2:t.leftTotalData.base.jrls>=100,active3:t.leftTotalData.base.jrls<=100},staticStyle:{height:"100%",width:"8%"}}),t._v(" "),a("div",{class:{active2:t.leftTotalData.base.jrls>=100,active3:t.leftTotalData.base.jrls<=100},staticStyle:{height:"100%",width:"8%"}}),t._v(" "),a("div",{staticStyle:{height:"100%",width:"8%",background:"#003E3E"}}),t._v(" "),a("div",{staticStyle:{height:"100%",width:"8%",background:"#003E3E"}}),t._v(" "),a("div",{staticStyle:{height:"100%",width:"8%",background:"#003E3E"}}),t._v(" "),a("div",{staticStyle:{height:"100%",width:"8%",background:"#003E3E"}})]),t._v(" "),a("div",[a("span",{staticStyle:{"font-size":"20px",color:"#A6FFFF"},on:{click:t.jump1}},[t._v(t._s(t.leftTotalData.base.jrls)+"\n                                        ")]),t._v(" "),a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("路\n                                        ")])])]),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"space-between",height:"24px","margin-bottom":"50px"}},[a("div",{staticStyle:{"text-align":"right",width:"100px"}},[a("span",{staticStyle:{color:"#ffffff"}},[t._v("摄像头数量\n                                        ")])]),t._v(" "),a("div",{staticStyle:{height:"100%",width:"60%",display:"flex","justify-content":"space-around"}},[a("div",{class:{active1:t.leftTotalData.base.sxtsl>=1,active3:0==t.leftTotalData.base.sxtsl},staticStyle:{height:"100%",width:"8%"}}),t._v(" "),a("div",{class:{active1:t.leftTotalData.base.sxtsl>=1,active3:0==t.leftTotalData.base.sxtsl},staticStyle:{height:"100%",width:"8%"}}),t._v(" "),a("div",{class:{active1:t.leftTotalData.base.sxtsl>=1,active3:0==t.leftTotalData.base.sxtsl},staticStyle:{height:"100%",width:"8%"}}),t._v(" "),a("div",{class:{active2:t.leftTotalData.base.sxtsl>=100,active3:t.leftTotalData.base.sxtsl<=100},staticStyle:{height:"100%",width:"8%"}}),t._v(" "),a("div",{class:{active2:t.leftTotalData.base.sxtsl>=100,active3:t.leftTotalData.base.sxtsl<=100},staticStyle:{height:"100%",width:"8%"}}),t._v(" "),a("div",{class:{active2:t.leftTotalData.base.sxtsl>=100,active3:t.leftTotalData.base.sxtsl<=100},staticStyle:{height:"100%",width:"8%"}}),t._v(" "),a("div",{staticStyle:{height:"100%",width:"8%",background:"#003E3E"}}),t._v(" "),a("div",{staticStyle:{height:"100%",width:"8%",background:"#003E3E"}}),t._v(" "),a("div",{staticStyle:{height:"100%",width:"8%",background:"#003E3E"}}),t._v(" "),a("div",{staticStyle:{height:"100%",width:"8%",background:"#003E3E"}})]),t._v(" "),a("div",[a("span",{staticStyle:{"font-size":"20px",color:"#A6FFFF"},on:{click:t.jump2}},[t._v(t._s(t.leftTotalData.base.sxtsl)+"\n                                        ")]),t._v(" "),a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("个\n                                        ")])])]),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"space-between",height:"24px"}},[a("div",{staticStyle:{"text-align":"right",width:"100px"}},[a("span",{staticStyle:{color:"#ffffff"}},[t._v("算法模型数量\n                                        ")])]),t._v(" "),a("div",{staticStyle:{height:"100%",width:"60%",display:"flex","justify-content":"space-around"}},[a("div",{class:{active1:t.leftTotalData.base.sfmxsl>=1,active3:0==t.leftTotalData.base.sfmxsl},staticStyle:{height:"100%",width:"8%"}}),t._v(" "),a("div",{class:{active1:t.leftTotalData.base.sfmxsl>=1,active3:0==t.leftTotalData.base.sfmxsl},staticStyle:{height:"100%",width:"8%"}}),t._v(" "),a("div",{class:{active1:t.leftTotalData.base.sfmxsl>=1,active3:0==t.leftTotalData.base.sfmxsl},staticStyle:{height:"100%",width:"8%"}}),t._v(" "),a("div",{class:{active2:t.leftTotalData.base.sfmxsl>=100,active3:t.leftTotalData.base.sfmxsl<=100},staticStyle:{height:"100%",width:"8%"}}),t._v(" "),a("div",{class:{active2:t.leftTotalData.base.sfmxsl>=100,active3:t.leftTotalData.base.sfmxsl<=100},staticStyle:{height:"100%",width:"8%"}}),t._v(" "),a("div",{class:{active2:t.leftTotalData.base.sfmxsl>=100,active3:t.leftTotalData.base.sfmxsl<=100},staticStyle:{height:"100%",width:"8%"}}),t._v(" "),a("div",{staticStyle:{height:"100%",width:"8%",background:"#003E3E"}}),t._v(" "),a("div",{staticStyle:{height:"100%",width:"8%",background:"#003E3E"}}),t._v(" "),a("div",{staticStyle:{height:"100%",width:"8%",background:"#003E3E"}}),t._v(" "),a("div",{staticStyle:{height:"100%",width:"8%",background:"#003E3E"}})]),t._v(" "),a("div",[a("span",{staticStyle:{"font-size":"20px",color:"#A6FFFF"},on:{click:t.jump3}},[t._v(t._s(t.leftTotalData.base.sfmxsl)+"\n                                        ")]),t._v(" "),a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("个\n                                        ")])])])])])]),t._v(" "),a("div",[a("div",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{"font-size":"24px",color:"#ffffff"}},[t._v("总体信息\n                            ")])]),t._v(" "),a("div",{staticStyle:{background:"url(/static/image/kuang.png) no-repeat","background-size":"100% 100%",padding:"15px"}},[a("div",{staticStyle:{display:"flex","justify-content":"space-around","margin-bottom":"10px"}},[a("div",{staticStyle:{width:"24%",height:"100px"}},[a("div",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{color:"#ffffff","font-size":"12px"}},[t._v("摄像头数量\n                                        ")]),t._v(" "),a("div",{staticStyle:{background:"url(/static/image/ztxx.png) no-repeat","background-size":"100% 100%","margin-top":"10px",width:"100%",height:"60px","line-height":"60px"}},[a("span",{staticStyle:{"font-size":"20px",color:"#A6FFFF"},on:{click:t.jump1}},[t._v(t._s(t.leftTotalData.totality.sxtsl)+"\n                                            ")]),t._v(" "),a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("个\n                                            ")])])])]),t._v(" "),a("div",{staticStyle:{width:"24%",height:"100px"}},[a("div",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{color:"#ffffff","font-size":"12px"}},[t._v("开启数量\n                                        ")]),t._v(" "),a("div",{staticStyle:{background:"url(/static/image/ztxx.png) no-repeat","background-size":"100% 100%","margin-top":"10px",width:"100%",height:"60px","line-height":"60px"}},[a("span",{staticStyle:{"font-size":"20px",color:"#A6FFFF"},on:{click:t.jump2}},[t._v(t._s(t.leftTotalData.totality.kqsl)+"\n                                            ")]),t._v(" "),a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("个\n                                            ")])])])]),t._v(" "),a("div",{staticStyle:{width:"24%",height:"100px"}},[a("div",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{color:"#ffffff","font-size":"12px"}},[t._v("关闭数量\n                                        ")]),t._v(" "),a("div",{staticStyle:{background:"url(/static/image/ztxx.png) no-repeat","background-size":"100% 100%","margin-top":"10px",width:"100%",height:"60px","line-height":"60px"}},[a("span",{staticStyle:{"font-size":"20px",color:"#A6FFFF"},on:{click:t.jump3}},[t._v(t._s(t.leftTotalData.totality.gbsl)+"\n                                            ")]),t._v(" "),a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("个\n                                            ")])])])]),t._v(" "),a("div",{staticStyle:{width:"24%",height:"100px"}},[a("div",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{color:"#ffffff","font-size":"12px"}},[t._v("负责人\n                                        ")]),t._v(" "),a("div",{staticStyle:{background:"url(/static/image/ztxx.png) no-repeat","background-size":"100% 100%","margin-top":"10px",width:"100%",height:"60px","line-height":"60px"}},[a("span",{staticStyle:{"font-size":"20px",color:"#A6FFFF"},on:{click:t.jump3}},[t._v(t._s(t.leftTotalData.totality.fzr)+"\n                                            ")]),t._v(" "),a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("个\n                                            ")])])])])]),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[a("div",{staticStyle:{width:"24%",height:"100px"}},[a("div",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{color:"#ffffff","font-size":"12px"}},[t._v("接入路数\n                                        ")]),t._v(" "),a("div",{staticStyle:{background:"url(/static/image/ztxx.png) no-repeat","background-size":"100% 100%","margin-top":"10px",width:"100%",height:"60px","line-height":"60px"}},[a("span",{staticStyle:{"font-size":"20px",color:"#A6FFFF"},on:{click:t.jump1}},[t._v(t._s(t.leftTotalData.totality.jrls)+"\n                                            ")]),t._v(" "),a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("路\n                                            ")])])])]),t._v(" "),a("div",{staticStyle:{width:"24%",height:"100px"}},[a("div",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{color:"#ffffff","font-size":"12px"}},[t._v("运行中数量\n                                        ")]),t._v(" "),a("div",{staticStyle:{background:"url(/static/image/ztxx.png) no-repeat","background-size":"100% 100%","margin-top":"10px",width:"100%",height:"60px","line-height":"60px"}},[a("span",{staticStyle:{"font-size":"20px",color:"#A6FFFF"},on:{click:t.jump2}},[t._v(t._s(t.leftTotalData.totality.yxzsl)+"\n                                            ")]),t._v(" "),a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("个\n                                            ")])])])]),t._v(" "),a("div",{staticStyle:{width:"24%",height:"100px"}},[a("div",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{color:"#ffffff","font-size":"12px"}},[t._v("异常数量\n                                        ")]),t._v(" "),a("div",{staticStyle:{background:"url(/static/image/ycsl.png) no-repeat","background-size":"100% 100%","margin-top":"10px",width:"100%",height:"60px","line-height":"60px"}},[a("span",{staticStyle:{"font-size":"20px",color:"#A6FFFF"},on:{click:t.jump3}},[t._v(t._s(t.leftTotalData.totality.ycsl)+"\n                                            ")]),t._v(" "),a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("个\n                                            ")])])])]),t._v(" "),a("div",{staticStyle:{width:"24%",height:"100px"}},[a("div",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{color:"#ffffff","font-size":"12px"}},[t._v("报警数\n                                        ")]),t._v(" "),a("div",{staticStyle:{background:"url(/static/image/bjs.png) no-repeat","background-size":"100% 100%","margin-top":"10px",width:"100%",height:"60px","line-height":"60px"}},[a("span",{staticStyle:{"font-size":"20px",color:"#A6FFFF"},on:{click:t.jump3}},[t._v(t._s(t.leftTotalData.totality.bjs)+"\n                                            ")]),t._v(" "),a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("次\n                                            ")])])])])])])]),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("div",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{"font-size":"24px",color:"#ffffff"}},[t._v("历史告警时段分布\n                            ")])]),t._v(" "),a("div",{ref:"Histogram",staticStyle:{width:"100%",height:"400px",background:"url(/static/image/kuang.png) no-repeat","background-size":"100% 100%",padding:"15px"},attrs:{id:"Histogram"}})])]),t._v(" "),a("div",{staticStyle:{width:"47%"}},[a("div",[a("div",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{"font-size":"24px",color:"#ffffff"}},[t._v("实时监控\n                            ")])]),t._v(" "),a("div",{staticStyle:{background:"url(/static/image/kuang.png) no-repeat","background-size":"100% 100%",padding:"15px"}},[a("div",{staticStyle:{"line-height":"40px",display:"flex","justify-content":"space-between"}},[a("el-select",{staticStyle:{width:"30%"},attrs:{placeholder:"请选择区域"},on:{change:t.regionIDChange},model:{value:t.regionID,callback:function(e){t.regionID=e},expression:"regionID"}},t._l(t.regionArr,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),t._v(" "),a("el-select",{staticStyle:{width:"30%"},attrs:{placeholder:"请选择算法名称"},on:{change:t.countIDChange},model:{value:t.countID,callback:function(e){t.countID=e},expression:"countID"}},t._l(t.countArr,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),t._v(" "),a("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"请输入摄像机名称"},on:{blur:t.cameraTitleChange},model:{value:t.cameraTitle,callback:function(e){t.cameraTitle=e},expression:"cameraTitle"}})],1),t._v(" "),a("div",{staticStyle:{width:"100%",display:"flex","justify-content":"space-between",margin:"15px 0px"}},[a("div",{staticStyle:{background:"url(/static/image/ARROW-L-h.png) no-repeat","background-size":"100% 100%",width:"20px"},on:{click:t.leftChange}}),t._v(" "),t.inx<=t.cameraArr.length-1?a("div",[a("div",{class:{active5:"异常"==t.cameraArr[t.inx].state,active6:"运行中"==t.cameraArr[t.inx].state},staticStyle:{color:"#A6FFFF",padding:"5px"},on:{click:function(e){t.cameraVideo2(t.cameraArr[t.inx])}}},[a("span",[t._v(t._s(t.cameraArr[t.inx].title)+"\n                                        ")])])]):t._e(),t._v(" "),t.inx+1<=t.cameraArr.length-1?a("div",[a("div",{class:{active5:"异常"==t.cameraArr[t.inx+1].state,active6:"运行中"==t.cameraArr[t.inx+1].state},staticStyle:{color:"#A6FFFF",padding:"5px"},on:{click:function(e){t.cameraVideo2(t.cameraArr[t.inx+1])}}},[a("span",[t._v(t._s(t.cameraArr[t.inx+1].title)+"\n                                        ")])])]):t._e(),t._v(" "),t.inx+2<=t.cameraArr.length-1?a("div",[a("div",{class:{active5:"异常"==t.cameraArr[t.inx+2].state,active6:"运行中"==t.cameraArr[t.inx+2].state},staticStyle:{color:"#A6FFFF",padding:"5px"},on:{click:function(e){t.cameraVideo2(t.cameraArr[t.inx+2])}}},[a("span",[t._v(t._s(t.cameraArr[t.inx+2].title)+"\n                                        ")])])]):t._e(),t._v(" "),t.inx+3<=t.cameraArr.length-1?a("div",[a("div",{class:{active5:"异常"==t.cameraArr[t.inx+3].state,active6:"运行中"==t.cameraArr[t.inx+3].state},staticStyle:{color:"#A6FFFF",padding:"5px"},on:{click:function(e){t.cameraVideo2(t.cameraArr[t.inx+3])}}},[a("span",[t._v(t._s(t.cameraArr[t.inx+3].title)+"\n                                        ")])])]):t._e(),t._v(" "),t.inx+4<=t.cameraArr.length-1?a("div",[a("div",{class:{active5:"异常"==t.cameraArr[t.inx+4].state,active6:"运行中"==t.cameraArr[t.inx+4].state},staticStyle:{color:"#A6FFFF",padding:"5px"},on:{click:function(e){t.cameraVideo2(t.cameraArr[t.inx+4])}}},[a("span",[t._v(t._s(t.cameraArr[t.inx+4].title)+"\n                                        ")])])]):t._e(),t._v(" "),a("div",{staticStyle:{background:"url(/static/image/ARROW-R-h.png) no-repeat","background-size":"100% 100%",width:"20px"},on:{click:t.rightChange}})]),t._v(" "),a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{width:"100%",height:"300px","background-color":"#000000",position:"relative"}},[a("video",{ref:"testplay",staticStyle:{width:"100%",height:"100%","object-fit":"fill"},attrs:{id:"testplay"}}),t._v(" "),a("span",{staticStyle:{display:"block",width:"100%",height:"100%",position:"absolute",left:"0px",top:"0px"}},[a("canvas",{ref:"cvs",staticStyle:{width:"100%",height:"100%"},attrs:{id:"cvs"}},[t._v("不支持canvas")])])])])])]),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("div",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{"font-size":"24px",color:"#ffffff"}},[t._v("本日预警统计\n                            ")])]),t._v(" "),a("div",{staticStyle:{background:"url(/static/image/kuang.png) no-repeat","background-size":"100% 100%",padding:"15px"}},[a("div",[a("div",{staticStyle:{display:"flex","justify-content":"space-around","margin-bottom":"20px"}},[a("div",{staticStyle:{position:"relative",width:"126px"}},[a("div",{staticStyle:{width:"100%",height:"126px",background:"url(/static/image/YUAN.png) no-repeat","background-size":"100% 100%","line-height":"126px","text-align":"center"}},[a("span",{staticStyle:{color:"#ffffff","font-size":"18px"}},[t._v(t._s(t.leftTotalData.today_warning.a.zywz+"%")+"\n                                            ")])]),t._v(" "),a("div",{staticStyle:{width:"100%","text-align":"center","margin-top":"5px"}},[a("span",{staticStyle:{color:"#ffffff","font-size":"18px"}},[t._v("作业违章\n                                            ")])])]),t._v(" "),a("div",{staticStyle:{position:"relative",width:"126px"}},[a("div",{staticStyle:{width:"100%",height:"126px",background:"url(/static/image/YUAN.png) no-repeat","background-size":"100% 100%","line-height":"126px","text-align":"center"}},[a("span",{staticStyle:{color:"#ffffff","font-size":"18px"}},[t._v(t._s(t.leftTotalData.today_warning.a.xwwz+"%")+"\n                                            ")])]),t._v(" "),a("div",{staticStyle:{width:"100%","text-align":"center","margin-top":"5px"}},[a("span",{staticStyle:{color:"#ffffff","font-size":"18px"}},[t._v("行为违章\n                                            ")])])]),t._v(" "),a("div",{staticStyle:{position:"relative",width:"126px"}},[a("div",{staticStyle:{width:"100%",height:"126px",background:"url(/static/image/YUAN.png) no-repeat","background-size":"100% 100%","line-height":"126px","text-align":"center"}},[a("span",{staticStyle:{color:"#ffffff","font-size":"18px"}},[t._v(t._s(t.leftTotalData.today_warning.a.pdyc+"%")+"\n                                            ")])]),t._v(" "),a("div",{staticStyle:{width:"100%","text-align":"center","margin-top":"5px"}},[a("span",{staticStyle:{color:"#ffffff","font-size":"18px"}},[t._v("皮带异常\n                                            ")])])]),t._v(" "),a("div",{staticStyle:{position:"relative",width:"126px"}},[a("div",{staticStyle:{width:"100%",height:"126px",background:"url(/static/image/YUAN.png) no-repeat","background-size":"100% 100%","line-height":"126px","text-align":"center"}},[a("span",{staticStyle:{color:"#ffffff","font-size":"18px"}},[t._v(t._s(t.leftTotalData.today_warning.a.hxyj+"%")+"\n                                            ")])]),t._v(" "),a("div",{staticStyle:{width:"100%","text-align":"center","margin-top":"5px"}},[a("span",{staticStyle:{color:"#ffffff","font-size":"18px"}},[t._v("火险预警\n                                            ")])])])]),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[a("div",{staticStyle:{position:"relative",width:"126px"}},[a("div",{staticStyle:{width:"100%",height:"126px",background:"url(/static/image/YUAN.png) no-repeat","background-size":"100% 100%","line-height":"126px","text-align":"center"}},[a("span",{staticStyle:{color:"#ffffff","font-size":"18px"}},[t._v(t._s(t.leftTotalData.today_warning.a.qcaq+"%")+"\n                                            ")])]),t._v(" "),a("div",{staticStyle:{width:"100%","text-align":"center","margin-top":"5px"}},[a("span",{staticStyle:{color:"#ffffff","font-size":"18px"}},[t._v("清仓安全\n                                            ")])])]),t._v(" "),a("div",{staticStyle:{position:"relative",width:"126px"}},[a("div",{staticStyle:{width:"100%",height:"126px",background:"url(/static/image/YUAN.png) no-repeat","background-size":"100% 100%","line-height":"126px","text-align":"center"}},[a("span",{staticStyle:{color:"#ffffff","font-size":"18px"}},[t._v(t._s(t.leftTotalData.today_warning.a.pbwz+"%")+"\n                                            ")])]),t._v(" "),a("div",{staticStyle:{width:"100%","text-align":"center","margin-top":"5px"}},[a("span",{staticStyle:{color:"#ffffff","font-size":"18px"}},[t._v("跑偏违章\n                                            ")])])]),t._v(" "),a("div",{staticStyle:{position:"relative",width:"126px"}},[a("div",{staticStyle:{width:"100%",height:"126px",background:"url(/static/image/YUAN.png) no-repeat","background-size":"100% 100%","line-height":"126px","text-align":"center"}},[a("span",{staticStyle:{color:"#ffffff","font-size":"18px"}},[t._v(t._s(t.leftTotalData.today_warning.a.xyyj+"%")+"\n                                            ")])]),t._v(" "),a("div",{staticStyle:{width:"100%","text-align":"center","margin-top":"5px"}},[a("span",{staticStyle:{color:"#ffffff","font-size":"18px"}},[t._v("吸烟预警\n                                            ")])])]),t._v(" "),a("div",{staticStyle:{position:"relative",width:"126px"}},[a("div",{staticStyle:{width:"100%",height:"126px",background:"url(/static/image/YUAN.png) no-repeat","background-size":"100% 100%","line-height":"126px","text-align":"center"}},[a("span",{staticStyle:{color:"#ffffff","font-size":"18px"}},[t._v(t._s(t.leftTotalData.today_warning.a.smyj+"%")+"\n                                            ")])]),t._v(" "),a("div",{staticStyle:{width:"100%","text-align":"center","margin-top":"5px"}},[t._e()])])])]),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("div",{staticStyle:{display:"flex","justify-content":"space-around","margin-bottom":"5px"}},[a("div",[a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("翻越皮带：\n                                        ")]),t._v(" "),a("span",{staticStyle:{color:"#ffffff","font-size":"18px"}},[t._v(t._s(t.leftTotalData.today_warning.b.fypd)+"\n                                        ")]),t._v(" "),a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("次\n                                        ")])]),t._v(" "),a("div",[a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("未带安全帽：\n                                        ")]),t._v(" "),a("span",{staticStyle:{color:"#ffffff","font-size":"18px"}},[t._v(t._s(t.leftTotalData.today_warning.b.wdaqm)+"\n                                        ")]),t._v(" "),a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("次\n                                        ")])]),t._v(" "),a("div",[a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("跑偏：\n                                        ")]),t._v(" "),a("span",{staticStyle:{color:"#ffffff","font-size":"18px"}},[t._v(t._s(t.leftTotalData.today_warning.b.pp)+"\n                                        ")]),t._v(" "),a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("次\n                                        ")])]),t._v(" "),a("div",[a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("火险：\n                                        ")]),t._v(" "),a("span",{staticStyle:{color:"#ffffff","font-size":"18px"}},[t._v(t._s(t.leftTotalData.today_warning.b.hx)+"\n                                        ")]),t._v(" "),a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("次\n                                        ")])])]),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[a("div",[a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("清仓：\n                                        ")]),t._v(" "),a("span",{staticStyle:{color:"#ffffff","font-size":"18px"}},[t._v(t._s(t.leftTotalData.today_warning.b.qc)+"\n                                        ")]),t._v(" "),a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("次\n                                        ")])]),t._v(" "),a("div",[a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("人员越界：\n                                        ")]),t._v(" "),a("span",{staticStyle:{color:"#ffffff","font-size":"18px"}},[t._v(t._s(t.leftTotalData.today_warning.b.ryyj)+"\n                                        ")]),t._v(" "),a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("次\n                                        ")])]),t._v(" "),a("div",[a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("吸烟：\n                                        ")]),t._v(" "),a("span",{staticStyle:{color:"#ffffff","font-size":"18px"}},[t._v(t._s(t.leftTotalData.today_warning.b.xy)+"\n                                        ")]),t._v(" "),a("span",{staticStyle:{color:"#A6FFFF"}},[t._v("次\n                                        ")])]),t._v(" "),t._e()])])])])]),t._v(" "),a("div",{staticStyle:{width:"25%"}},[a("div",[a("div",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{"font-size":"24px",color:"#ffffff"}},[t._v("报警信息\n                            ")])]),t._v(" "),a("div",{staticStyle:{background:"url(/static/image/kuang.png) no-repeat","background-size":"100% 100%",padding:"15px"}},[a("div",[a("div",[a("div",{staticStyle:{display:"flex","justify-content":"space-around","margin-bottom":"10px"}},[a("div",{class:{active7:t.policeNum>=1,active8:0==t.policeNum},staticStyle:{width:"24%","text-align":"center"},on:{click:function(e){t.handleplices(-1)}}},[a("span",{staticStyle:{color:"#00E3E3"}},[t._v(t._s("全部（"+t.policeNum+"）")+"\n                                            ")])]),t._v(" "),t._l(t.policeClassificationTop,function(e,i){return a("div",{key:e.algorithm_id,class:{active7:e.algorithm_num>=1,active8:0==e.algorithm_num},staticStyle:{width:"24%","text-align":"center"},on:{click:function(a){t.handleplice(e.algorithm_id)}}},[a("span",{staticStyle:{color:"#00E3E3"}},[t._v(t._s(e.algorithm_name+"（"+e.algorithm_num+"）")+"\n                                            ")])])})],2),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"space-around"}},t._l(t.policeClassificationBottom,function(e,i){return a("div",{key:e.algorithm_id,class:{active7:e.algorithm_num>=1,active8:0==e.algorithm_num},staticStyle:{width:"24%","text-align":"center"},on:{click:function(a){t.handleplice1(e.algorithm_id)}}},[a("span",{staticStyle:{color:"#00E3E3"}},[t._v(t._s(e.algorithm_name+"（"+e.algorithm_num+"）")+"\n                                            ")])])}))]),t._v(" "),a("div",{staticStyle:{width:"100%",height:"5px","background-color":"#00E3E3",margin:"10px 0px"}})]),t._v(" "),a("el-table",{attrs:{data:t.policeArr,height:"340px","cell-style":{"text-align":"center","font-size":"9px"},"header-cell-style":{"text-align":"center"}}},[a("el-table-column",{attrs:{label:"时间","min-width":"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.gcomm.v2datetimestr(e.row.alarm_time))+"\n                                        ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"5%"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{width:"5px",height:"5px","background-color":"green","border-radius":"50%"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"摄像机",prop:"camera_name"}}),t._v(" "),a("el-table-column",{attrs:{label:"类型",prop:"algorithm_name"}}),t._v(" "),a("el-table-column",{attrs:{width:"5%"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{width:"5px",height:"5px","background-color":"green","border-radius":"50%"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"详情"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{on:{click:function(a){t.handleclick(e.$index,e.row)}}},[t._v("查看详情\n                                        ")])]}}])})],1)],1)]),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("div",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{"font-size":"24px",color:"#ffffff"}},[t._v("本日报警信息确认统计\n                            ")])]),t._v(" "),a("div",{ref:"Statistics",staticStyle:{width:"100%",height:"400px",background:"url(/static/image/kuang.png) no-repeat","background-size":"100% 100%",padding:"15px"},attrs:{id:"Statistics"}})])])])]),t._v(" "),t.show?a("el-dialog",{attrs:{visible:t.show,title:"报警信息"},on:{"update:visible":function(e){t.show=e},close:t.handleclose}},[a("viewdetails",{attrs:{paramsObj:t.detailsEdit},on:{submitOk:t.detailsOK,submitClose:t.detailsSet}})],1):t._e()],1)],1)},[],!1,null,"3214ec14",null);o.options.__file="index.vue";e.default=o.exports},"5qFM":function(t,e,a){},MZfK:function(t,e,a){},PDX7:function(t,e,a){"use strict";a.r(e);var i={name:"viewdetails",mixins:[a("y2a5").a],components:{},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){return{countData:[],countID:"",pObj:{},policeData:[]}},mounted:function(){var t=this;this.pObj=this.paramsObj,this.countID=this.pObj.algorithm_id;this.callSrvAct("/actq",{_hy:"algorithmacclist",qps:[{name:"title",val:"",op:"like"}]}).then(function(e){console.log("算法类型数据",e),t.countData=e.data.pageData||[],t.countData.splice(0,0,{id:-1,title:"全部"})}),this.callSrvAct("/alarmdtl",this.pObj.algorithm_id).then(function(e){console.log("返回值",e),console.log("整体",t.policeData),t.policeData=e.data||[],t.setCvsWH(),t.paint(t.pObj.border,t.pObj.box,t.pObj.personName)}),console.log("行",this.pObj)},methods:{countChange:function(){var t=this;console.log(this.countID),this.callSrvAct("/alarmdtl",this.countID).then(function(e){console.log("返回值",e),t.policeData=e.data||[],t.policeData&&t.policeData.length>0?(t.pObj=t.policeData[0],t.countID=t.pObj.algorithm_id,t.setCvsWH(),t.paint(t.pObj.border,t.pObj.box,t.pObj.personName)):(t.pObj=null,t.countID=-1,t.setCvsWH())})},handlie:function(t){this.pObj=t,this.setCvsWH(),this.paint(this.pObj.border,this.pObj.box,this.pObj.personName)},time:function(t){var e=new Date(1e3*t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"  "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())},falsePositive:function(){var t=this;this.callSrvAct("/misstate",[this.pObj.id]).then(function(e){console.log("返回值1",e),t.callSrvAct("/alarmdtl",t.countID).then(function(e){console.log("返回值2",e),t.policeData=e.data,console.log("返回值3",t.policeData),null==t.policeData?(t.pObj.camera_name="",t.pObj.algorithm_name="",t.pObj.alarm_time=""):t.pObj=t.policeData[0],t.setCvsWH(),t.pObj&&(t.countID=t.pObj.algorithm_id,t.paint(t.pObj.border,t.pObj.box,t.pObj.personName))})})},end:function(){var t=this;this.callSrvAct("/confirmState",[this.pObj.id]).then(function(e){console.log("返回值1",e),t.callSrvAct("/alarmdtl",t.countID).then(function(e){console.log("返回值2",e),t.policeData=e.data,console.log("返回值3",t.policeData),null==t.policeData?(t.pObj.camera_name="",t.pObj.algorithm_name="",t.pObj.alarm_time=""):t.pObj=t.policeData[0],t.setCvsWH(),t.pObj&&(t.countID=t.pObj.algorithm_id,t.paint(t.pObj.border,t.pObj.box,t.pObj.personName))})})},ends:function(){for(var t=this,e=[],a=0;a<this.policeData.length;a++)e.push(this.policeData[a].id);this.callSrvAct("/confirmState",e).then(function(e){console.log("返回值1",e),t.callSrvAct("/alarmdtl",t.countID).then(function(e){console.log("返回值2",e),t.policeData=e.data,console.log("返回值3",t.policeData),null==t.policeData?(t.pObj.camera_name="",t.pObj.algorithm_name="",t.pObj.alarm_time=""):t.pObj=t.policeData[0],t.setCvsWH(),t.pObj&&(t.countID=t.pObj.algorithm_id,t.paint(t.pObj.border,t.pObj.box,t.pObj.personName))})})},isUndef:function(t){return void 0===t||"undefined"==t||null==t},setCvsWH:function(){console.log("xxxxxxxxx ------- ");var t=document.getElementById("cvsdiv"),e=window.getComputedStyle(t,null).getPropertyValue("height"),a=window.getComputedStyle(t,null).getPropertyValue("width");e&&e.length>2&&(e=0|Number(e.substring(0,e.length-2))),a&&a.length>2&&(a=0|Number(a.substring(0,a.length-2))),console.log("divheight:",e,a);var i=document.getElementById("cvs2");console.log("cvs :",i),i.width=a,i.height=e},paint:function(t,e,a){var i=[];t&&t.length>0&&(i=JSON.parse(t));var l=[],n=[],o=document.getElementById("cvs2");if(e&&e.length>0){var s=JSON.parse(e);if(s&&s.length)for(var c=0;c<s.length-1;c+=2)l.push(s[c+1]),l.push(s[c]);n=[[l[0]*o.width|0,l[1]*o.height|0],[l[2]*o.width|0,l[1]*o.height|0],[l[2]*o.width|0,l[3]*o.height|0],[l[0]*o.width|0,l[3]*o.height|0],[l[0]*o.width|0,l[1]*o.height|0]]}var r=document.getElementById("cvs2").getContext("2d");if(!this.isUndef(i)&&i.length>0){console.log("3 ------ :"),r.lineWidth=1,r.strokeStyle="#ffdc35",r.beginPath(),r.moveTo(i[0][0]*o.width,i[0][1]*o.height);for(var d=0;d<i.length;d++)d+1<i.length&&(r.lineTo(i[d+1][0]*o.width|0,i[d+1][1]*o.height|0),r.stroke());r.closePath()}if(console.log("----- 2 2----",r),!this.isUndef(n)&&n.length>0){r.lineWidth=1,r.strokeStyle="#f9f900",r.beginPath(),r.moveTo(n[0][0],n[0][1]);for(var p=0;p<n.length-1;p++)r.lineTo(n[p+1][0],n[p+1][1]),r.stroke();r.closePath()}a&&a.length>0?(r.textAlign="end",r.textBaseAlign="top",r.fillText(a,o.width-6,16)):(r.textAlign="end",r.textBaseAlign="top",r.fillText("未识别此人",o.width-6,16))},genDownUrl:function(t){if(!t||t.length<1)return"";var e=t.split(";");return!e||e.length<2?"":this.hysrvport+"/hydownload?btnEncode=headupload&relateType=headimage&filename="+e[1]+"&Authorization="+this.apiSrv.token}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},l=(a("uf5T"),a("KHd+")),n=Object(l.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{attrs:{direction:"vertical"}},[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",[a("div",[a("span",[t._v("摄像机名称：\n                ")]),t._v(" "),a("span",[t._v(t._s(t.pObj.camera_name)+"\n                ")])]),t._v(" "),a("div",{staticStyle:{margin:"10px 0px"}},[a("span",[t._v("算法类型：\n                ")]),t._v(" "),a("el-select",{on:{change:t.countChange},model:{value:t.countID,callback:function(e){t.countID=e},expression:"countID"}},t._l(t.countData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}))],1)]),t._v(" "),a("div",[a("el-button",{staticStyle:{"background-color":"red"},on:{click:t.falsePositive}},[a("span",{staticStyle:{color:"#ffffff"}},[t._v("误报\n                ")])]),t._v(" "),a("el-button",{on:{click:t.end}},[a("span",[t._v("结束当前预警\n                ")])])],1)]),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticStyle:{width:"65%",height:"400px","background-color":"#E0E0E0",padding:"10px"}},[a("div",[a("span",[t._v(t._s(t.pObj.camera_name+"-"+t.pObj.algorithm_name)+"\n                ")]),t._v(" "),a("span",{staticStyle:{float:"right",color:"#BEBEBE"}},[t._v(t._s(t.gcomm.v2datetimestr(t.pObj.alarm_time))+"\n                ")])]),t._v(" "),a("div",{ref:"cvsdiv",staticStyle:{width:"100%",height:"360px",border:"1px solid #ADADAD","margin-top":"6px",position:"relative"},attrs:{id:"cvsdiv"}},[a("img",{attrs:{src:t.genDownUrl(t.pObj.alarm_img),width:"100%",height:"360"}}),t._v(" "),a("div",{staticStyle:{display:"block",width:"100%",height:"360px",position:"absolute",left:"0px",top:"0px"}},[a("canvas",{ref:"cvs2",staticStyle:{width:"100%",height:"100%"},attrs:{id:"cvs2"}},[t._v("不支持canvas")])])])]),t._v(" "),a("div",{staticStyle:{width:"30%",height:"400px",border:"1px solid #ADADAD",padding:"10px","background-color":"#E0E0E0"}},[a("div",{staticStyle:{"border-bottom":"1px solid #ADADAD","padding-bottom":"5px"}},[a("span",{staticStyle:{color:"#000000"}},[t._v("报警列表\n                ")]),t._v(" "),a("span",{staticStyle:{color:"blue",float:"right"},on:{click:t.ends}},[t._v("全部结束\n                ")])]),t._v(" "),a("div",{staticStyle:{width:"100%",height:"360px","overflow-y":"auto"}},t._l(t.policeData,function(e,i){return a("div",{key:e.id,staticStyle:{"border-bottom":"1px solid #ADADAD","line-height":"30px","text-align":"center"},on:{click:function(a){t.handlie(e)}}},[a("span",[t._v(t._s(t.gcomm.v2datetimestr(e.alarm_time))+"\n                    ")])])}))])])])},[],!1,null,"4f9345c7",null);n.options.__file="index.vue";e.default=n.exports},tAsA:function(t,e,a){"use strict";var i=a("5qFM");a.n(i).a},uf5T:function(t,e,a){"use strict";var i=a("MZfK");a.n(i).a}}]);