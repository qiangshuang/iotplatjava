(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-fb22","chunk-59cd"],{"0N7y":function(t,n,e){"use strict";e.r(n);var o=e("P2sY"),a=e.n(o),r={name:"promanedit",mixins:[e("y2a5").a],components:{},props:{paramsObj:{type:Object,default:function(){return{}}}},data:function(){return{newPromanForm:{id:0,title:"",prodes:""},promanForm:{}}},mounted:function(){this.pObj=a()({},this.paramsObj),this.gcomm.mapLength(this.pObj)>0?(this.isInDialog=!0,this.promanForm=a()({},this.newPromanForm,this.pObj)):this.promanForm=a()({},this.newPromanForm,this.$route.params)},methods:{pObjChanged:function(){this.gcomm.mapLength(this.pObj)>0&&(this.isInDialog=!0,this.promanForm=a()({},this.newPromanForm,this.pObj))},handleClick:function(){this.submitOrgForm("promanForm")},submitOrgFormImpl:function(t){var n=this,e=void 0,o=!0,r="";this[t].id>0?(e="/act",o=!1,r="promanup"):(e="/act",r="promanadd",this[t].state="关闭");var i=a()({},this[t]);i._hy=r,this.callSrvAct(e,i).then(function(t){n.isInDialog?(console.log("不跳转"),o?t.data&&t.data.inst?(console.log("1111111111"),n.$emit("submitOk",t.data.inst)):t.data&&(console.log("22222222222"),n.$emit("submitOk",t.data||{})):n.$emit("submitOk",i)):(console.log("跳转"),n.$router.go(-1))})},submitOrgForm:function(t){var n=this;this.$refs[t].validate(function(e){if(!e)return!1;n.submitOrgFormImpl(t)})}},watch:{paramsObj:function(t){this.pObj.id!=this.paramsObj.id&&(this.pObj=a()({},this.paramsObj),this.pObjChanged())}},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},i=(e("my5T"),e("KHd+")),s=Object(i.a)(r,function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("el-container",{attrs:{direction:"vertical"}},[e("el-form",{ref:"promanForm",attrs:{model:t.promanForm}},[e("el-form-item",{attrs:{label:"产品名称：",prop:"title",rules:{required:!0,trigger:"input"}}},[e("el-input",{staticStyle:{width:"300px"},model:{value:t.promanForm.title,callback:function(n){t.$set(t.promanForm,"title",n)},expression:"promanForm.title"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"描述：",prop:"prodes",rules:{required:!0,trigger:"input"}}},[e("el-input",{staticStyle:{width:"300px"},model:{value:t.promanForm.prodes,callback:function(n){t.$set(t.promanForm,"prodes",n)},expression:"promanForm.prodes"}})],1)],1),t._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("el-button",{on:{click:t.handleClick}},[e("span",[t._v("提交\n            ")])]),t._v(" "),e("el-button",[e("span",[t._v("取消\n            ")])])],1)],1)},[],!1,null,"6549bd8d",null);s.options.__file="index.vue";n.default=s.exports},Pssy:function(t,n,e){"use strict";e.r(n);var o=e("P2sY"),a=e.n(o),r=e("EJiy"),i=e.n(r),s=e("gDS+"),l=e.n(s),c=e("0N7y"),p={name:"proman",mixins:[e("y2a5").a],components:{Promanedit:c.default},props:{},data:function(){return{promanData:[],promanTotalRec:0,promanTotalPage:0,promanRecOfPage:10,promanCurPage:1,promanCbPage:this.gen_list_cb("proman"),promanQueryArr:[],promanQueryInit:[],promanMultiSel:[],promanSortParas:[{name:"id",tb:"proman",orderV:"desc"}],showpro:!1,proEdit:null,tableHeight:window.innerHeight-500}},mounted:function(){this.refreshPage("proman","/actq","promanlist")},methods:{promanMultiSelChange:function(t){this.promanMultiSel=t},promanQuery:function(){this.refreshPage2("proman","/actq",this.remoteRecOfPage,1,"promanlist")},promanResetQuery:function(){this.promanQueryArr=JSON.parse(l()(this.promanQueryInit))},promanSizeChange:function(t){this.refreshPage2("proman","/actq",t,this.promanCurPage,"promanlist")},promanCurChange:function(t){this.refreshPage2("proman","/actq",this.promanRecOfPage,t,"promanlist")},handlepromanDel:function(t,n){var e=this,o=n;console.log("hahaha",n),this.$confirm("此操作将删除该项数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={_hy:"promandel",proman:[{name:"id",val:[o.id],op:"in"}]};console.log("upData:",t),e.callSrvAct("/act",t).then(function(t){e.refreshPage("proman","/actq","promanlist")})}).catch(function(t){e.$message.error(t)})},add:function(){this.showpro=!0,this.proEdit={id:0}},proOk:function(){this.showpro=!1,this.refreshPage("proman","/actq","promanlist")},show3:function(){var t=this;console.log("多选ID",this.promanMultiSel);var n=this;this.$confirm("此操作将删除该项数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={_hy:"promandel",proman:[{name:"id",val:n.promanMultiSel,op:"in"}]};console.log("upData:",e),t.callSrvAct("/act",e).then(function(n){t.refreshPage("proman","/actq","promanlist")})}).catch(function(n){t.$message.error(n)})},handleChange:function(t){console.log("hahaha",t);for(var n=[],e=0;e<t.length;e++)n.push(t[e].id);this.promanMultiSel=n,this.dataArr=t,console.log("qqq",t)},importing:function(){this.$router.push({name:"proimport"})},exporting:function(){for(var t=[],n=0;n<this.promanData.length;n++)t.push({"名称":this.promanData[n].title,"描述":this.promanData[n].prodes});var e=XLSX.utils.json_to_sheet(t);console.log(e),this.openDownloadDialog(this.sheet2blob(e),"下载1.xlsx")},sheet2blob:function(t,n){var e={SheetNames:[n=n||"sheet1"],Sheets:{}};e.Sheets[n]=t;var o=XLSX.write(e,{bookType:"xlsx",bookSST:!1,type:"binary"});return new Blob([function(t){for(var n=new ArrayBuffer(t.length),e=new Uint8Array(n),o=0;o!=t.length;++o)e[o]=255&t.charCodeAt(o);return n}(o)],{type:"application/octet-stream"})},openDownloadDialog:function(t,n){"object"==(void 0===t?"undefined":i()(t))&&t instanceof Blob&&(t=URL.createObjectURL(t));var e,o=document.createElement("a");o.href=t,o.download=n||"",window.MouseEvent?e=new MouseEvent("click"):(e=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(e)},handlepromanEdit:function(t,n){this.proEdit=a()({},n),this.showpro=!0,this.proClose=!0},proClose:function(){this.showpro=!1}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},m=(e("z72H"),e("KHd+")),u=Object(m.a)(p,function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("el-container",{staticStyle:{height:"100%"},attrs:{direction:"vertical"}},[e("div",[e("span",[t._v("名称\n        ")]),t._v(" "),e("el-input",{staticStyle:{width:"300px"}}),t._v(" "),e("el-button",{staticStyle:{"margin-left":"30px"}},[e("span",[t._v("搜索\n            ")])])],1),t._v(" "),e("div",{staticStyle:{"margin-top":"20px"}},[e("el-button",{staticStyle:{"margin-left":"30px"},on:{click:t.add}},[e("span",[t._v("新增\n            ")])]),t._v(" "),e("el-button",{staticStyle:{"margin-left":"30px"},on:{click:t.show3}},[e("span",[t._v("批量删除\n            ")])]),t._v(" "),e("el-button",{staticStyle:{"margin-left":"30px"},on:{click:t.importing}},[e("span",[t._v("批量导入\n            ")])]),t._v(" "),e("el-button",{staticStyle:{"margin-left":"30px"},on:{click:t.exporting}},[e("span",[t._v("批量导出\n            ")])])],1),t._v(" "),e("el-table",{ref:"proman",staticStyle:{"margin-top":"5px"},attrs:{border:!0,height:t.tableHeight,"header-cell-style":{background:"#E6F4FF",fontWeight:"500",color:"#0A51C4",borderBottom:"2px solid #4093F7"},data:t.promanData},on:{"selection-change":t.handleChange}},[e("el-table-column",{attrs:{label:"全选",type:"selection"}}),t._v(" "),e("el-table-column",{attrs:{label:"名称",prop:"title",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{label:"描述",prop:"prodes",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("div",{staticStyle:{"margin-top":"10px"}},[e("el-button",{on:{click:function(e){t.handlepromanEdit(n.$index,n.row)}}},[e("span",[t._v("编辑\n                        ")])]),t._v(" "),e("el-button",{attrs:{type:"danger"},on:{click:function(e){t.handlepromanDel(n.$index,n.row)}}},[e("span",[t._v("删除\n                        ")])])],1)]}}])})],1),t._v(" "),e("el-pagination",{staticStyle:{"text-align":"center"},attrs:{layout:"total, sizes, prev, pager, next"},on:{"size-change":t.SizeChange,"current-change":t.CurChange}}),t._v(" "),t.showpro?e("el-dialog",{attrs:{visible:t.showpro},on:{"update:visible":function(n){t.showpro=n}}},[e("promanedit",{attrs:{paramsObj:t.proEdit},on:{submitOk:t.proOk,submitClose:t.proClose}})],1):t._e()],1)},[],!1,null,"5562a4f8",null);u.options.__file="index.vue";n.default=u.exports},fwix:function(t,n,e){},my5T:function(t,n,e){"use strict";var o=e("fwix");e.n(o).a},oo2Q:function(t,n,e){},z72H:function(t,n,e){"use strict";var o=e("oo2Q");e.n(o).a}}]);