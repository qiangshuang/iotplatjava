(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-160c"],{AYlU:function(t,e,a){},IB8E:function(t,e,a){"use strict";a.r(e);var l={name:"rmanagement",mixins:[a("y2a5").a],components:{},props:{},data:function(){return{policyData:[],policyTotalRec:0,policyTotalPage:0,policyRecOfPage:10,policyCurPage:1,policyCbPage:this.gen_list_cb("policy"),policyQueryArr:[],policyQueryInit:[],tableHeight:window.innerHeight-500,selectData:[],org_id:"",gateway_title:"",cardnumber:"",idnumber:"",user_title:"",txTime:[]}},mounted:function(){var t=this;this.callSrvAct("/actq",{_hy:"departlist",qps:[{name:"type",val:"部门",tb:"org"}],sps:[{name:"title",tb:"org",orderV:"asc"}]}).then(function(e){console.log("部门",e),t.orgTtList=e.data||[],t.orgTtList.unshift({id:0,title:"全部"})}),this.callSrvAct("/policylist",{user_title:"",cp:1,rop:10}).then(function(e){console.log("返回值",e),t.policyData=e.data.pageData||[],t.policyTotalRec=e.data.totalRec,t.policyCurPage=e.data.cp})},methods:{search:function(){var t=this;this.callSrvAct("/policylist",{user_title:this.user_title,org_id:this.org_id,starttime:this.txTime[0],endtime:this.txTime[1],gateway_title:this.gateway_title,cardnumber:this.cardnumber,idnumber:this.idnumber,cp:1,rop:10}).then(function(e){console.log("返回值",e),t.policyData=e.data.pageData||[],t.policyTotalRec=e.data.totalRec,t.policyCurPage=e.data.cp})},dis:function(){this.$router.push({name:"aassig",params:null})},timess:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"  "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())},handleChange:function(t){this.selectData=t},del:function(t,e){var a=this;this.callSrvAct("/policydel",[e.id]).then(function(t){a.callSrvAct("/policylist",{user_title:"",cp:1,rop:10}).then(function(t){console.log("返回值",t),a.policyData=t.data.pageData||[],a.policyTotalRec=t.data.totalRec,a.policyCurPage=t.data.cp})})},dels:function(){for(var t=this,e=[],a=0;a<this.selectData.length;a++)e.push(this.selectData[a].id);this.callSrvAct("/policydel",e).then(function(e){t.callSrvAct("/policylist",{user_title:"",cp:0,rop:10}).then(function(e){console.log("返回值",e),t.policyData=e.data.pageData||[],t.policyTotalRec=e.data.totalRec,t.policyCurPage=e.data.cp})})},policySizeChange:function(t){var e=this;this.callSrvAct("/policylist",{user_title:this.user_title,org_id:this.org_id,starttime:this.txTime[0],endtime:this.txTime[1],gateway_title:this.gateway_title,cardnumber:this.cardnumber,idnumber:this.idnumber,cp:1,rop:t}).then(function(t){console.log("返回值",t),e.policyData=t.data.pageData||[],e.policyTotalRec=t.data.totalRec,e.policyCurPage=t.data.cp})},policyCurChange:function(t){var e=this;this.callSrvAct("/policylist",{user_title:this.user_title,org_id:this.org_id,starttime:this.txTime[0],endtime:this.txTime[1],gateway_title:this.gateway_title,cardnumber:this.cardnumber,idnumber:this.idnumber,cp:t,rop:10}).then(function(t){console.log("返回值",t),e.policyData=t.data.pageData||[],e.policyTotalRec=t.data.totalRec,e.policyCurPage=t.data.cp})}},watch:{},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},i=(a("Trjq"),a("KHd+")),n=Object(i.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticStyle:{height:"100%"},attrs:{direction:"vertical"}},[a("div",[a("el-row",[a("el-col",{attrs:{span:6}},[a("span",[t._v("人员部门\n                ")]),t._v(" "),a("el-select",{staticStyle:{"margin-left":"10px"},model:{value:t.org_id,callback:function(e){t.org_id=e},expression:"org_id"}},t._l(t.orgTtList,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}))],1),t._v(" "),a("el-col",{attrs:{span:10}},[a("span",{staticStyle:{"margin-left":"30px"}},[t._v("通行时间\n                ")]),t._v(" "),a("el-date-picker",{staticStyle:{"margin-left":"10px"},attrs:{"value-format":"timestamp",editable:!1,clearable:!1,"start-placeholder":"开始时间","end-placeholder":"结束时间",type:"datetimerange","range-separator":"-"},model:{value:t.txTime,callback:function(e){t.txTime=e},expression:"txTime"}})],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("span",[t._v("设备名称\n                ")]),t._v(" "),a("el-input",{staticStyle:{width:"220px","margin-left":"10px"},model:{value:t.gateway_title,callback:function(e){t.gateway_title=e},expression:"gateway_title"}})],1)],1)],1),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("span",{staticStyle:{"margin-left":"30px"}},[t._v("姓名\n                ")]),t._v(" "),a("el-input",{staticStyle:{width:"220px","margin-left":"10px"},model:{value:t.user_title,callback:function(e){t.user_title=e},expression:"user_title"}})],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("span",{staticStyle:{"margin-left":"30px"}},[t._v("工号\n                ")]),t._v(" "),a("el-input",{staticStyle:{width:"220px","margin-left":"10px"},model:{value:t.cardnumber,callback:function(e){t.cardnumber=e},expression:"cardnumber"}})],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("span",[t._v("身份证号\n                ")]),t._v(" "),a("el-input",{staticStyle:{width:"220px","margin-left":"10px"},model:{value:t.idnumber,callback:function(e){t.idnumber=e},expression:"idnumber"}})],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[a("span",[t._v("搜索\n                    ")])])],1)],1)],1),t._v(" "),a("div",{staticStyle:{display:"flex",margin:"10px 0px"}},[a("el-button",{on:{click:t.dis}},[a("span",[t._v("分配权限\n            ")])]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:t.dels}},[a("span",[t._v("删除\n            ")])])],1),t._v(" "),a("el-table",{ref:"policy",staticStyle:{margin:"10px 0px"},attrs:{stripe:!0,border:!0,height:t.tableHeight,"header-cell-style":{background:"#E6F4FF",fontWeight:"500",color:"#0A51C4",borderBottom:"2px solid #4093F7"},"default-sort":{id:"descending"},id:"policy",data:t.policyData},on:{"selection-change":t.handleChange}},[a("el-table-column",{attrs:{label:"全选",type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"user_title",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"性别",prop:"gender",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"部门",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"身份证号",prop:"idnumber",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"工号",prop:"cardnumber",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"设备名称",prop:"gateway_title",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"允许通行时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.timess(e.row.starttime))+"\n                ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"允许结束时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.timess(e.row.endtime))+"\n                ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"被访人员",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"state",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger"},on:{click:function(a){t.del(e.$index,e.row)}}},[a("span",[t._v("删除\n                    ")])])]}}])})],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{total:t.policyTotalRec,"page-count":t.policyTotalPage,"current-page":t.policyCurPage,layout:"total, sizes, prev, pager, next"},on:{"size-change":t.policySizeChange,"current-change":t.policyCurChange}})],1)],1)},[],!1,null,"13465d0c",null);n.options.__file="index.vue";e.default=n.exports},Trjq:function(t,e,a){"use strict";var l=a("AYlU");a.n(l).a}}]);